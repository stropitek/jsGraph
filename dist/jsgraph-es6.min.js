(function(A,S){'object'==typeof exports&&'object'==typeof module?module.exports=S():'function'==typeof define&&define.amd?define([],S):'object'==typeof exports?exports.Graph=S():A.Graph=S()})(this,function(){return function(u){function A(P){if(S[P])return S[P].exports;var C=S[P]={exports:{},id:P,loaded:!1};return u[P].call(C.exports,C,C.exports,A),C.loaded=!0,C.exports}var S={};return A.m=u,A.c=S,A.p='',A(0)}([function(u,A,S){var P,C,T;(function(E,Y){C=[u,S(1),S(2),S(5),S(6),S(8),S(9),S(10),S(11),S(15),S(16),S(17),S(18),S(19),S(20),S(21),S(22),S(23),S(42),S(24),S(25),S(26),S(27),S(28),S(29),S(30),S(31),S(32),S(33),S(34),S(35),S(36),S(37),S(38),S(40),S(41)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var X})(this,function(E,Y,X,I,N,F,O,V,B,W,R,G,U,Z,Q,K,J,$,ee,te,ie,re,ae,se,ne,oe,le,de,pe,ue,ge,ce,he,xe,me,ye){'use strict';function fe($e){return $e&&$e.__esModule?$e:{default:$e}}var be=fe(Y),Ae=fe(X),ke=fe(I),Me=fe(N),_e=fe(F),Se=fe(O),Pe=fe(V),Ce=fe(B),ve=fe(W),Le=fe(R),we=fe(G),Te=fe(U),Ee=fe(Z),De=fe(Q),Ye=fe(K),Xe=fe(J),Ie=fe($),Ne=fe(ee),ze=fe(te),He=fe(ie),Fe=fe(re),Oe=fe(ae),je=fe(se),Ve=fe(ne),Be=fe(oe),We=fe(le),Re=fe(de);fe(pe);var Ge=fe(ue),Ue=fe(ge),Ze=fe(ce),qe=fe(he),Qe=fe(xe),Ke=fe(me),Je=fe(ye);be.default.registerConstructor('graph.position',Ae.default),be.default.registerConstructor('graph.axis.x',Me.default),be.default.registerConstructor('graph.axis.y',_e.default),be.default.registerConstructor('graph.axis.x.bar',Se.default),be.default.registerConstructor('graph.axis.x.time',Pe.default),be.default.registerConstructor('graph.serie.line',Ce.default),be.default.registerConstructor('graph.serie.line.color',we.default),be.default.registerConstructor('graph.serie.contour',Ye.default),be.default.registerConstructor('graph.serie.bar',ve.default),be.default.registerConstructor('graph.serie.box',Le.default),be.default.registerConstructor('graph.serie.scatter',Te.default),be.default.registerConstructor('graph.serie.zone',Ee.default),be.default.registerConstructor('graph.serie.densitymap',De.default),be.default.registerConstructor(be.default.SERIE_LINE,Ce.default),be.default.registerConstructor(be.default.SERIE_LINE_COLORED,we.default),be.default.registerConstructor(be.default.SERIE_CONTOUR,Ye.default),be.default.registerConstructor(be.default.SERIE_BAR,ve.default),be.default.registerConstructor(be.default.SERIE_BOX,Le.default),be.default.registerConstructor(be.default.SERIE_SCATTER,Te.default),be.default.registerConstructor(be.default.SERIE_ZONE,Ee.default),be.default.registerConstructor(be.default.SERIE_DENSITYMAP,De.default),be.default.registerConstructor('graph.plugin.shape',Ue.default),be.default.registerConstructor('graph.plugin.drag',Ge.default),be.default.registerConstructor('graph.plugin.zoom',qe.default),be.default.registerConstructor('graph.plugin.selectScatter',Ze.default),be.default.registerConstructor('graph.plugin.timeSerieManager',Qe.default),be.default.registerConstructor('graph.plugin.serielinedifference',Ke.default),be.default.registerConstructor('graph.plugin.serieLineDifference',Ke.default),be.default.registerConstructor('graph.plugin.axissplitting',Je.default),be.default.registerConstructor('graph.shape',Xe.default),be.default.registerConstructor('graph.shape.areaundercurve',Ie.default),be.default.registerConstructor('graph.shape.arrow',Ne.default),be.default.registerConstructor('graph.shape.ellipse',ze.default),be.default.registerConstructor('graph.shape.label',He.default),be.default.registerConstructor('graph.shape.polyline',Fe.default),be.default.registerConstructor('graph.shape.line',Oe.default),be.default.registerConstructor('graph.shape.nmrintegral',je.default),be.default.registerConstructor('graph.shape.peakintegration2d',Ve.default),be.default.registerConstructor('graph.shape.rect',Be.default),be.default.registerConstructor('graph.shape.rectangle',Be.default),be.default.registerConstructor('graph.shape.cross',We.default),be.default.registerConstructor('graph.shape.peakboundariescenter',Re.default),be.default.registerConstructor('graph.legend',ke.default),E.exports=be.default})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(2),S(3),S(4)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var X})(this,function(E,Y,X,I){'use strict';function N(ce){return ce&&ce.__esModule?ce:{default:ce}}function F(ce,he,xe,me){var ye=ce.getConstructor(me,!0);if(ye||'string'!=typeof me||(ye=ce.getConstructor('graph.serie.'+me,!0)),ye){var fe=new ye;fe.init(ce,he,xe),ce.appendSerieToDom(fe)}else return se.throwError('No constructor exists for the serie type provided. Use Graph.registerConstructor( name, constructor ); first is you use your own series');return fe}function O(ce,he){for(var xe=0,me=he.length;xe<me;xe++){var ye=!0;for(var fe=0,be=he[xe].length;fe<be;fe++)ce[0]<he[xe][fe][0]&&ce[1]<he[xe][fe][0]||ce[0]>he[xe][fe][1]&&ce[1]>he[xe][fe][1]||(ye=!1);if(ye)return he[xe].push(ce),xe}return he.push([ce]),he.length-1}function V(ce){var he={top:[],bottom:[],left:[],right:[]},xe={top:[],bottom:[],left:[],right:[]};ce._painted=!0,ce._applyToAxes(function(ke,Me){if(!(ke.disabled||ke.floating)){var _e=O(ke.getSpan(),xe[Me]);ke.setLevel(_e),he[Me][_e]=Math.max(ke.getAxisPosition(),he[Me][_e]||0)}},!1,!0,!1);var me=he.top.reduce(function(ke,Me){return ke+Me},0),ye=he.bottom.reduce(function(ke,Me){return ke+Me},0);[he.top,he.bottom].map(function(ke){ke.reduce(function(Me,_e,Se){return ke[Se]=Me+_e,Me+_e},0)}),ce._applyToAxes(function(ke,Me){ke.disabled||ke.floating||ke.setShift(he[Me][ke.getLevel()])},!1,!0,!1),ce._applyToAxes(function(ke,Me){if(!ke.disabled&&(ke.setMinPx(me),ke.setMaxPx(ce.getDrawingHeight(!0)-ye),!ke.floating)){let _e=ke.linkedToAxis?0:ke.draw();var Se=O(ke.getSpan(),xe[Me]);ke.setLevel(Se),he[Me][Se]=Math.max(_e,he[Me][Se]||0)}},!1,!1,!0);var fe=se.extend(!0,{},he);ce._applyToAxes(function(ke,Me){ke.disabled||ke.floating||(fe[Me][ke.getLevel()]=Math.max(he[Me][ke.getLevel()],ke.equalizePosition(he[Me][ke.getLevel()])))},!1,!1,!0),he=fe;var be=he.left.reduce(function(ke,Me){return ke+Me},0),Ae=he.right.reduce(function(ke,Me){return ke+Me},0);[he.left,he.right].map(function(ke){ke.reduce(function(Me,_e,Se){return ke[Se]=Me+_e,Me+_e},0)}),ce._applyToAxes((ke,Me)=>{ke.disabled||ke.floating||ke.setShift(he[Me][ke.getLevel()])},!1,!1,!0),ce._applyToAxes(function(ke){ke.disabled||(ke.setMinPx(be),ke.setMaxPx(ce.getDrawingWidth(!0)-Ae),ke.floating||!ke.linkedToAxis&&ke.draw())},!1,!0,!1),ce._applyToAxes(function(ke){if(ke.floating){var Me=ke.getFloatingAxis(),_e=ke.getFloatingValue(),Se=Me.getPx(_e);ke.setShift(Se),ke.linkedToAxis||ke.draw()}},!1,!0,!0),$(ce,'right',ce.getDrawingWidth(!0),ce.getDrawingWidth(!0),me,ce.getDrawingHeight(!0)-ye),$(ce,'left',0,0,me,ce.getDrawingHeight(!0)-ye),$(ce,'top',be,ce.getDrawingWidth(!0)-Ae,0,0),$(ce,'bottom',be,ce.getDrawingWidth(!0)-Ae,ce.getDrawingHeight(!0)-ye,ce.getDrawingHeight(!0)-ye),ce.clipRect.setAttribute('y',me),ce.clipRect.setAttribute('x',be),ce.clipRect.setAttribute('width',ce.getDrawingWidth()-be-Ae),ce.clipRect.setAttribute('height',ce.getDrawingHeight()-me-ye),ce.rectEvent.setAttribute('y',me+ce.getPaddingTop()),ce.rectEvent.setAttribute('x',be+ce.getPaddingLeft()),ce.drawingSpaceWidth=ce.getDrawingWidth()-be-Ae,ce.drawingSpaceHeight=ce.getDrawingHeight()-me-ye,ce.rectEvent.setAttribute('width',ce.drawingSpaceWidth),ce.rectEvent.setAttribute('height',ce.drawingSpaceHeight),ce.drawingSpaceMinX=be+ce.getPaddingLeft(),ce.drawingSpaceMinY=me+ce.getPaddingTop(),ce.drawingSpaceMaxX=ce.getDrawingWidth()-Ae+ce.getPaddingLeft(),ce.drawingSpaceMaxY=ce.getDrawingHeight()-ye+ce.getPaddingTop(),ce.shift=he,ce.redrawShapes()}function B(ce){var he=ce;ce._dom.addEventListener('keydown',function(xe){(8==xe.keyCode||127==xe.keyCode)&&he.selectedShapes&&(xe.preventDefault(),xe.stopPropagation(),he.selectedShapes.map(function(me){me.kill()}))}),ce.groupEvent.addEventListener('mousemove',function(xe){var me=he._getXY(xe);R(he,me.x,me.y,xe)}),ce.dom.addEventListener('mouseleave',function(){te(he)}),ce.groupEvent.addEventListener('mousedown',function(xe){if(he.focus(),!(3==xe.which||xe.ctrlKey)){var me=he._getXY(xe);W(he,me.x,me.y,xe)}}),ce.dom.addEventListener('mouseup',function(xe){ce.emit('mouseUp',xe);var me=he._getXY(xe);Q(he,me.x,me.y,xe)}),ce.dom.addEventListener('dblclick',function(xe){ce.emit('dblClick',xe);var me=he._getXY(xe);Z(he,me.x,me.y,xe)}),ce.groupEvent.addEventListener('click',function(xe){if(!(3==xe.which||xe.ctrlKey)){var me=he._getXY(xe);he.prevent(!1)||K(he,me.x,me.y,xe)}}),ce.groupEvent.addEventListener('mousewheel',function(xe){var me=xe.wheelDeltaY||xe.wheelDelta||-xe.deltaY;return ee(he,me,xe),!1}),ce.groupEvent.addEventListener('wheel',function(xe){var me=xe.wheelDeltaY||xe.wheelDelta||-xe.deltaY;return ee(he,me,xe),!1})}function W(ce,he,xe,me){return ce.forcedPlugin?(ce.activePlugin=ce.forcedPlugin,void ce._pluginExecute(ce.activePlugin,'onMouseDown',[ce,he,xe,me])):void G(ce,me,[ce,he,xe,me],'onMouseDown')}function R(ce,he,xe,me){if(ce.bypassHandleMouse)return void ce.bypassHandleMouse.handleMouseMove(me);if(!(ce.activePlugin&&ce._pluginExecute(ce.activePlugin,'onMouseMove',[ce,he,xe,me]))){;if(ce._applyToAxes('handleMouseMove',[he-ce.options.paddingLeft,me],!0,!1),ce._applyToAxes('handleMouseMove',[xe-ce.options.paddingTop,me],!1,!0),!ce.activePlugin){var ye;if(ce.options.trackingLine&&ce.options.trackingLine.snapToSerie&&'common'==ce.options.trackingLine.mode){var fe=ce.options.trackingLine.snapToSerie;if(ye=fe.handleMouseMove(!1,!0),!ye)ce.trackingLine.hide();else{ce.trackingLine.show();var be=ye.xIndexClosest;ce.trackingLine.getPosition(0).x=fe.getData()[0][2*be],ce.trackingLine.getPosition(1).x=fe.getData()[0][2*be],ce.trackingLine.redraw();var he=fe.getXAxis().getPx(ce.trackingLine.getPosition(0).x)+ce.options.paddingLeft}var Ae=ce.options.trackingLine.series;Ae||(Ae=ce.getSeries().map(function(_e){return{serie:_e,withinPx:20,withinVal:-1}})),ce._trackingLegend=pe(ce,Ae,he,xe,ce._trackingLegend,ce.options.trackingLine.textMethod,ce.trackingLine.getPosition(1).x)}}if(ce.options.onMouseMoveData){var ke={};for(var Me=0;Me<ce.series.length;Me++)ke[ce.series[Me].getName()]=ce.series[Me].handleMouseMove(!1,!0);ce.options.onMouseMoveData.call(ce,me,ke)}G(ce,me,[ce,he,xe,me],'onMouseMove')}}function G(ce,he,xe,me){var ye=ce.options.mouseActions,fe,be;for(fe=0,be=ye.length;fe<be;fe++)if(!ye[fe].plugin){if(ye[fe].callback&&ce.isMouseActionAllowed(he,ye[fe]))return ye[fe].options&&xe.push(ye[fe].options),ye[fe].callback.apply(ce,xe),!0;if(ye[fe].series){var Ae;for('all'===ye[fe].series&&(Ae=ce.series),Array.isArray(ye[fe].series)||(Ae=[Ae]),ye[fe].options&&xe.push(ye[fe].options);0<Ae.length;fe++)ce._serieExecute(Ae[fe],me,xe);return!0}}else if(ce.forcedPlugin==ye[fe].plugin||ce.isMouseActionAllowed(he,ye[fe]))return ye[fe].options&&xe.push(ye[fe].options),ce.activePlugin=ye[fe].plugin,ce._pluginExecute(ye[fe].plugin,me,xe),!0;return!1}function U(ce){var he=document.createElement('div');return he.setAttribute('class','trackingLegend'),he.style.position='absolute',he.style.borderRadius='4px',he.style.boxShadow='1px 1px 3px 0px rgba(100,100,100,0.6)',he.style.border='2px solid #333333',he.style.backgroundColor='rgba(255, 255, 255, 0.5 )',he.style.pointerEvents='none',he.style.paddingTop='5px',he.style.paddingBottom='5px',he.style.paddingLeft='10px',he.style.paddingRight='10px',ce.getWrapper().insertBefore(he,ce.getDom()),he}function Z(ce,he,xe,me){ce.options.dblclick,G(ce,me,[he,xe,me],'onDblClick')}function Q(ce,he,xe,me){return ce.bypassHandleMouse?(ce.bypassHandleMouse.handleMouseUp(me),void(ce.activePlugin=!1)):void(ce._pluginExecute(ce.activePlugin,'onMouseUp',[ce,he,xe,me]),ce.activePlugin=!1)}function K(ce,he,xe,me){ce.emit('click',[ce,he,xe,me]),me.target.jsGraphIsShape||ce.prevent(!1)||!ce.options.shapesUnselectOnClick||ce.unselectShapes()}function J(ce,he,xe,me){var xe=xe||{},fe={def:{x:ce.getConstructor('graph.axis.x'),y:ce.getConstructor('graph.axis.y')},time:{x:ce.getConstructor('graph.axis.x.time')},bar:{x:ce.getConstructor('graph.axis.x.bar')}},ye;switch(xe.type){case'time':var be=fe.time;break;case'bar':var be=fe.bar;break;case'broken':var be=fe.broken;break;default:var be=fe.def;}return'top'===me||'bottom'===me?ye=be.x:'left'===me||'right'===me?ye=be.y:void 0,he=he||0,'object'==typeof he&&(xe=he,he=0),ce.axis[me][he]||(ce.axis[me][he]=new ye(ce,me,xe),ce.axis[me][he].init(ce,xe)),ce.axis[me][he]}function $(ce,he,xe,me,ye,fe){if(!1!==ce.options.close){var be=0;ce.axis[he].map(function(Ae){Ae.isDisplayed()&&!Ae.floating&&be++}),(!0===ce.options.close||ce.options.close[he])&&0==be?(ce.closingLines[he].setAttribute('display','block'),ce.closingLines[he].setAttribute('x1',xe),ce.closingLines[he].setAttribute('x2',me),ce.closingLines[he].setAttribute('y1',ye),ce.closingLines[he].setAttribute('y2',fe)):ce.closingLines[he].setAttribute('display','none')}}function ee(ce,he,xe){G(ce,xe,[he,xe],'onMouseWheel')&&(xe.preventDefault(),xe.stopPropagation())}function te(ce){ce.options.handleMouseLeave&&ce.options.handleMouseLeave.call(ce)}function ie(ce){var he=ce._axesHaveChanged;return ce._axesHaveChanged=!1,he}function re(ce){var he=ce._sizeChanged;return ce._sizeChanged=!1,he}Object.defineProperty(E,'__esModule',{value:!0});var ae=N(Y),se=function(he){if(he&&he.__esModule)return he;var xe={};if(null!=he)for(var me in he)Object.prototype.hasOwnProperty.call(he,me)&&(xe[me]=he[me]);return xe.default=he,xe}(X),ne=N(I);const oe={title:'',paddingTop:30,paddingBottom:5,paddingLeft:20,paddingRight:20,close:{left:!0,right:!0,top:!0,bottom:!0},fontSize:12,fontFamily:'Myriad Pro, Helvetica, Arial',plugins:{},pluginAction:{},mouseActions:[],wheel:{},dblclick:{},shapesUnselectOnClick:!0,shapesUniqueSelection:!0};var le=new Map;class de extends ne.default{constructor(ce,he,xe){if(super(),this._creation=se.guid(),'string'==typeof ce?ce=document.getElementById(ce):'number'==typeof ce.length&&(ce=ce[0]),!ce)throw'The wrapper DOM element was not found.';if(!ce.appendChild)throw'The wrapper appears to be an invalid HTMLElement';for(var me in ce.style['-webkit-user-select']='none',ce.style['-moz-user-select']='none',ce.style['-o-user-select']='none',ce.style['-ms-user-select']='none',ce.style['user-select']='none',this.options=se.extend({},oe,he),this.prevented=!1,this.axis={left:[],top:[],bottom:[],right:[]},this.shapes=[],this.shapesLocked=!1,this.plugins={},this.options.pluginAction)this.options.pluginAction.plugin=me,this.options.mouseActions.push(this.options.pluginAction);this.selectedShapes=[],this.ns='http://www.w3.org/2000/svg',this.nsxlink='http://www.w3.org/1999/xlink',this.series=[],this._dom=ce,this._axesHaveChanged=!0,this.options.hasOwnProperty('padding')&&se.isNumeric(this.options.padding)&&(this.options.paddingTop=this.options.paddingBottom=this.options.paddingLeft=this.options.paddingRight=this.options.padding);var ye=getComputedStyle(ce),fe=parseInt(ye.width),be=parseInt(ye.height);if(this._doDom(),this.setSize(fe,be),this._resize(),B(this),this.currentAction=!1,xe)for(var me in xe)for(var Ae=0,ke=xe[me].length;Ae<ke;Ae++)'top'==me?this.getTopAxis(Ae,xe[me][Ae]):'bottom'==me?this.getBottomAxis(Ae,xe[me][Ae]):'left'==me?this.getLeftAxis(Ae,xe[me][Ae]):'right'==me?this.getRightAxis(Ae,xe[me][Ae]):void 0;this._pluginsInit()}getDom(){return this.dom}getId(){return this._creation}getWrapper(){return this._dom}setOption(ce,he){return this.options[ce]=he,this}setTitle(ce){this.options.title=ce,this.domTitle.textContent=ce}displayTitle(){this.domTitle.setAttribute('display','inline')}hideTitle(){this.domTitle.setAttribute('display','none')}redraw(ce){if(this.width&&this.height)return this.sizeSet?!ce||ie(this)||re(this)?(this.executeRedrawSlaves(),V(this),!0):(this.executeRedrawSlaves(!0),!1):(this._resize(),this.executeRedrawSlaves(),!0)}executeRedrawSlaves(){this._pluginsExecute('preDraw')}draw(ce){this.updateLegend(!0),this.drawSeries(this.redraw(!ce))}delayUpdate(){return this._lockUpdate=!0,this}doUpdate(){return this.legend&&this.legend.update(),this.draw(),this.legend&&this.legend.update(),this}resumeUpdate(){return this._lockUpdate=!1,this}isDelayedUpdate(){return this._lockUpdate}setWidth(ce,he){this.width=ce,he||this._resize()}setHeight(ce,he){this.height=ce,he||this._resize()}resize(ce,he){return ce&&he&&this.setSize(ce,he),this._resize(),this}setSize(ce,he){this.setWidth(ce,!0),this.setHeight(he,!0),this.getDrawingHeight(),this.getDrawingWidth()}getWidth(){return this.width}getHeight(){return this.height}getPaddingTop(){return this.options.paddingTop}getPaddingLeft(){return this.options.paddingLeft}getPaddingBottom(){return this.options.paddingBottom}getPaddingRight(){return this.options.paddingRight}getDrawingHeight(ce){return ce&&this.innerHeight?this.innerHeight:this.innerHeight=this.height-this.options.paddingTop-this.options.paddingBottom}getDrawingWidth(ce){return ce&&this.innerWidth?this.innerWidth:this.innerWidth=this.width-this.options.paddingLeft-this.options.paddingRight}cacheOffset(){this.offsetCached=se.getOffset(this._dom)}uncacheOffset(){this.offsetCached=!1}getXAxis(ce,he){return 0<this.axis.top.length&&0==this.axis.bottom.length?this.getTopAxis(ce,he):this.getBottomAxis(ce,he)}getYAxis(ce,he){return 0<this.axis.right.length&&0==this.axis.left.length?this.getRightAxis(ce,he):this.getLeftAxis(ce,he)}getTopAxis(ce,he){return J(this,ce,he,'top')}getBottomAxis(ce,he){return J(this,ce,he,'bottom')}getLeftAxis(ce,he){return J(this,ce,he,'left')}getRightAxis(ce,he){return J(this,ce,he,'right')}setXAxis(ce,he){this.setBottomAxis(ce,he)}setYAxis(ce,he){this.setLeftAxis(ce,he)}setLeftAxis(ce,he){he=he||0,this.axis.left[he]&&this.axis.left[he].kill(),this.axis.left[he]=ce}setRightAxis(ce,he){he=he||0,this.axis.right[he]&&this.axis.right[he].kill(),this.axis.right[he]=ce}setTopAxis(ce,he){he=he||0,this.axis.top[he]&&this.axis.top[he].kill(),this.axis.top[he]=ce}setBottomAxis(ce,he){he=he||0,this.axis.bottom[he]&&this.axis.bottom[he].kill(),this.axis.bottom[he]=ce}killAxis(ce,he=!1,xe=!1){var me;ce.isX()&&(-1<(me=this.axis.bottom.indexOf(ce))&&this.axis.bottom.splice(me,1),-1<(me=this.axis.top.indexOf(ce))&&this.axis.top.splice(me,1),!xe&&this.series.map(ye=>{ye.getXAxis()==ce&&ye.kill()})),ce.isY()&&(-1<(me=this.axis.left.indexOf(ce))&&this.axis.left.splice(me,1),-1<(me=this.axis.right.indexOf(ce))&&this.axis.right.splice(me,1),!xe&&this.series.map(ye=>{ye.getYAxis()==ce&&ye.kill()})),this.axisGroup.removeChild(ce.group),this.groupPrimaryGrids.removeChild(ce.gridPrimary),this.groupSecondaryGrids.removeChild(ce.gridSecondary),he||this.draw(!0)}hasXAxis(ce){return this.hasTopAxis(ce)||this.hasBottomAxis(ce)}hasYAxis(ce){return this.hasLeftAxis(ce)||this.hasRightAxis(ce)}hasTopAxis(ce){return this.hasAxis(ce,this.axis.top)}hasBottomAxis(ce){return this.hasAxis(ce,this.axis.bottom)}hasLeftAxis(ce){return this.hasAxis(ce,this.axis.left)}hasRightAxis(ce){return this.hasAxis(ce,this.axis.right)}hasAxis(ce,he){for(var xe=0,me=he.length;xe<me;xe++){if(he[xe]==ce)return!0;if(he[xe].hasAxis(ce))return!0}return!1}autoscaleAxes(){this._applyToAxes('setMinMaxToFitSeries',null,!0,!0)}setBackgroundColor(ce){return this.rectEvent.setAttribute('fill',ce),this}getAxisState(){var ce={};for(var he in this.axis)ce[he]=this.axis[he].map(function(xe){return[xe.getCurrentMin(),xe.getCurrentMax()]});return ce}setAxisState(ce){var he,xe;for(var me in ce)if(this.axis[me])for(he=0,xe=ce[me].length;he<xe;he++)this.axis[me][he]&&(this.axis[me][he].setCurrentMin(ce[me][he][0]),this.axis[me][he].setCurrentMax(ce[me][he][1]));this.draw()}saveAxisState(ce){return this.savedAxisState=this.savedAxisState||{},this.savedAxisState[ce]=this.getAxisState(),this}recallAxisState(){return this.savedAxisState[savedName]&&this.recallAxisState(this.savedAxisState[savedName]),this}_applyToAxis(ce){switch(ce){case'string':return function(he,xe,me){for(var ye=0;ye<this.axis[he].length;ye++)this.axis[he][ye][xe].apply(this.axis[he][ye],me)};break;case'function':return function(he,xe,me){for(var ye=0;ye<this.axis[he].length;ye++)xe.call(this,this.axis[he][ye],he,me)};}}getBoundaryAxis(ce,he){var xe=this.getBoundaryAxisFromSeries(ce,he);return xe}getBoundaryAxisFromSeries(ce,he){var xe='min'==he,ye=ce.isX()?['getMinX','getMaxX']:['getMinY','getMaxY'],fe=ye[xe?0:1],be=xe?+(1/0):-(1/0),me,Ae,ke,Me,_e,Se;for(me=xe?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,ke=this.getSeriesFromAxis(ce,!0),(_e=0,Se=ke.length);_e<Se;_e++)(Ae=ke[_e],!!Ae.isShown())&&(Me=Ae[fe](),me=Math[he](isNaN(me)?be:me,isNaN(Me)?be:Me));return me}getSeriesFromAxis(ce){for(var he=[],xe=this.series.length-1;0<=xe;xe--)(this.series[xe].getXAxis()==ce||this.series[xe].getYAxis()==ce)&&he.push(this.series[xe]);return he}updateDataMinMaxAxes(){var ce=['bottom','top','left','right'],he,xe,me,ye;for(xe=0,me=ce.length;xe<me;xe++)for(ye=this.axis[ce[xe]].length-1;0<=ye;ye--)(he=this.axis[ce[xe]][ye],2>xe?'x':'y',!he.disabled)&&(he.setMinValueData(this.getBoundaryAxis(this.axis[ce[xe]][ye],'min')),he.setMaxValueData(this.getBoundaryAxis(this.axis[ce[xe]][ye],'max')))}_applyToAxes(ce,he,xe,me){var ye=[],fe=0,be;for((xe||void 0==xe)&&(ye.push('top'),ye.push('bottom')),(me||void 0==me)&&(ye.push('left'),ye.push('right')),be=ye.length;fe<be;fe++)this._applyToAxis(typeof ce).call(this,ye[fe],ce,he)}findAxesLinkedTo(ce){var he=[];return this._applyToAxes(function(xe){xe.linkedToAxis&&xe.linkedToAxis.axis==ce&&he.push(xe)},{},ce instanceof this.getConstructor('graph.axis.x'),ce instanceof this.getConstructor('graph.axis.y')),he}_axisHasChanged(){this._axesHaveChanged=!0}newSerie(ce,he,xe){xe||(xe=de.SERIE_LINE);var me;if(me=this.getSerie(ce))return me;if(me=F(this,ce,he,xe)){;return this.series.push(me),this.emit('newSerie',me),me}}getSerie(ce){if('number'==typeof ce)return this.series[ce]||!1;for(var he=0,xe=this.series.length;he<xe;he++)if(this.series[he].getName()==ce)return this.series[he];return!1}getSeries(){return this.series}drawSerie(ce,he){if(!ce.draw)throw'Serie has no method draw';ce.draw(he)}drawSeries(ce){if(this.width&&this.height)for(var he=this.series.length-1;0<=he;he--)this.series[he].isShown()&&this.drawSerie(this.series[he],ce)}resetSeries(){this.removeSeries()}killSeries(){this.resetSeries()}removeSeries(){for(;this.series[0];)this.series[0].kill(!0);this.series=[],this.legend&&this.legend.update()}selectSerie(ce,he){'object'==typeof ce||(ce=this.getSerie(ce));this.selectedSerie==ce&&this.selectedSerie.selectionType==he||(this.selectedSerie!==ce&&this.unselectSerie(ce),this.selectedSerie=ce,this.triggerEvent('onSelectSerie',ce),ce.select(he||'selected'))}getSelectedSerie(){return this.selectedSerie}unselectSerie(ce){ce.unselect(),this.selectedSerie=!1,this.triggerEvent('onUnselectSerie',ce)}getShapesOfSerie(ce){for(var he=[],xe=this.shapes.length-1;0<=xe;xe--)this.shapes[xe].getSerie()==ce&&he.push(this.shapes[xe]);return he}makeToolbar(ce){var he=this.getConstructor('graph.toolbar');return he?this.toolbar=new he(this,ce):se.throwError('No constructor exists for toolbar')}getShapes(){return this.shapes||[]}newShape(ce,he,xe,me){var ye=this;if(this.prevent(!1),!xe&&(this.emit('beforeNewShape',he),this.prevent(!1)))return!1;'object'==typeof ce&&(xe=he,he=ce,ce=he.type),he=he||{},he._id=se.guid();var fe;if(fe='function'==typeof ce?ce:this.getConstructor('graph.shape.'+ce),!fe)return se.throwError('No constructor for this shape');var be=new fe(this,he);if(!be)return se.throwError('Failed to construct shape.');if(be.type=ce,be.graph=this,be._data=he,be.init(this,me),he.position)for(var Ae=0,ke=he.position.length;Ae<ke;Ae++)be.setPosition(new ae.default(he.position[Ae]),Ae);if(void 0!==he.properties&&be.setProperties(he.properties),void 0!==he.fillColor&&be.setFillColor(he.fillColor),void 0!==he.fillOpacity&&be.setFillOpacity(he.fillOpacity),void 0!==he.strokeColor&&be.setStrokeColor(he.strokeColor),void 0!==he.strokeWidth&&be.setStrokeWidth(he.strokeWidth),void 0!==he.layer&&be.setLayer(he.layer),!0==he.locked&&be.lock(),!0==he.movable&&be.movable(),!0==he.selectable&&be.selectable(),!0==he.resizable&&be.resizable(),void 0!==he.attributes&&be.setProp('attributes',he.attributes),void 0!==he.handles&&be.setProp('handles',he.handles),void 0!==he.selectOnMouseDown&&be.setProp('selectOnMouseDown',!0),void 0!==he.selectOnClick&&be.setProp('selectOnClick',!0),void 0!==he.highlightOnMouseOver&&be.setProp('highlightOnMouseOver',!0),he.labelEditable&&be.setProp('labelEditable',he.labelEditable),he.labels&&!he.label&&(he.label=he.labels),void 0!==he.label){Array.isArray(he.label)||(he.label=[he.label]);for(var Ae=0,ke=he.label.length;Ae<ke;Ae++)be.showLabel(Ae),be.setLabelText(he.label[Ae].text,Ae),be.setLabelPosition(he.label[Ae].position,Ae),be.setLabelColor(he.label[Ae].color||'black',Ae),be.setLabelSize(he.label[Ae].size,Ae),be.setLabelAngle(he.label[Ae].angle||0,Ae),be.setLabelBaseline(he.label[Ae].baseline||'no-change',Ae),be.setLabelAnchor(he.label[Ae].anchor||'start',Ae)}return be.createHandles(),this.shapes.push(be),xe||this.emit('newShape',be,he),be}newPosition(){return new ae.default(...arguments)}redrawShapes(){for(var ce=0,he=this.shapes.length;ce<he;ce++)this.shapes[ce].redraw()}removeShapes(){for(var ce=0,he=this.shapes.length;ce<he;ce++)this.shapes[ce]&&this.shapes[ce].kill&&this.shapes[ce].kill(!0);this.shapes=[]}selectShape(ce,he){if(ce){if(-1<this.selectedShapes.indexOf(ce))return!1;if(!ce.isSelectable())return!1;he||this.emit('beforeShapeSelect',ce),this.prevent(!1)||(0<this.selectedShapes.length&&this.options.shapesUniqueSelection&&this.unselectShapes(he),ce._select(he),this.selectedShapes.push(ce),!he&&this.emit('shapeSelect',ce))}}unselectShape(ce,he){if(-1!=this.selectedShapes.indexOf(ce))return he||this.emit('beforeShapeUnselect',ce),this.cancelUnselectShape?void(this.cancelUnselectShape=!1):void(ce._unselect(),this.selectedShapes.splice(this.selectedShapes.indexOf(ce),1),!he&&this.emit('shapeUnselect',ce))}unselectShapes(ce){for(;this.selectedShapes[0];)this.unselectShape(this.selectedShapes[0],ce);return this}_removeShape(ce){this.shapes.splice(this.shapes.indexOf(ce),1)}appendShapeToDom(ce){this.getLayer(ce.getLayer(),'shape').appendChild(ce.group)}removeShapeFromDom(ce){this.getLayer(ce.getLayer(),'shape').removeChild(ce.group)}appendSerieToDom(ce){this.getLayer(ce.getLayer(),'serie').appendChild(ce.groupMain)}removeSerieFromDom(ce){this.getLayer(ce.getLayer(),'serie').removeChild(ce.groupMain)}getLayer(ce,he){if(!this.layers[ce]){this.layers[ce]=[],this.layers[ce][0]=document.createElementNS(this.ns,'g'),this.layers[ce][0].setAttribute('data-layer',ce),this.layers[ce][1]=document.createElementNS(this.ns,'g'),this.layers[ce][2]=document.createElementNS(this.ns,'g'),this.layers[ce][0].appendChild(this.layers[ce][1]),this.layers[ce][0].appendChild(this.layers[ce][2]);for(var xe=1,me;!(me=this.layers[ce-xe])&&0<=ce-xe;)xe++;me?me.nextSibling?this.plotGroup.insertBefore(this.layers[ce][0],me.nextSibling):this.plotGroup.appendChild(this.layers[ce][0]):this.plotGroup.insertBefore(this.layers[ce][0],this.plotGroup.firstChild)}return this.layers[ce]['shape'==he?2:1]}focus(){this._dom.focus()}elementMoving(ce){this.bypassHandleMouse=ce}stopElementMoving(ce){ce&&ce==this.bypassHandleMouse?this.bypassHandleMouse=!1:!ce&&(this.bypassHandleMouse=!1)}_makeClosingLines(){this.closingLines={};for(var ce=['top','bottom','left','right'],he=0;4>he;he++){var xe=document.createElementNS(this.ns,'line');xe.setAttribute('stroke','black'),xe.setAttribute('shape-rendering','crispEdges'),xe.setAttribute('stroke-linecap','square'),xe.setAttribute('display','none'),this.closingLines[ce[he]]=xe,this.graphingZone.appendChild(xe)}}isMouseActionAllowed(ce,he){if(he.type===ce.type||void 0===he.type&&'mousedown'===ce.type||('wheel'===ce.type||'mousewheel'===ce.type)&&'mousewheel'==he.type)return void 0===he.shift&&(he.shift=!1),void 0===he.ctrl&&(he.ctrl=!1),void 0===he.meta&&(he.meta=!1),void 0===he.alt&&(he.alt=!1),ce.shiftKey==he.shift&&ce.ctrlKey==he.ctrl&&ce.metaKey==he.meta&&ce.altKey==he.alt}forcePlugin(ce){this.forcedPlugin=ce}unforcePlugin(){this.forcedPlugin=!1}_pluginsExecute(ce,he){for(var xe in this.plugins)this.plugins[xe]&&this.plugins[xe][ce]&&this.plugins[xe][ce].apply(this.plugins[xe],he)}_pluginExecute(ce,he,xe){!ce||this.plugins[ce]&&this.plugins[ce][he]&&this.plugins[ce][he].apply(this.plugins[ce],xe)}pluginYieldActiveState(){this.activePlugin=!1}_serieExecute(ce,he,xe){'object'!=typeof serie&&(serie=this.getSerie(serie)),'function'==typeof serie[he]&&serie.apply(serie,xe)}_pluginsInit(){var ce,he,xe;for(var me in this.options.plugins)if(he=me,xe=this.options.plugins[me],ce=this.getConstructor('graph.plugin.'+he),ce){var ye=se.extend(!0,{},ce.defaults(),xe);this.plugins[he]=new ce(ye),se.mapEventEmission(this.plugins[he].options,this.plugins[he]),this.plugins[he].init(this,xe)}else se.throwError('Plugin "'+he+'" has not been registered')}getPlugin(ce){var he=this.plugins[ce];return he?he:se.throwError('Plugin "'+ce+'" has not been loaded or properly registered')}triggerEvent(){var ce=arguments[0],he=Array.prototype.splice.apply(arguments,[0,1]);if('function'==typeof this.options[ce])return this.options[ce].apply(this,arguments)}makeLegend(ce){if(this.legend)return this.legend;var he=this.getConstructor('graph.legend');if(he)this.legend=new he(this,ce);else return se.throwError('Graph legend is not available as it has not been registered');return this.legend}updateLegend(ce=!1){if(this.legend)return this.legend.update(ce),this}getLegend(){return this.legend?this.legend:void 0}requireLegendUpdate(){this.legend&&this.legend.requireDelayedUpdate()}kill(){this._dom.removeChild(this.dom)}_removeSerie(ce){this.series.splice(this.series.indexOf(ce),1)}contextListen(ce,he,xe){if(this,this.options.onContextMenuListen)return this.options.onContextMenuListen(ce,he,xe)}lockShapes(){this.shapesLocked=!0;for(var ce=0,he=this.shapes.length;ce<he;ce++)this.shapes[ce].moving=!1,this.shapes[ce].resizing=!1}unlockShapes(){this.shapesLocked=!1}prevent(ce){var he=this.prevented;return-1!=ce&&(this.prevented=void 0==ce||ce),he}_getXY(ce){var he=ce.pageX,xe=ce.pageY,me=this.offsetCached||se.getOffset(this._dom);return he-=me.left,xe-=me.top,{x:he,y:xe}}_resize(){this.width&&this.height&&(this.getDrawingWidth(),this.getDrawingHeight(),this.sizeSet=!0,this.dom.setAttribute('width',this.width),this.dom.setAttribute('height',this.height),this.domTitle.setAttribute('x',this.width/2),this.requireLegendUpdate(),this.draw(!0))}_doDom(){this.dom=document.createElementNS(this.ns,'svg'),this.dom.setAttributeNS('http://www.w3.org/2000/xmlns/','xmlns:xlink','http://www.w3.org/1999/xlink'),se.setAttributeTo(this.dom,{xmlns:this.ns,'font-family':this.options.fontFamily,'font-size':this.options.fontSize}),this._dom.appendChild(this.dom),this._dom.setAttribute('tabindex',1),this._dom.style.outline='none',this.defs=document.createElementNS(this.ns,'defs'),this.dom.appendChild(this.defs),this.groupEvent=document.createElementNS(this.ns,'g'),this.rectEvent=document.createElementNS(this.ns,'rect'),se.setAttributeTo(this.rectEvent,{'pointer-events':'fill',fill:'transparent'}),this.groupEvent.appendChild(this.rectEvent),this.dom.appendChild(this.groupEvent),this.domTitle=document.createElementNS(this.ns,'text'),this.setTitle(this.options.title),se.setAttributeTo(this.domTitle,{'text-anchor':'middle',y:20}),this.groupEvent.appendChild(this.domTitle),this.graphingZone=document.createElementNS(this.ns,'g'),this.updateGraphingZone(),this.groupEvent.appendChild(this.graphingZone),this.axisGroup=document.createElementNS(this.ns,'g'),this.graphingZone.appendChild(this.axisGroup),this.groupGrids=document.createElementNS(this.ns,'g'),this.groupGrids.setAttribute('clip-path','url(#_clipplot'+this._creation+')'),this.groupPrimaryGrids=document.createElementNS(this.ns,'g'),this.groupSecondaryGrids=document.createElementNS(this.ns,'g'),this.axisGroup.appendChild(this.groupGrids),this.groupGrids.appendChild(this.groupSecondaryGrids),this.groupGrids.appendChild(this.groupPrimaryGrids),this.plotGroup=document.createElementNS(this.ns,'g'),this.graphingZone.appendChild(this.plotGroup),this.layers=[],this._makeClosingLines(),this.clip=document.createElementNS(this.ns,'clipPath'),this.clip.setAttribute('id','_clipplot'+this._creation),this.defs.appendChild(this.clip),this.clipRect=document.createElementNS(this.ns,'rect'),this.clip.appendChild(this.clipRect),this.clip.setAttribute('clipPathUnits','userSpaceOnUse'),this.markerArrow=document.createElementNS(this.ns,'marker'),this.markerArrow.setAttribute('viewBox','0 0 10 10'),this.markerArrow.setAttribute('id','arrow'+this._creation),this.markerArrow.setAttribute('refX','6'),this.markerArrow.setAttribute('refY','5'),this.markerArrow.setAttribute('markerUnits','strokeWidth'),this.markerArrow.setAttribute('markerWidth','8'),this.markerArrow.setAttribute('markerHeight','6'),this.markerArrow.setAttribute('orient','auto');var ce=document.createElementNS(this.ns,'path');ce.setAttribute('d','M 0 0 L 10 5 L 0 10 z'),this.markerArrow.appendChild(ce),this.defs.appendChild(this.markerArrow),this.markerHorizontalSplit=document.createElementNS(this.ns,'marker'),this.markerHorizontalSplit.setAttribute('viewBox','0 0 6 8'),this.markerHorizontalSplit.setAttribute('id','horionzalsplit_'+this.getId()),this.markerHorizontalSplit.setAttribute('refX','3'),this.markerHorizontalSplit.setAttribute('refY','4'),this.markerHorizontalSplit.setAttribute('markerUnits','strokeWidth'),this.markerHorizontalSplit.setAttribute('markerWidth','6'),this.markerHorizontalSplit.setAttribute('markerHeight','8');var he=document.createElementNS(this.ns,'line');he.setAttribute('x1','0'),he.setAttribute('y1','8'),he.setAttribute('x2','6'),he.setAttribute('y2','0'),he.setAttribute('stroke','black'),this.markerHorizontalSplit.appendChild(he),this.defs.appendChild(this.markerHorizontalSplit),this.markerVerticalSplit=document.createElementNS(this.ns,'marker'),this.markerVerticalSplit.setAttribute('viewBox','0 0 8 6'),this.markerVerticalSplit.setAttribute('id','verticalsplit_'+this.getId()),this.markerVerticalSplit.setAttribute('refX','4'),this.markerVerticalSplit.setAttribute('refY','3'),this.markerVerticalSplit.setAttribute('markerUnits','strokeWidth'),this.markerVerticalSplit.setAttribute('markerWidth','8'),this.markerVerticalSplit.setAttribute('markerHeight','6');var he=document.createElementNS(this.ns,'line');he.setAttribute('x1','0'),he.setAttribute('y1','0'),he.setAttribute('x2','8'),he.setAttribute('y2','6'),he.setAttribute('stroke','black'),this.markerVerticalSplit.appendChild(he),this.defs.appendChild(this.markerVerticalSplit),this.vertLineArrow=document.createElementNS(this.ns,'marker'),this.vertLineArrow.setAttribute('viewBox','0 0 10 10'),this.vertLineArrow.setAttribute('id','verticalline'+this._creation),this.vertLineArrow.setAttribute('refX','0'),this.vertLineArrow.setAttribute('refY','5'),this.vertLineArrow.setAttribute('markerUnits','strokeWidth'),this.vertLineArrow.setAttribute('markerWidth','20'),this.vertLineArrow.setAttribute('markerHeight','10'),this.vertLineArrow.setAttribute('orient','auto'),this.vertLineArrow.setAttribute('stroke-width','1px');var xe=document.createElementNS(this.ns,'path');xe.setAttribute('d','M 0 -10 L 0 10'),xe.setAttribute('stroke','black'),this.vertLineArrow.appendChild(xe),this.defs.appendChild(this.vertLineArrow),this.plotGroup.setAttribute('clip-path','url(#_clipplot'+this._creation+')'),this.bypassHandleMouse=!1}updateGraphingZone(){se.setAttributeTo(this.graphingZone,{transform:'translate('+this.options.paddingLeft+', '+this.options.paddingTop+')'}),this._sizeChanged=!0}getDrawingSpaceWidth(){return()=>this.drawingSpaceWidth}getDrawingSpaceHeight(){return()=>this.drawingSpaceHeight}getDrawingSpaceMinX(){return()=>this.drawingSpaceMinX}getDrawingSpaceMinY(){return()=>this.drawingSpaceMinY}getDrawingSpaceMaxX(){return()=>this.drawingSpaceMaxX}getDrawingSpaceMaxY(){return()=>this.drawingSpaceMaxY}trackingLine(ce){var he=this;return ce&&(this.options.trackingLine=ce),'individual'==ce.mode?ce.series&&ce.series.map(function(xe){'object'!=typeof xe.serie&&(xe.serie=this.getSerie(xe.serie)),he.addSerieToTrackingLine(xe.serie,xe)}):ce.series.map(function(xe){xe.serie.disableTracking()}),this.trackingLine=this.newShape('line',se.extend(!0,{position:[{y:'min'},{y:'max'}],stroke:'black',layer:-1},ce.trackingLineShapeOptions)),this.trackingLine.draw(),this.trackingLine}addSerieToTrackingLine(ce,he){var xe=this;this.options.trackingLine||this.trackingLine({mode:'individual'}),ce.enableTracking(function(me,ye,fe,be){ye&&(xe.trackingLine.show(),ye.xIndexClosest,xe.trackingLine.getPosition(0).x=me.getData()[0][2*ye.closestIndex],xe.trackingLine.getPosition(1).x=me.getData()[0][2*ye.closestIndex],xe.trackingLine.redraw(),me._trackingLegend=pe(xe,{serie:me},fe,be,me._trackingLegend,he.textMethod?he.textMethod:function(Ae){for(var ke in Ae)return Ae[ke].serie.serie.getName()+': '+Ae[ke].serie.serie.getYAxis().valueToHtml(Ae[ke].yValue)},xe.trackingLine.getPosition(0).x),me._trackingLegend.style.display='block')},function(me){xe.trackingLine.hide(),me.trackingShape&&me.trackingShape.hide(),me._trackingLegend&&(me._trackingLegend.style.display='none'),me._trackingLegend=pe(xe,{serie:me},!1,!1,me._trackingLegend,!1,!1)})}static fromSchema(ce,he){var me={},ye={left:[],top:[],right:[],bottom:[]},xe;return ce.title&&(me.title=ce.title),ce.axis&&ce.axis.map(function(fe){fe.type||se.throwError('Axis type is required (top, bottom, left or right)');var be={};fe.label&&(be.labelValue=fe.label),void 0!==fe.unit&&(be.unit=fe.unit),void 0!==fe.unitWrapperAfter&&(be.unitWrapperAfter=fe.unitWrapperAfter),void 0!==fe.unitWrapperBefore&&(be.unitWrapperBefore=fe.unitWrapperBefore),void 0!==fe.min&&(be.forcedMin=fe.min),void 0!==fe.max&&(be.forcedMax=fe.max),void 0!==fe.flip&&(be.flipped=fe.flip),ye[fe.type].push(be),fe._jsGraphIndex=ye[fe.type].length-1}),xe=new de(he,me,ye),ce.width&&xe.setWidth(ce.width),ce.height&&xe.setHeight(ce.width),xe._resize(),ce.data&&ce.data.map(function(fe){var be=fe.type,ke={},Ae,Me;switch(fe.type){case'bar':se.throwError('Bar charts not supported'),be=!1;break;case'scatter':be=de.SERIE_SCATTER;break;case'box':be=de.SERIE_BOX,('x'==fe.orientation||'y'==fe.orientation)&&(ke.orientation=fe.orientation);break;default:be=de.SERIE_LINE;}if(!be)return void se.throwError('No valid serie type was found');if(Ae=xe.newSerie(fe.id||fe.label||se.guid(),ke,be),fe.lineStyle&&fe.lineStyle.map(function(Ce){var ve={};Ce.styleName=Ce.styleName||'unselected',be===de.SERIE_LINE?(void 0!==Ce.lineWidth&&(ve.lineWidth=Ce.lineWidth),void 0!==Ce.color&&(ve.lineColor=Ce.color),Ce.lineStyle&&(ve.lineStyle=Ce.lineStyle),Ae.setStyle(ve,Ce.styleName)):void 0}),fe.style&&fe.style.map(function(Ce){Ce.styleName=Ce.styleName||'unselected',Array.isArray(Ce.styles)||(Ce.styles=[Ce.styles]);var ve=Ce.styles.map(function(Le){switch(be){case de.SERIE_LINE:return{type:Le.shape,zoom:Le.zoom,strokeWidth:Le.lineWidth,strokeColor:Le.lineColor,fillColor:Le.color,points:Le.points};break;case de.SERIE_BOX:return Le;break;case de.SERIE_SCATTER:}});be===de.SERIE_LINE?Ae.setMarkers(ve,Ce.styleName):be===de.SERIE_SCATTER?Ae.setStyle(ve,{},Ce.styleName):be===de.SERIE_BOX?Ae.setStyle(ve[0],Ce.stylename):void 0}),fe.errorX||fe.errorY){var _e=[];if(fe.errorX)for(var Se=0,Pe=fe.errorX.length;Se<Pe;Se++)_e[Se]=_e[Se]||[[],[]],_e[Se][0][0]=fe.errorX[Se];if(fe.errorY)for(var Se=0,Pe=fe.errorY.length;Se<Pe;Se++)_e[Se]=_e[Se]||[[]],_e[Se][1][0]=fe.errorY[Se];Ae.setDataError(_e).setErrorStyle([{type:'bar',x:{},y:{}}])}switch(ce.axis?(Me=ce.axis[fe.xAxis],Me&&('top'===Me.type||'bottom'===Me.type)?'top'==Me.type?Ae.setXAxis(xe.getTopAxis(Me._jsGraphIndex)):'bottom'==Me.type&&Ae.setXAxis(xe.getBottomAxis(Me._jsGraphIndex)):(se.warn('No x axis found. Setting automatically'),Ae.setXAxis(xe.getXAxis(0))),Me=ce.axis[fe.yAxis],Me&&('left'===Me.type||'right'===Me.type)?'left'==Me.type?Ae.setYAxis(xe.getLeftAxis(Me._jsGraphIndex)):'right'==Me.type&&Ae.setYAxis(xe.getRightAxis(Me._jsGraphIndex)):(se.warn('No y axis found. Setting automatically'),Ae.setYAxis(xe.getYAxis(0)))):(se.warn('No axes found. Setting automatically'),Ae.autoAxis()),be){case de.SERIE_BOX:Ae.setData(fe.boxes);break;default:case de.SERIE_SCATTER:case de.SERIE_LINE:Ae.setData([{x:fe.x,y:fe.y}]);}}),xe.autoscaleAxes(),xe.draw(),xe}exportToSchema(){let ce={};ce.title=this.options.title,ce.width=this.getWidth(),ce.height=this.getHeight();let he=[],xe={x:[],y:[]};['top','bottom','left','right'].map(fe=>{this.axis[fe]&&(he=he.concat(this.axis[fe].map(be=>{return{type:fe,label:be.options.label,unit:be.options.unit,min:be.options.forcedMin,max:be.options.forcedMax,flip:be.options.flipped}})),'top'==fe||'bottom'==fe?xe.x=xe.x.concat(this.axis[fe]):xe.y=xe.y.concat(this.axis[fe]))}),ce.axis=he;let me=fe=>{switch(fe){case de.SERIE_LINE:return'line';break;case de.SERIE_BAR:return'bar';break;case de.SERIE_SCATTER:return'scatter';}},ye=(fe,be)=>{let Ae=[];switch(fe.getType()){case de.SERIE_LINE:for(var ke=0;ke<fe.data.length;ke++)for(var Me=0;Me<fe.data[ke].length-1;Me+=2)Ae.push(fe.data[ke][Me+(be&&fe.isFlipped()||!be&&!fe.isFlipped()?1:0)]);break;case de.SERIE_SCATTER:for(var Me=0;Me<fe.data.length-1;Me+=2)Ae.push(fe.data[ke+(be&&fe.isFlipped()||!be&&!fe.isFlipped()?1:0)]);}return Ae};return ce.data=[].concat(this.series.map(fe=>{let be=[],Ae=[];if(fe.getType()==de.SERIE_LINE)for(var ke in fe.styles){Ae.push({styleName:ke,color:fe.styles[ke].lineColor,lineWidth:fe.styles[ke].lineWidth,lineStyle:fe.styles[ke].lineStyle});let Me={styleName:ke,styles:[]};be.push(Me),Me.styles=Me.styles.concat((fe.styles[ke].markers||[]).map(_e=>{return{shape:_e.type,zoom:_e.zoom,lineWidth:_e.strokeWidth,lineColor:_e.strokeColor,color:_e.fillColor,points:_e.points}}))}return{label:fe.getLabel(),id:fe.getName(),type:me(fe.getType()),x:ye(fe,!0),y:ye(fe,!1),xAxis:xe.x.indexOf(fe.getXAxis()),yAxis:xe.y.indexOf(fe.getYAxis()),style:be,lineStyle:Ae}})),ce}static registerConstructor(ce,he){return le.has(ce)?se.throwError('Constructor '+he+' already exists.'):void le.set(ce,he)}static getConstructor(ce,he){return le.has(ce)?le.get(ce):!he&&se.throwError('Constructor "'+ce+'" doesn\'t exist')}}de.prototype.getConstructor=de.getConstructor;;;var pe=function(ce,he,xe,me,ye,fe,be){var Ae=!1;Array.isArray(he)||(he=[he]);var ke=[];if(ye||(Ae=!0,ye=U(ce)),he.map(function(_e){var Se=_e.serie.handleMouseMove(be,!1);return Se&&fe?void(0<_e.withinPx&&1e-14<Math.abs(xe-ce.options.paddingLeft-_e.serie.getXAxis().getPx(_e.serie.getData()[0][2*Se.xIndexClosest]))-_e.withinPx||0<_e.withinVal&&Math.abs(_e.serie.getXAxis().getVal(xe-ce.options.paddingLeft)-_e.serie.getData()[0][2*Se.xIndexClosest])-_e.withinVal>_e.serie.getXAxis().getVal(xe-ce.options.paddingLeft)/100000?_e.serie.trackingShape&&_e.serie.trackingShape.hide():(ke[_e.serie.getName()]={xIndex:Se.xIndexClosest,yValue:_e.serie.getData()[0][2*Se.xIndexClosest+1],xValue:_e.serie.getData()[0][2*Se.xIndexClosest],serie:_e,index:Se},!_e.serie.trackingShape&&(_e.serie.trackingShape=ce.newShape('ellipse',{fillColor:_e.serie.getLineColor(),strokeColor:'White',strokeWidth:_e.serie.getLineWidth()}).setSerie(_e.serie).setProp('rx',3*_e.serie.getLineWidth()).setProp('ry',3*_e.serie.getLineWidth()).forceParentDom(_e.serie.groupMain).draw()),_e.serie.trackingShape.show(),_e.serie.trackingShape.getPosition(0).x=_e.serie.getData()[0][2*Se.xIndexClosest],_e.serie.trackingShape.redraw())):(_e.serie.trackingShape&&_e.serie.trackingShape.hide(),ye)}),0==Object.keys(ke).length||!fe)ye.style.display='none';else{'none'==ye.style.display||Ae?ue(ce,ye,xe,me,!0):ge(ce,ye,xe,me),ye.style.display='block';var Me=fe(ke,be,xe,me);ye.innerHTML=Me}return ye},ue=function(ce,he,xe,me,ye){function fe(){var _e=(Date.now()-be)/200;1<_e&&(_e=1),he.style.marginLeft=(xe-ke)*_e+ke+'px',he.style.marginTop=(me-Me)*_e+Me+'px',1>_e&&window.requestAnimationFrame(fe)}var be=Date.now(),Ae=he.offsetHeight,ke=parseInt(he.style.marginLeft.replace('px','')||0),Me=parseInt(he.style.marginTop.replace('px','')||0);return xe=xe>ce.getWidth()/2?xe-xe%10-20-he.offsetWidth:xe-xe%10+30,me=me-me%10+Ae/2,ye?(he.style.marginLeft=xe+'px',void(he.style.marginTop=me+'px')):void window.requestAnimationFrame(fe)},ge=se.debounce(ue,50);de.SERIE_LINE=Symbol(),de.SERIE_SCATTER=Symbol(),de.SERIE_CONTOUR=Symbol(),de.SERIE_BAR=Symbol(),de.SERIE_BOX=Symbol(),de.SERIE_ZONE=Symbol(),de.SERIE_LINE_COLORED=Symbol(),de.SERIE_ZONE=Symbol(),de.SERIE_DENSITYMAP=Symbol(),de.TICKS_OUTSIDE=Symbol(),de.TICKS_INSIDE=Symbol(),de.TICKS_CENTERED=Symbol(),E.default=de})},function(u,A){var S,P,C;(function(T,E){P=[A],S=E,C='function'==typeof S?S.apply(A,P):S,!(C!==void 0&&(u.exports=C));var Y})(this,function(T){'use strict';function E(I){return I&&I.indexOf&&-1<I.indexOf('px')&&parseInt(I.replace('px',''))}function Y(I){return!isNaN(parseFloat(I))&&isFinite(I)}Object.defineProperty(T,'__esModule',{value:!0});;class X{constructor(I,N,F,O){'object'==typeof I?(this.x=I.x,this.y=I.y,this.dx=I.dx,this.dy=I.dy):(this.x=I,this.y=N,this.dx=F,this.dy=O)}compute(I,N,F,O){if(I&&N&&F&&I.hasXAxis&&I.hasYAxis||I.throw(),!I.hasXAxis(N))throw'Graph does not contain the x axis that was used as a parameter';if(!I.hasYAxis(F))throw'Graph does not contain the x axis that was used as a parameter';return this._compute(I,N,F,O)}_compute(I,N,F,O){var V=this._relativeTo;if(V)var B=V._compute(I,N,F,O);var R={x:!1,y:!1},W;for(var G in N||(N=I.getXAxis()),F||(F=I.getYAxis()),R){var U='x'==G?N:F,Z=this[G],Q=this['d'+G];if(void 0!==Z||(void 0===Q||void 0!==V)&&void 0!==V)void 0!==Z&&(R[G]=this.getPx(Z,U));else if('x'==G){if(void 0===Q)continue;R[G]=V?V[G]:U.getPos(0)}else if(this.x&&O)if(!1!==E(this.x))console.warn('You have defined x in px and not y. Makes no sense. Returning 0 for y'),R[G]=0;else{var K=O.searchClosestValue(this.x);K?R[G]=O.getY(K.yMin):(console.warn('Could not find y position for x = '+this.x+' on serie "'+O.getName()+'". Returning 0 for y.'),R[G]=0)}if(void 0!==Q){var J=void 0!==Z||void 0==B||void 0==B[G]?R[G]:B[G];if('y'==G&&B&&void 0!==B.x&&void 0==B.y){if(!O)throw'Error. No serie exists. Cannot find y value';var K=O.searchClosestValue(V.x);K&&(J=O.getY(K.yMin))}!1===(W=E(Q))?(W=this._parsePercent(Q))?R[G]=J+this._getPositionPx(W,!0,U,I):U&&(R[G]=J+U.getRelPx(Q)):R[G]=J+W}}return R}_getPositionPx(I,N,F,O){var V;if(!1!==(V=E(I)))return V;return!1===(V=this._parsePercent(I))?F?F.getPos(I):void 0:V/100*(N?O.getDrawingWidth():O.getDrawingHeight())}_parsePercent(I){return I&&I.indexOf&&-1<I.indexOf('%')&&I}getDeltaPx(I,N){var F;return!1===(F=E(I))?N.getRelPx(I)+'px':F+'px'}deltaPosition(I,N,F){I='y'==I?'y':'x';var O=this[I],V=this['d'+I],B,W;if(O!==void 0)!1===(B=E(O))?(O=this.getValPosition(O,F),this[I]=!1===(W=E(N))?O+N:O+F.getRelVal(W)):!1===(W=E(N))?this[I]=B+F.getRelPx(N)+'px':this[I]=B+W+'px';else if(V!==void 0){if('y'==I&&O===void 0&&!this._relativeTo)return;!1===(B=E(V))?(V=this.getValPosition(V,F),this['d'+I]=!1===(W=E(N))?V+N:V+F.getRelVal(W)):!1===(W=E(N))?this['d'+I]=B+F.getRelPx(N)+'px':this['d'+I]=B+W+'px'}}getValPosition(I,N){return'max'==I?N.getMaxValue():'min'==I?N.getMinValue():I}getPx(I,N,F){var O;if('function'==typeof I)return I(N,F);if(!1!==(O=E(I)))return O;if(O=this._parsePercent(I))return O;if(N){if('min'==I)return N.getMinPx();if('max'==I)return N.getMaxPx();if(F)return N.getRelPx(I);if(Y(I))return N.getPos(I)}}getPxRel(I,N){return this.getPx(I,N,!0)}relativeTo(I){return this._relativeTo=X.check(I),this}static check(I,N){if(I instanceof X)return I;var F=new X(I);if(I&&I.relativeTo){var O;(O=N(I.relativeTo))&&F.relativeTo(O)}return F}}T.default=X})},function(u,A){var S,P,C;(function(T,E){P=[A],S=E,C='function'==typeof S?S.apply(A,P):S,!(C!==void 0&&(u.exports=C));var Y})(this,function(T){'use strict';function E(B,W,R){return 0>R&&(R+=1),1<R&&(R-=1),R<1/6?B+6*(W-B)*R:R<1/2?W:R<2/3?B+6*((W-B)*(2/3-R)):B}function Y(B,W){return B._savedAttributes&&B._savedAttributes[W]!==void 0}function X(B,W){if(B&&B._savedAttributesIds){B._savedAttributesIds.splice(B._savedAttributesIds.indexOf(W),1),delete B._attributes[W];var R={};for(var G in B._savedAttributes)R[G]=B._savedAttributes[G];;for(var G=0,U=B._savedAttributesIds.length;G<U;G++)for(var Z in B._attributes[B._savedAttributesIds[G]])R[Z]=B._attributes[B._savedAttributesIds[G]][Z];for(var Z in R)B.setAttribute(Z,R[Z])}}function I(){var B,W,R,G,U,Z,Q=arguments[0],K=1,J=arguments.length,$=!1;for('boolean'==typeof Q?($=Q,Q=arguments[1]||{},K=2):('object'!=typeof Q&&'function'!=typeof Q||null==Q)&&(Q={});K<J;++K)if(B=arguments[K],null!=B)for(W in B)R=Q[W],G=B[W],Q!==G&&($&&G&&(V(G)||(U=O(G)))?(U?(U=!1,Z=R&&O(R)?R:[]):Z=R&&V(R)?R:{},Q[W]=I($,Z,G)):'undefined'!=typeof G&&(Q[W]=G));return Q}Object.defineProperty(T,'__esModule',{value:!0}),T.setAttributeTo=function(W,R,G){if(G)for(var U in R)W.setAttributeNS(G,U,R[U]);else for(U in R)W.setAttribute(U,R[U])},T.mapEventEmission=function(W,R){R||(R=this);var G;for(var U in W)0==U.indexOf('on')&&'function'==typeof W[U]&&(G=U.substring(2),G=G.substring(0,1).toLowerCase()+G.substring(1),R.on&&function(Z){R.on(G,function(){W[Z].apply(R,arguments)})}(U))},T.guid=function(){return'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(W){var R=0|16*Math.random(),G='x'==W?R:8|3&R;return G.toString(16)})},T.throwError=function(W){console.error(W)},T.warn=function(W){console.warn(W)},T.isNumeric=function(W){return!Array.isArray(W)&&0<=W-parseFloat(W)+1},T.hue2rgb=E,T.hslToRgb=function(W,R,G){var U,Z,Q;if(0==R)U=Z=Q=G;else{var K=0.5>G?G*(1+R):G+R-G*R,J=2*G-K;U=E(J,K,W+1/3),Z=E(J,K,W),Q=E(J,K,W-1/3)}return[Math.round(255*U),Math.round(255*Z),Math.round(255*Q)]},T.saveDomAttributes=function(W,R,G){if(W)for(var U in W._savedAttributesIds=W._savedAttributesIds||[],-1<W._savedAttributesIds.indexOf(G)&&X(W,G),W._savedAttributes=W._savedAttributes||{},W._attributes=W._attributes||{},W._attributes[G]=R,W._savedAttributesIds.push(G),R)W._savedAttributes[U]||(W._savedAttributes[U]=W.getAttribute(U)),W.setAttribute(U,R[U])},T.hasSavedAttribute=Y,T.overwriteDomAttribute=function(W,R,G){Y(W,R)&&(W._savedAttributes[R]=G)},T.restoreDomAttributes=X,T.debounce=function(W,R,G){var U;return function(){var Z=this,Q=arguments,K=G&&!U;clearTimeout(U),U=setTimeout(function(){U=null,G||W.apply(Z,Q)},R),K&&W.apply(Z,Q)}},T.SVGParser=function(W){var R=new DOMParser,G=R.parseFromString(W,'image/svg+xml');return G},T.reverseArray=function(W){var R=null,G=null,U=W.length;for(R=0,G=U-1;R<G;R+=1,G-=1){var Z=W[R];W[R]=W[G],W[G]=Z}return W},T.getOffset=function(W){var R=W.getBoundingClientRect();return{top:R.top+document.body.scrollTop,left:R.left+document.body.scrollLeft}},T.setCSS=function(W,R){var G=W.style;for(var U in R)G[U]=R[U]},T.ajaxGet=function(W){return new Promise(function(R,G){var U=new XMLHttpRequest;U.open(W.type||'GET',W.url,!0),W.json&&U.setRequestHeader('Accept','application/json'),U.onload=function(){if(200===U.status){var Z=U.responseText;W.json&&(Z=JSON.parse(Z)),R(Z)}else G(new Error('Request error: '+U.status))},U.onerror=function(){G(new Error('Network error: '+U.status))},U.send()})},T.extend=I,T.mix=function(W,R){for(let G in R)R.hasOwnProperty(G)&&(W.prototype[G]=R[G])},T.emptyDom=function(W){for(;W.firstChild;)W.removeChild(W.firstChild)};;;;;;;;;;;;;;;;;var N=Object.prototype.hasOwnProperty,F=Object.prototype.toString,O=function(W){return'function'==typeof Array.isArray?Array.isArray(W):'[object Array]'===F.call(W)},V=function(W){if(!W||'[object Object]'!==F.call(W))return!1;var R=N.call(W,'constructor'),G=W.constructor&&W.constructor.prototype&&N.call(W.constructor.prototype,'isPrototypeOf');if(W.constructor&&!R&&!G)return!1;for(var U in W);return'undefined'==typeof U||N.call(W,U)};;T.isArray=O,T.isPlainObject=V})},function(u,A){var S,P,C,P,C;(function(T,E){P=[],S=E,C='function'==typeof S?S.apply(A,P):S,!(C!==void 0&&(u.exports=C))})(this,function(){'use strict';P=[],C=function(){'use strict';function T(){}function E(I,N){for(var F=I.length;F--;)if(I[F].listener===N)return F;return-1}function Y(I){return function(){return this[I].apply(this,arguments)}}var X=T.prototype;return X.getListeners=function(N){var F=this._getEvents(),O;if(N instanceof RegExp)for(var V in O={},F)F.hasOwnProperty(V)&&N.test(V)&&(O[V]=F[V]);else O=F[N]||(F[N]=[]);return O},X.flattenListeners=function(N){var F=[],O;for(O=0;O<N.length;O+=1)F.push(N[O].listener);return F},X.getListenersAsObject=function(N){var F=this.getListeners(N),O;return F instanceof Array&&(O={},O[N]=F),O||F},X.addListener=function(N,F){var O=this.getListenersAsObject(N);for(var V in O)O.hasOwnProperty(V)&&-1===E(O[V],F)&&O[V].push('object'==typeof F?F:{listener:F,once:!1});return this},X.on=Y('addListener'),X.addOnceListener=function(N,F){return this.addListener(N,{listener:F,once:!0})},X.once=Y('addOnceListener'),X.defineEvent=function(N){return this.getListeners(N),this},X.defineEvents=function(N){for(var F=0;F<N.length;F+=1)this.defineEvent(N[F]);return this},X.removeListener=function(N,F){var O=this.getListenersAsObject(N),V;for(var B in O)O.hasOwnProperty(B)&&(V=E(O[B],F),-1!==V&&O[B].splice(V,1));return this},X.off=Y('removeListener'),X.addListeners=function(N,F){return this.manipulateListeners(!1,N,F)},X.removeListeners=function(N,F){return this.manipulateListeners(!0,N,F)},X.manipulateListeners=function(N,F,O){var W=N?this.removeListener:this.addListener,R=N?this.removeListeners:this.addListeners,B;if('object'==typeof F&&!(F instanceof RegExp))for(var V in F)F.hasOwnProperty(V)&&(B=F[V])&&('function'==typeof B?W.call(this,V,B):R.call(this,V,B));else for(V=O.length;V--;)W.call(this,F,O[V]);return this},X.removeEvent=function(N){var F=this._getEvents();if('string'==typeof N)delete F[N];else if(N instanceof RegExp)for(var O in F)F.hasOwnProperty(O)&&N.test(O)&&delete F[O];else delete this._events;return this},X.removeAllListeners=Y('removeEvent'),X.emitEvent=function(N,F){var O=this.getListenersAsObject(N),V,B,R;for(var W in O)if(O.hasOwnProperty(W))for(B=O[W].length;B--;)V=O[W][B],!0===V.once&&this.removeListener(N,V.listener),R=V.listener.apply(this,F||[]),R===this._getOnceReturnValue()&&this.removeListener(N,V.listener);return this},X.trigger=Y('emitEvent'),X.emit=function(N){var F=Array.prototype.slice.call(arguments,1);return this.emitEvent(N,F)},X.setOnceReturnValue=function(N){return this._onceReturnValue=N,this},X._getOnceReturnValue=function(){return!this.hasOwnProperty('_onceReturnValue')||this._onceReturnValue},X._getEvents=function(){return this._events||(this._events={})},T}.apply(A,P),!(C!==void 0&&(u.exports=C))})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(2),S(3)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var X})(this,function(E,Y,X){'use strict';function I(B){try{return B.getBBox()}catch(W){return{height:0,width:0,x:0,y:0}}}Object.defineProperty(E,'__esModule',{value:!0});var N=function(W){return W&&W.__esModule?W:{default:W}}(Y),F=function(W){if(W&&W.__esModule)return W;var R={};if(null!=W)for(var G in W)Object.prototype.hasOwnProperty.call(W,G)&&(R[G]=W[G]);return R.default=W,R}(X),O={backgroundColor:'rgba(255, 255, 255, 0.8)',frame:!0,frameWidth:1,frameColor:'black',paddingTop:10,paddingLeft:10,paddingBottom:10,paddingRight:10,frameRounding:0,movable:!1,shapesToggleable:!0,isSerieHideable:!0,isSerieSelectable:!0};class V{constructor(B,W){this.options=F.extend({},O,W),this.graph=B,this.svg=document.createElementNS(this.graph.ns,'g'),this.subG=document.createElementNS(this.graph.ns,'g'),this.groups=[],this.rect=document.createElementNS(this.graph.ns,'rect'),this.rectBottom=document.createElementNS(this.graph.ns,'rect'),this.rect.setAttribute('x',0),this.rect.setAttribute('y',0),this.rectBottom.setAttribute('x',0),this.rectBottom.setAttribute('y',0),this.series=!1,this.svg.setAttribute('display','none'),this.pos={x:void 0,y:void 0,transformX:0,transformY:0},this.setEvents(),this.eyeId=F.guid(),this.eyeCrossedId=F.guid();var R=F.SVGParser('<svg xmlns="http://www.w3.org/2000/svg"><symbol id="'+this.eyeCrossedId+'" viewBox="0 -256 1850 1850"><rect pointer-events="fill" fill="transparent" x="-256" y="0" width="2106" height="1850" /><g transform="matrix(1,0,0,-1,30.372881,1214.339)"><path d="m 555,201 78,141 q -87,63 -136,159 -49,96 -49,203 0,121 61,225 Q 280,812 128,576 295,318 555,201 z m 389,759 q 0,20 -14,34 -14,14 -34,14 -125,0 -214.5,-89.5 Q 592,829 592,704 q 0,-20 14,-34 14,-14 34,-14 20,0 34,14 14,14 14,34 0,86 61,147 61,61 147,61 20,0 34,14 14,14 14,34 z m 363,191 q 0,-7 -1,-9 Q 1201,954 991,576 781,198 675,9 l -49,-89 q -10,-16 -28,-16 -12,0 -134,70 -16,10 -16,28 0,12 44,87 Q 349,154 228.5,262 108,370 20,507 0,538 0,576 q 0,38 20,69 153,235 380,371 227,136 496,136 89,0 180,-17 l 54,97 q 10,16 28,16 5,0 18,-6 13,-6 31,-15.5 18,-9.5 33,-18.5 15,-9 31.5,-18.5 16.5,-9.5 19.5,-11.5 16,-10 16,-27 z m 37,-447 Q 1344,565 1265,450.5 1186,336 1056,286 l 280,502 q 8,-45 8,-84 z m 448,-128 q 0,-35 -20,-69 Q 1733,443 1663,362 1513,190 1315.5,95 1118,0 896,0 l 74,132 q 212,18 392.5,137 180.5,119 301.5,307 -115,179 -282,294 l 63,112 q 95,-64 182.5,-153 87.5,-89 144.5,-184 20,-34 20,-69 z" fill="#c0c0c0"></path></g></symbol></svg>'),G=F.SVGParser('<svg xmlns="http://www.w3.org/2000/svg"><symbol id="'+this.eyeId+'" viewBox="0 -256 1850 1850"><rect pointer-events="fill" x="-256" y="0" fill="transparent" width="2106" height="1850" /><g transform="matrix(1,0,0,-1,30.372881,1259.8983)"><path d="m 1664,576 q -152,236 -381,353 61,-104 61,-225 0,-185 -131.5,-316.5 Q 1081,256 896,256 711,256 579.5,387.5 448,519 448,704 448,825 509,929 280,812 128,576 261,371 461.5,249.5 662,128 896,128 1130,128 1330.5,249.5 1531,371 1664,576 z M 944,960 q 0,20 -14,34 -14,14 -34,14 -125,0 -214.5,-89.5 Q 592,829 592,704 q 0,-20 14,-34 14,-14 34,-14 20,0 34,14 14,14 14,34 0,86 61,147 61,61 147,61 20,0 34,14 14,14 14,34 z m 848,-384 q 0,-34 -20,-69 Q 1632,277 1395.5,138.5 1159,0 896,0 633,0 396.5,139 160,278 20,507 0,542 0,576 q 0,34 20,69 140,229 376.5,368 236.5,139 499.5,139 263,0 499.5,-139 236.5,-139 376.5,-368 20,-35 20,-69 z" fill="#444444" /></g></symbol></svg>');this.svg.appendChild(document.adoptNode(G.documentElement.firstChild)),this.svg.appendChild(document.adoptNode(R.documentElement.firstChild)),this.svg.appendChild(this.subG),this.applyStyle()}setPosition(B,W,R){B&&(this.position=B,this.alignToX=W||'left',this.alignToY=R||'top')}setDraggable(B){this.options.movable=B}setAutoPosition(B){return-1<['bottom','left','top','right'].indexOf(B=B.toLowerCase())?(this.autoPosition=B,this):void(this.requireDelayedUpdate(),this.autoPosition=!1)}autoPosition(){return this.setAutoPosition(...arguments)}buildLegendBox(){var B=this.series||this.graph.getSeries(),W=0,R=this.options.paddingTop;this.autoPosition?this.graph.getDom().appendChild(this.getDom()):this.graph.graphingZone.appendChild(this.getDom());for(var G=0,U=B.length;G<U;G++)if(!B[G].excludedFromLegend||this.series){if('bottom'==this.autoPosition||'top'==this.autoPosition){var Z=I(this.groups[G]);W+Z.width>this.graph.getDrawingWidth()-this.options.paddingRight&&(R+=16,W=0)}this.groups[G].setAttribute('transform','translate( '+W+', '+R+')'),'bottom'==this.autoPosition||'top'==this.autoPosition?(W+=Z.width+10,R+=0):(W=0,R+=16)}var Z=I(this.subG);switch(this.width=Z.width+this.options.paddingRight+this.options.paddingLeft,this.height=Z.height+this.options.paddingBottom+this.options.paddingTop,this.rect.setAttribute('width',this.width),this.rect.setAttribute('height',this.height),this.rect.setAttribute('fill','none'),this.rect.setAttribute('pointer-events','fill'),this.rect.setAttribute('display','none'),this.options.movable&&(this.rectBottom.style.cursor='move'),this.rectBottom.setAttribute('width',this.width),this.rectBottom.setAttribute('height',this.height),this.rectBottom.setAttribute('x',Z.x-this.options.paddingLeft),this.rectBottom.setAttribute('y',Z.y-this.options.paddingTop),this.position=this.position||{},this.autoPosition){case'bottom':this.position.y=this.graph.getHeight()+'px',this.position.x=(this.graph.getWidth()-this.width)/2+'px',this.alignToY='bottom',this.alignToX=!1;break;case'left':this.position.x='6px',this.position.y=(this.graph.getHeight()-this.height)/2+'px',this.alignToX='left',this.alignToY=!1;break;case'right':this.position.x=this.graph.getWidth()+'px',this.position.y=(this.graph.getHeight()-this.height)/2+'px',this.alignToX='right',this.alignToY=!1;break;case'top':this.position.x=(this.graph.getWidth()-this.width)/2+'px',this.position.y='10px',this.alignToY='top',this.alignToX=!1;}if(this.autoPosition){switch(this.autoPosition){case'bottom':this.graph.options.paddingBottom=this.height+10;break;case'left':this.graph.options.paddingLeft=this.width+5;break;case'right':this.graph.options.paddingRight=this.width+10;break;case'top':this.graph.options.paddingTop=this.height+14;}this.graph.updateGraphingZone(),this.graph.getDrawingHeight(),this.graph.getDrawingWidth()}this.bbox=Z}calculatePosition(){var B=N.default.check(this.position);let W=B.compute(this.graph,this.graph.getXAxis(),this.graph.getYAxis());W&&('right'==this.alignToX&&(W.x-=this.width,W.x+=this.bbox.x),'bottom'==this.alignToY?(W.y-=this.height,W.y+=this.bbox.y):W.y+=this.bbox.y,this.pos.transformX=W.x,this.pos.transformY=W.y,this._setPosition())}update(B){if(!(this.graph.isDelayedUpdate()||!this._requiredUpdate&&B)){this._requiredUpdate=!1;var W=this;for(this.applyStyle();this.subG.hasChildNodes();)this.subG.removeChild(this.subG.lastChild);this.svg.insertBefore(this.rectBottom,this.svg.firstChild);var R=this.series||this.graph.getSeries();if(0<R.length)this.svg.setAttribute('display','block');else return;('bottom'==this.autoPosition||'top'==this.autoPosition)&&this.graph.getDrawingWidth();for(var G=0,U=R.length;G<U;G++)(!R[G].excludedFromLegend||this.series)&&function(Z){var Q,K,J;('bottom'==this.autoPosition||'top'==this.autoPosition)&&this.graph.getDrawingWidth(),Q=document.createElementNS(W.graph.ns,'g');var $=document.createElementNS(W.graph.ns,'rect');W.subG.appendChild(Q),Q.appendChild($);var K=R[Z].getSymbolForLegend(),ee=R[Z].getMarkerForLegend(),J=R[Z].getTextForLegend(),te=35;if(this.isHideable()){te+=20;var ie=document.createElementNS(W.graph.ns,'use');ie.setAttributeNS('http://www.w3.org/1999/xlink','xlink:href','#'+this.eyeId),ie.setAttribute('width',15),ie.setAttribute('height',15),ie.setAttribute('x',35),ie.setAttribute('y',-8),ie.addEventListener('click',function(ae){ae.stopPropagation();var se;R[Z].isShown()?(R[Z].hide(),se=W.eyeCrossedId):(R[Z].show(),se=W.eyeId),ie.setAttributeNS('http://www.w3.org/1999/xlink','xlink:href','#'+se)})}J.setAttribute('transform','translate('+te+', 3)'),K&&Q.appendChild(K),'scatter'==R[Z].getType()&&K.setAttribute('transform','translate( 20, 0 )'),ee&&Q.appendChild(ee),ie&&Q.appendChild(ie),Q.appendChild(J);var re=I(Q);$.setAttribute('x',re.x),$.setAttribute('y',re.y),$.setAttribute('width',re.width),$.setAttribute('height',re.height),$.setAttribute('fill','none'),$.setAttribute('pointer-events','fill'),W.groups[Z]=Q,Q.addEventListener('click',function(ae){var se=R[Z];W.isSelectable()&&!se.isSelected()?W.graph.selectSerie(se):W.graph.unselectSerie(se),ae.preventDefault(),ae.stopPropagation()})}.call(this,G);this.svg.appendChild(this.rect),this.buildLegendBox(),this.calculatePosition()}}isHideable(){return this.options.isSerieHideable}notHideable(){return this.options.isSerieHideable=!1,this}hideable(){return this.options.isSerieHideable=!0,this}set seriesHideable(B){this.options.isSerieHideable=!!B}get seriesHideable(){return this.options.isSerieHideable}isSelectable(){return this.options.isSerieSelectable}isToggleShapes(){return this.options.shapesToggleable}getDom(){return this.svg}setEvents(){var B=this,W=this.pos;this.svg.addEventListener('mousedown',function(R){R.stopPropagation(),console.log('down'),B.options.movable&&(W.x=R.clientX,W.y=R.clientY,R.preventDefault(),B.mousedown=!0,B.graph.elementMoving(B),B.rect.setAttribute('display','block'))}),this.svg.addEventListener('click',function(R){R.stopPropagation()}),this.svg.addEventListener('dblclick',function(R){R.stopPropagation()}),this.svg.addEventListener('mousemove',function(R){B.handleMouseMove(R)})}handleMouseUp(B){B.stopPropagation(),B.preventDefault(),this.mousedown=!1,this.rect.setAttribute('display','none'),this.graph.elementMoving(!1)}handleMouseMove(B){if(this.mousedown){var W=this.pos,R=B.clientX-W.x,G=B.clientY-W.y;W.transformX+=R,W.transformY+=G,W.x=B.clientX,W.y=B.clientY,B.stopPropagation(),B.preventDefault(),this._setPosition()}}_setPosition(){var B=this.pos;isNaN(B.transformX)||isNaN(B.transformY)||!1===B.transformX||!1===B.transformY||this.svg.setAttribute('transform','translate('+B.transformX+', '+B.transformY+')')}applyStyle(){this.options.frame&&(this.rectBottom.setAttribute('stroke',this.options.frameColor),this.rectBottom.setAttribute('stroke-width',this.options.frameWidth+'px'),this.rectBottom.setAttribute('rx',this.options.frameRounding),this.rectBottom.setAttribute('ry',this.options.frameRounding)),this.rectBottom.setAttribute('fill',this.options.backgroundColor)}fixSeries(){var B=[];if(!1===arguments[0])return this.series=!1,void this.update();for(var W=0,R=arguments.length;W<R;W++)Array.isArray(arguments[W])?B=B.concat(arguments[W]):B.push(arguments[W]);this.update(),this.series=B}fixSeriesAdd(B){this.series=this.series||[],this.series.push(B)}requireDelayedUpdate(){this._requiredUpdate=!0}}E.default=V})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(7)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var X})(this,function(E,Y){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var X=function(F){return F&&F.__esModule?F:{default:F}}(Y);class I extends X.default{constructor(N,F,O={}){super(N,F,O),this.top='top'==F}getAxisPosition(){if(!this.options.display)return 0;var N=(1==this.options.tickPosition?8:20)+1*this.graph.options.fontSize;return this.getLabel()&&(N+=this.graph.options.fontSize),N}isX(){return!0}isY(){return!1}setShift(N){this.shift=N;void 0!==this.getShift()&&this.graph.getDrawingHeight()&&this.group.setAttribute('transform','translate(0 '+(this.floating?this.getShift():this.top?this.shift:this.graph.getDrawingHeight()-this.shift)+')')}getMaxSizeTick(){return(this.top?-1:1)*(1==this.options.tickPosition?10:10)}drawTick(N,F,O,V){var B=this,W;if(W=V||this.getPos(N),!(void 0==W||isNaN(W))){var R=this.nextTick(F,function(U){U.setAttribute('y1',(B.top?1:-1)*B.tickPx1*B.tickScaling[F]),U.setAttribute('y2',(B.top?1:-1)*B.tickPx2*B.tickScaling[F]),1==F?U.setAttribute('stroke',B.getPrimaryTicksColor()):U.setAttribute('stroke',B.getSecondaryTicksColor())});if(R.setAttribute('x1',W),R.setAttribute('x2',W),this.nextGridLine(1==F,W,W,0,this.graph.getDrawingHeight()),1==F){var G=this.nextTickLabel(function(U){U.setAttribute('y',(B.top?-1:1)*((1==B.options.tickPosition?8:20)+(B.top?10:0))),U.setAttribute('text-anchor','middle'),'black'!==B.getTicksLabelColor()&&U.setAttribute('fill',B.getTicksLabelColor()),U.style.dominantBaseline='hanging'});G.setAttribute('x',W),this.setTickContent(G,N,O)}return[R,G]}}drawLabel(){this.label.setAttribute('text-anchor','middle'),this.label.setAttribute('x',Math.abs(this.getMaxPx()+this.getMinPx())/2),this.label.setAttribute('y',(this.top?-1:1)*((1==this.options.tickPosition?10:25)+this.graph.options.fontSize)),this.labelTspan.textContent=this.getLabel()}draw(){var N=super.draw(...arguments);return this.drawSpecifics(),N}drawSpecifics(){this.drawLabel(),this.line.setAttribute('x1',this.getMinPx()),this.line.setAttribute('x2',this.getMaxPx()),this.line.setAttribute('y1',0),this.line.setAttribute('y2',0),this.line.setAttribute('stroke',this.getAxisColor()),this.top||(this.labelTspan.style.dominantBaseline='hanging',this.expTspan.style.dominantBaseline='hanging',this.expTspanExp.style.dominantBaseline='hanging',this.unitTspan.style.dominantBaseline='hanging',this.preunitTspan.style.dominantBaseline='hanging');var N=this.getSpan();this.line.setAttribute('marker-start',this.options.splitMarks&&0!=N[0]?'url(#horionzalsplit_'+this.graph.getId()+')':''),this.line.setAttribute('marker-end',this.options.splitMarks&&1!=N[1]?'url(#horionzalsplit_'+this.graph.getId()+')':'')}_draw0Line(N){this._0line||(this._0line=document.createElementNS(this.graph.ns,'line')),this._0line.setAttribute('x1',N),this._0line.setAttribute('x2',N),this._0line.setAttribute('y1',0),this._0line.setAttribute('y2',this.getMaxPx()),this._0line.setAttribute('stroke','black'),this.groupGrids.appendChild(this._0line)}handleMouseMoveLocal(N){N-=this.graph.getPaddingLeft(),this.mouseVal=this.getVal(N)}setMinMaxFlipped(){var N=this.maxPx-this.minPx;if(!isNaN(N)){var F=N*this.options.span[1]+this.minPx-this.options.marginMax,O=N*this.options.span[0]+this.minPx+this.options.marginMin;this.minPxFlipped=this.isFlipped()?F:O,this.maxPxFlipped=this.isFlipped()?O:F}}}E.default=I})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(1),S(4),S(3)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var X})(this,function(E,Y,X,I){'use strict';function N(R){return R&&R.__esModule?R:{default:R}}Object.defineProperty(E,'__esModule',{value:!0});var F=N(Y),O=N(X),V=function(G){if(G&&G.__esModule)return G;var U={};if(null!=G)for(var Z in G)Object.prototype.hasOwnProperty.call(G,Z)&&(U[Z]=G[Z]);return U.default=G,U}(I);const B={lineAt0:!1,display:!0,flipped:!1,axisDataSpacing:{min:0.1,max:0.1},unitModification:!1,primaryGrid:!0,secondaryGrid:!0,primaryGridColor:'#f0f0f0',secondaryGridColor:'#f0f0f0',primaryGridWidth:1,secondaryGridWidth:1,shiftToZero:!1,tickPosition:1,nbTicksPrimary:3,nbTicksSecondary:10,ticklabelratio:1,exponentialFactor:0,exponentialLabelFactor:0,logScale:!1,forcedMin:!1,forcedMax:!1,span:[0,1],marginMin:0,marginMax:0,scientificScale:!1,scientificScaleExponent:!1,engineeringScale:!1,unit:!1,unitWrapperBefore:'',unitWrapperAfter:'',splitMarks:!1};class W extends O.default{constructor(){super()}init(R,G,U){this.unitModificationTimeTicks=[[1,[1,2,5,10,20,30]],[60,[1,2,5,10,20,30]],[3600,[1,2,6,12]],[86400,[1,2,3,4,5,10,20,40]]];var Z=this;this.graph=R,this.options=V.extend(!0,{},B,U,G),this.group=document.createElementNS(this.graph.ns,'g'),this.hasChanged=!0,this.rectEvent=document.createElementNS(this.graph.ns,'rect'),this.rectEvent.setAttribute('pointer-events','fill'),this.rectEvent.setAttribute('fill','transparent'),this.group.appendChild(this.rectEvent),this.graph.axisGroup.appendChild(this.group),this.line=document.createElementNS(this.graph.ns,'line'),this.line.setAttribute('stroke','black'),this.line.setAttribute('shape-rendering','crispEdges'),this.line.setAttribute('stroke-linecap','square'),this.groupTicks=document.createElementNS(this.graph.ns,'g'),this.groupTickLabels=document.createElementNS(this.graph.ns,'g'),this.group.appendChild(this.groupTicks),this.group.appendChild(this.groupTickLabels),this.group.appendChild(this.line),this.labelValue,this.label=document.createElementNS(this.graph.ns,'text'),this.labelTspan=document.createElementNS(this.graph.ns,'tspan'),this.preunitTspan=document.createElementNS(this.graph.ns,'tspan'),this.unitTspan=document.createElementNS(this.graph.ns,'tspan'),this.expTspan=document.createElementNS(this.graph.ns,'tspan'),this.expTspanExp=document.createElementNS(this.graph.ns,'tspan'),this.label.appendChild(this.labelTspan),this.label.appendChild(this.preunitTspan),this.label.appendChild(this.unitTspan),this.label.appendChild(this.expTspan),this.label.appendChild(this.expTspanExp),this.preunitTspan.setAttribute('dx',6),this.expTspan.setAttribute('dx',6),this.expTspanExp.setAttribute('dy',-5),this.expTspanExp.setAttribute('font-size','0.8em'),this.label.setAttribute('text-anchor','middle'),this.setTickPosition(this.options.tickPosition),this.gridLinePath={primary:'',secondary:''},this.gridPrimary=document.createElementNS(this.graph.ns,'path'),this.gridSecondary=document.createElementNS(this.graph.ns,'path'),this.graph.groupPrimaryGrids.appendChild(this.gridPrimary),this.graph.groupSecondaryGrids.appendChild(this.gridSecondary),this.setGridLinesStyle(),this.group.appendChild(this.label),this.groupSeries=document.createElementNS(this.graph.ns,'g'),this.group.appendChild(this.groupSeries),this.widthHeightTick=0,this.ticks={},this.ticksLabels=[],this.tickScaling={'1':3,'2':2,'3':1,'4':0.5},this.currentTick={},this.lastCurrentTick={},this.series=[],this.totalDelta=0,this.currentAction=!1,this.group.addEventListener('mousemove',function(Q){Q.preventDefault();var K=Z.graph._getXY(Q);Z.handleMouseMoveLocal(K.x,K.y,Q);for(var J=0,$=Z.series.length;J<$;J++)Z.series[J].handleMouseMove(!1,!0)}),this.labels=[],this.group.addEventListener('click',function(Q){Q.preventDefault();var K=Z.graph._getXY(Q);Z.addLabel(Z.getVal(K.x-Z.graph.getPaddingLeft()))}),this.axisRand=Math.random(),this.clip=document.createElementNS(this.graph.ns,'clipPath'),this.clip.setAttribute('id','_clip'+this.axisRand),this.graph.defs.appendChild(this.clip),this.clipRect=document.createElementNS(this.graph.ns,'rect'),this.clip.appendChild(this.clipRect),this.clip.setAttribute('clipPathUnits','userSpaceOnUse'),this.graph._axisHasChanged(this)}handleMouseMoveLocal(){}hide(){return this.options.display=!1,this}show(){return this.options.display=!0,this}setDisplay(R){return this.options.display=!!R,this}isDisplayed(){return this.options.display}isShown(){return this.isDisplayed(...arguments)}kill(R,G){this.graph.killAxis(this,R,G)}setLineAt0(R){this.options.lineAt0=!!R}adaptTo(R,G,U,Z){return R?(this.options.adaptTo={axis:R,thisValue:G,foreignValue:U,preference:Z},this.adapt(),this):(this.options.adaptTo=!1,this)}adapt(){if(this.options.adaptTo){if(!R);var R=this.options.adaptTo.axis,G=this.options.adaptTo.thisValue,U=this.options.adaptTo.foreignValue;if((void 0===R.currentAxisMin||void 0===R.currentAxisMax)&&R.setMinMaxToFitSeries(),!1!==this.options.forcedMin&&!1==this.options.forcedMax||'max'!==this.options.adaptTo.preference){this.currentAxisMin=!1===this.options.forcedMin?this._zoomed?this.getCurrentMin():this.getMinValue()-(G-this.getMinValue())*(this.options.axisDataSpacing.min*(R.getCurrentMax()-R.getCurrentMin())/(U-R.getCurrentMin())):this.options.forcedMin,this.currentAxisMin==G&&(this.currentAxisMin-=this.options.axisDataSpacing.min*this.getInterval());var Z=!1===this.options.forcedMin?this.currentAxisMin:this.options.forcedMin;this.currentAxisMax=(G-Z)*(R.getCurrentMax()-R.getCurrentMin())/(U-R.getCurrentMin())+Z}else{this.currentAxisMax=!1===this.options.forcedMax?this._zoomed?this.getCurrentMax():this.getMaxValue()+(this.getMaxValue()-G)*(this.options.axisDataSpacing.max*(R.getCurrentMax()-R.getCurrentMin())/(R.getCurrentMax()-U)):this.options.forcedMax,this.currentAxisMax==G&&(this.currentAxisMax+=this.options.axisDataSpacing.max*this.getInterval());var Z=!1===this.options.forcedMax?this.currentAxisMax:this.options.forcedMax;this.currentAxisMin=(G-Z)*(R.getCurrentMin()-R.getCurrentMax())/(U-R.getCurrentMax())+Z}this.graph._axisHasChanged(this)}}setFloating(R,G){return this.floating=!0,this.floatingAxis=R,this.floatingValue=G,this}getFloatingAxis(){return this.floatingAxis}getFloatingValue(){return this.floatingValue}setAxisDataSpacing(R,G){return this.options.axisDataSpacing.min=R,this.options.axisDataSpacing.max=G||R,this}dataSpacing(){return this.setAxisDataSpacing(...arguments)}setAxisDataSpacingMin(R){this.options.axisDataSpacing.min=R}setAxisDataSpacingMax(R){this.options.axisDataSpacing.max=R}setMinPx(R){this.minPx=R,this.setMinMaxFlipped()}setMaxPx(R){this.maxPx=R,this.setMinMaxFlipped()}getMinPx(){return this.minPxFlipped}getMaxPx(){return this.maxPxFlipped}getMathMaxPx(){return this.maxPx}getMathMinPx(){return this.minPx}getMinValue(){return!1===this.options.forcedMin?this.dataMin:this.options.forcedMin}getMaxValue(){return!1===this.options.forcedMax?this.dataMax:this.options.forcedMax}setMinValueData(R){this.dataMin=R}setMaxValueData(R){this.dataMax=R}forceMin(R,G){return this.options.forcedMin=R,this.setCurrentMin(G?this.getCurrentMin():void 0),this.graph._axisHasChanged(this),this}forceMax(R,G){return this.options.forcedMax=R,this.setCurrentMax(G?this.getCurrentMax():void 0),this.graph._axisHasChanged(this),this}getForcedMin(){return this.options.forcedMin}getForcedMax(){return this.options.forcedMax}forceToAxis(R){return R.getMaxValue&&R.getMinValue&&(this.options.forcedMin=R.getMinValue(),this.options.forcedMax=R.getMaxValue()),this}getNbTicksPrimary(){return this.options.nbTicksPrimary}setNbTicksPrimary(R){this.options.nbTicksPrimary=R}getNbTicksSecondary(){return this.options.nbTicksSecondary}handleMouseMove(R){this.mouseVal=this.getVal(R)}handleMouseWheel(R,G,U){R=Math.min(0.2,Math.max(-0.2,R)),'min'==U?U=this.getMinValue():'max'==U?U=this.getMaxValue():!U&&(U=0),this._doZoomVal((this.getCurrentMax()-U)*(1+R)+U,(this.getCurrentMin()-U)*(1+R)+U),this.graph.draw()}set zoomLock(R){this._zoomLocked=R}get zoomLock(){return this._zoomLocked||!1}zoom(R,G,U){return!U&&this.zoomLock?void 0:this._doZoomVal(R,G,!0)}_doZoomVal(R,G,U){return this._doZoom(this.getPx(R),this.getPx(G),R,G,U)}_doZoom(R,G,U,Z,Q){var U=void 0===U?this.getVal(R):U,Z=void 0===Z?this.getVal(G):Z;return this.setCurrentMin(Math.min(U,Z)),this.setCurrentMax(Math.max(U,Z)),this.cacheCurrentMin(),this.cacheCurrentMax(),this.cacheInterval(),this._zoomed=!0,this.adapt(),this._hasChanged=!0,Q||this.emit('zoom',[this.currentAxisMin,this.currentAxisMax,this]),this}getSerieShift(){return this._serieShift}getSerieScale(){return this._serieScale}getMouseVal(){return this.mouseVal}getUnitPerTick(R,G,U){var Z=R/le;G=G?Math.min(G,R/10):R/10;var Q=U/G;switch(this.options.unitModification){case'time':case'time:min.sec':var K=this.getModifiedValue(this.getMaxValue());3600>K||K<86400;var J=!1;for(var $=0,ee=this.unitModificationTimeTicks.length;$<ee;$++){for(var te=0,ie=this.unitModificationTimeTicks[$][1].length;te<ie;te++)if(Q<this.unitModificationTimeTicks[$][0]*this.unitModificationTimeTicks[$][1][te]){J=!0;break}if(J)break}oe=$===this.unitModificationTimeTicks.length?1:this.unitModificationTimeTicks[$][0]*this.unitModificationTimeTicks[$][1][te];break;default:var re=Math.floor(Math.log(Q)/Math.log(10)),ae=Q*Math.pow(10,-re);this.decimals=-re;var se=[1,2,5,10],ne=!1;for(var $=se.length-1;0<=$;$--)(!ne||Math.abs(se[$]-ae)<Math.abs(ne-ae))&&(ne=se[$]);var oe=ne*Math.pow(10,re);}var le=U/oe,Z=R/G;return[oe,le,Z]}setMinMaxToFitSeries(R){var G=this.getInterval();return this.options.logScale?(this.currentAxisMin=Math.max(1e-50,0.9*this.getMinValue()),this.currentAxisMax=Math.max(1e-50,1.1*this.getMaxValue())):(this.currentAxisMin=this.getMinValue(),this.currentAxisMax=this.getMaxValue(),!1===this.getForcedMin()&&(this.currentAxisMin-=this.options.axisDataSpacing.min*G),!1===this.getForcedMax()&&(this.currentAxisMax+=this.options.axisDataSpacing.max*G)),(isNaN(this.currentAxisMin)||isNaN(this.currentAxisMax))&&(this.currentAxisMax=void 0,this.currentAxisMin=void 0),this.cacheCurrentMin(),this.cacheCurrentMax(),this.cacheInterval(),this._zoomed=!1,this.adapt(),R||this.graph._axisHasChanged(this),this.emit('zoomOutFull',[this.currentAxisMin,this.currentAxisMax,this]),this}getInterval(){return this.getMaxValue()-this.getMinValue()}getCurrentInterval(){return this.cachedInterval}getCurrentMin(){return this.cachedCurrentMin}getCurrentMax(){return this.cachedCurrentMax}cacheCurrentMin(){this.cachedCurrentMin=this.currentAxisMin==this.currentAxisMax?this.options.logScale?this.currentAxisMin/10:this.currentAxisMin-1:this.currentAxisMin}cacheCurrentMax(){this.cachedCurrentMax=this.currentAxisMax==this.currentAxisMin?this.options.logScale?10*this.currentAxisMax:this.currentAxisMax+1:this.currentAxisMax}cacheInterval(){this.cachedInterval=this.cachedCurrentMax-this.cachedCurrentMin}setCurrentMin(R){return(void 0===R||!1!==this.getForcedMin()&&R<this.getForcedMin())&&(R=this.getMinValue()),this.currentAxisMin=R,this.options.logScale&&(this.currentAxisMin=Math.max(1e-50,R)),this.graph._axisHasChanged(this),this}setCurrentMax(R){(R===void 0||!1!==this.getForcedMax()&&R>this.getForcedMax())&&(R=this.getMaxValue()),this.currentAxisMax=R,this.options.logScale&&(this.currentAxisMax=Math.max(1e-50,R)),this.graph._axisHasChanged(this)}flip(R){return this.options.flipped=R,this.setMinMaxFlipped(),this}isFlipped(){return this.options.flipped}_draw(){var R=this;this.cacheCurrentMax(),this.cacheCurrentMin(),this.cacheInterval(),(void 0==this.currentAxisMin||void 0==this.currentAxisMax)&&this.setMinMaxToFitSeries(!0);var G=Math.abs(this.getMaxPx()-this.getMinPx()),U=this.getCurrentInterval();if(!this.options.display)return this.line.setAttribute('display','none'),0;this.line.setAttribute('display','block'),this.scientificExponent=!0==this.options.scientificScale?this.options.scientificScaleExponent?this.options.scientificScaleExponent:Math.floor(Math.log(Math.max(Math.abs(this.getCurrentMax()),Math.abs(this.getCurrentMin())))/Math.log(10)):0,this.gridLinePath.primary='',this.gridLinePath.secondary='',this.writeUnit();var Z;if(this.options.unitDecade&&this.options.unit&&0!==this.scientificExponent&&(this.scientificExponent=this.getEngineeringExponent(this.scientificExponent))&&(Z=this.getExponentGreekLetter(this.scientificExponent))?(this.preunitTspan.innerHTML=Z,this.preunitTspan.setAttribute('display','visible'),this.unitTspan.setAttribute('dx',0)):0===this.scientificExponent||isNaN(this.scientificExponent)?(!this.options.unit&&this.unitTspan.setAttribute('display','none'),this.preunitTspan.setAttribute('display','none'),this.expTspan.setAttribute('display','none'),this.expTspanExp.setAttribute('display','none')):(this.options.engineeringScale&&(this.scientificExponent=this.getEngineeringExponent(this.scientificExponent)),this.preunitTspan.textContent='',this.preunitTspan.setAttribute('display','none'),this.expTspan.setAttribute('display','visible'),this.expTspanExp.setAttribute('display','visible'),this.expTspan.textContent='x10',this.expTspanExp.textContent=this.scientificExponent),!!this.options.hideTicks)var Q=0;else if(this.resetTicksLength(),this.linkedToAxis){this.linkedToAxis.deltaPx=10;var Q=this.drawLinkedToAxisTicksWrapper(G,U)}else if(!this.options.logScale)var Q=this.drawLinearTicksWrapper(G,U);else var Q=this.drawLogTicks();this.removeUselessTicks(),this.removeUselessTickLabels(),this.gridPrimary.setAttribute('d',this.gridLinePath.primary),this.gridSecondary.setAttribute('d',this.gridLinePath.secondary);var K=this.graph.findAxesLinkedTo(this);return K.map(function(J){J.linkedToAxis&&(J.setMinPx(R.getMinPx()),J.setMaxPx(R.getMaxPx()),J.draw())}),this.options.lineAt0&&0>this.getCurrentMin()&&0<this.getCurrentMax()&&this._draw0Line(this.getPx(0)),Q}writeUnit(){this.options.unit?(this.unitTspan.setAttribute('display','visible'),this.unitTspan.setAttribute('dx',5),this.expTspan.setAttribute('display','none'),this.expTspanExp.setAttribute('display','none'),this.unitTspan.innerHTML=this.options.unitWrapperBefore+this.options.unit.replace(/\^([-+0-9]*)/g,'<tspan dy=\'-5\' font-size=\'0.7em\'>$1</tspan>')+this.options.unitWrapperAfter):this.unitTspan.setAttribute('display','none')}getExponentGreekLetter(R){switch(R){case 3:return'k';break;case 6:return'M';break;case 9:return'G';break;case 12:return'T';break;case 15:return'E';break;case-3:return'm';break;case-6:return'&mu;';break;case-9:return'n';break;case-12:return'p';break;case-15:return'f';}}drawLinearTicksWrapper(R,G){let U;return this.options.primaryTickUnit?U=this.options.primaryTickUnit:(U=this.getUnitPerTick(R,this.getNbTicksPrimary(),G)[0],this.options.maxPrimaryTickUnit&&this.options.maxPrimaryTickUnit<U?U=this.options.maxPrimaryTickUnit:this.options.minPrimaryTickUnit&&this.options.minPrimaryTickUnit>U&&(U=this.options.minPrimaryTickUnit)),this.drawTicks(U,this.secondaryTicks())}forcePrimaryTickUnit(R){this.options.primaryTickUnit=R}forcePrimaryTickUnitMax(R){this.options.maxPrimaryTickUnit=R}forcePrimaryTickUnitMin(R){this.options.minPrimaryTickUnit=R}getPrimaryTickUnit(){return this.incrTick}setTickLabelRatio(R){this.options.ticklabelratio=R}draw(){this._widthLabels=0;var R=this._draw();return this._widthLabels+=R,R}drawTicks(R,G){var U=R,Z=this.getCurrentMin(),Q=this.getCurrentMax(),ee=0,K,J,$;for(G&&(K=U/G),J=this.options.shiftToZero?this.dataMin-Math.ceil((this.dataMin-Z)/U)*U:Math.floor(Z/U)*U,this.incrTick=R;J<=Q&&(ee++,!(200<ee));){if(G){$=J+K,this.subIncrTick=$;for(var te=0;$<J+U&&(te++,!(100<te));){if($<Z||$>Q){$+=K;continue}this.drawTickWrapper($,!1,0.0001>Math.abs($-J-U/2)?2:3),$+=K}}if(J<Z||J>Q){J+=R;continue}this.drawTickWrapper(J,!0,1),J+=R}return this.widthHeightTick=this.getMaxSizeTick(),this.widthHeightTick}nextTick(R,G){if(this.ticks[R]=this.ticks[R]||[],this.lastCurrentTick[R]=this.lastCurrentTick[R]||0,this.currentTick[R]=this.currentTick[R]||0,this.currentTick[R]>=this.ticks[R].length){var U=document.createElementNS(this.graph.ns,'line');this.groupTicks.appendChild(U),this.ticks[R].push(U),G(U)}var U=this.ticks[R][this.currentTick[R]];return this.currentTick[R]>=this.lastCurrentTick[R]&&U.setAttribute('display','visible'),this.currentTick[R]++,U}nextTickLabel(R){if(this.ticksLabels=this.ticksLabels||[],this.lastCurrentTickLabel=this.lastCurrentTickLabel||0,this.currentTickLabel=this.currentTickLabel||0,this.currentTickLabel>=this.ticksLabels.length){var G=document.createElementNS(this.graph.ns,'text');this.groupTickLabels.appendChild(G),this.ticksLabels.push(G),R(G)}var G=this.ticksLabels[this.currentTickLabel];return this.currentTickLabel>=this.lastCurrentTickLabel&&G.setAttribute('display','visible'),this.currentTickLabel++,G}removeUselessTicks(){for(var R in this.currentTick){for(var G=this.currentTick[R];G<this.ticks[R].length;G++)this.ticks[R][G].setAttribute('display','none');this.lastCurrentTick[R]=this.currentTick[R],this.currentTick[R]=0}}removeUselessTickLabels(){for(var R=this.currentTickLabel;R<this.ticksLabels.length;R++)this.ticksLabels[R].setAttribute('display','none');this.lastCurrentTickLabel=this.currentTickLabel,this.currentTickLabel=0}nextGridLine(R,G,U,Z,Q){(R&&this.options.primaryGrid||!R&&this.options.secondaryGrid)&&(this.gridLinePath[R?'primary':'secondary']+='M '+G+' '+Z+' L '+U+' '+Q)}setGridLineStyle(R,G){R.setAttribute('shape-rendering','crispEdges'),R.setAttribute('stroke',G?this.getPrimaryGridColor():this.getSecondaryGridColor()),R.setAttribute('stroke-width',G?this.getPrimaryGridWidth():this.getSecondaryGridWidth()),R.setAttribute('stroke-opacity',G?this.getPrimaryGridOpacity():this.getSecondaryGridOpacity());var U;(U=G?this.getPrimaryGridDasharray():this.getSecondaryGridDasharray())&&R.setAttribute('stroke-dasharray',U)}setGridLinesStyle(){return this.setGridLineStyle(this.gridPrimary,!0),this.setGridLineStyle(this.gridSecondary,!1),this}resetTicksLength(){}secondaryTicks(){return this.options.nbTicksSecondary}drawLogTicks(){var R=this.getCurrentMin(),G=this.getCurrentMax(),U=Math.min(R,G),G=Math.max(R,G);1e-50>U&&(U=1e-50),20<Math.log(U)-Math.log(G)&&(G=Math.pow(10,20*Math.log(U)));var Z={fontSize:'1.0em',exponential:!0,overwrite:!1};0>U&&(U=0);for(var Q=0==U?0:Math.floor(Math.log(U)/Math.log(10)),U=1,K;(K=U*Math.pow(10,Q))<G;)1==U&&K>R&&this.drawTickWrapper(K,!0,1,Z),10==U?(U=1,Q++):(1!=U&&K>R&&this.drawTickWrapper(K,!1,2,{overwrite:'',fontSize:'0.6em'}),U++);return this.widthHeightTick=this.getMaxSizeTick(),this.widthHeightTick}drawTickWrapper(R,G,U,Z){this.drawTick(R,U,Z)}linkToAxis(R,G,U){this.linkedToAxis={axis:R,scalingFunction:G,decimals:U||1}}drawLinkedToAxisTicksWrapper(R,G){var U=this.linkedToAxis,Z=0,J=0,Q,K,$,ee;U.deltaPx||(U.deltaPx=10);do{if(Q=U.scalingFunction(U.axis.getVal(Z+this.getMinPx())),U.decimals&&(this.decimals=U.decimals),K=this.drawTick(Q,1,{},Z+this.getMinPx()),!K){console.log(Q,Z,this.getMinPx()),console.error('Problem here');break}if($=8*(K[1].textContent+'').length,ee=5*Math.round($/5),ee>U.deltaPx)return U.deltaPx=ee,void this.drawLinkedToAxisTicksWrapper(R,G);J++,Z+=U.deltaPx}while(Z<R)}getPos(R){return this.getPx(R)}getPx(R){if(!this.options.logScale)return(R-this.getCurrentMin())/this.getCurrentInterval()*(this.getMaxPx()-this.getMinPx())+this.getMinPx();if(!(0>R)){var R=(Math.log(R)-Math.log(this.getCurrentMin()))/(Math.log(this.getCurrentMax())-Math.log(this.getCurrentMin()))*(this.getMaxPx()-this.getMinPx())+this.getMinPx();return R}}getRoundedPx(R){return Math.round(10*this.getPx(R))/10}getVal(R){return this.options.logScale?Math.exp((R-this.getMinPx())/(this.getMaxPx()-this.getMinPx())*(Math.log(this.getCurrentMax())-Math.log(this.getCurrentMin()))+Math.log(this.getCurrentMin())):(R-this.getMinPx())/(this.getMaxPx()-this.getMinPx())*this.getCurrentInterval()+this.getCurrentMin()}getRelPx(R){return R/this.getCurrentInterval()*(this.getMaxPx()-this.getMinPx())}getRelVal(R){return R/(this.getMaxPx()-this.getMinPx())*this.getCurrentInterval()}valueToText(R){if(this.scientificExponent)return R/=Math.pow(10,this.scientificExponent),R.toFixed(1);if(R=R*Math.pow(10,this.getExponentialFactor())*Math.pow(10,this.getExponentialLabelFactor()),this.options.shiftToZero&&(R-=this.dataMin),this.options.ticklabelratio&&(R*=this.options.ticklabelratio),this.options.unitModification)return R=this.modifyUnit(R,this.options.unitModification),R;var G=this.decimals-this.getExponentialFactor()-this.getExponentialLabelFactor();return isNaN(R)?'':0<G?R.toFixed(G):R.toFixed(0)}valueToHtml(R,G,U){var Z=this.valueToText(R),Q;return this.options.unitDecade&&this.options.unit&&0!==this.scientificExponent&&(this.scientificExponent=this.getEngineeringExponent(this.scientificExponent))&&(Q=this.getExponentGreekLetter(this.scientificExponent))?Z+=Q:0!==this.scientificExponent&&!isNaN(this.scientificExponent)&&!G&&(Z+='x10',Z+='<sup>'+this.scientificExponent+'</sup>'),this.options.unit&&!U&&(Z+=this.options.unit.replace(/\^([-+0-9]*)/g,'<sup>$1</sup>')),Z}getModifiedValue(R){return this.options.ticklabelratio&&(R*=this.options.ticklabelratio),this.options.shiftToZero&&(R-=this.getMinValue()*(this.options.ticklabelratio||1)),R}modifyUnit(R,G){var U='',Z=this.incrTick;switch(G){case'time':var Q=this.getModifiedValue(this.getMaxValue()),K=[[60,'min'],[3600,'h'],[86400,'d']],J;if(3600>Q?J=0:86400>Q?J=1:2592000>Q&&(J=2),!K[J])return!1;R=R/K[J][0];var $=Math.floor(R);for(U=$+K[J][1],J--;Z<1*K[J+1][0]&&-1<J;)R=(R-$)*K[J+1][0]/K[J][0],$=Math.round(R),U+=' '+$+K[J][1],J--;break;case'time:min.sec':R=R/60;var $=Math.floor(R),ee=Math.round(60*(R-$))+'';ee=1==ee.length?'0'+ee:ee,U=$+'.'+ee;}return U}getExponentialFactor(){return this.options.exponentialFactor}setExponentialFactor(R){this.options.exponentialFactor=R}setExponentialLabelFactor(R){this.options.exponentialLabelFactor=R}getExponentialLabelFactor(){return this.options.exponentialLabelFactor}setLabel(R){return this.options.labelValue=R,this}getLabel(){return this.options.labelValue}setSpan(R,G){return this.options.span=[R,G],this}getSpan(){return this.options.span}setLevel(R){return this._level=R,this}getLevel(){return this._level}setShift(R){this.shift=R}getShift(){return this.shift}setTickPosition(R){switch(R){case 3:case'outside':case F.default.TICKS_OUTSIDE:R=3;break;case 2:case'centered':case F.default.TICKS_CENTERED:R=2;break;default:case 1:case'inside':case F.default.TICKS_INSIDE:R=1;}switch(this.options.tickPosition=R,this.options.tickPosition){case 3:this.tickPx1=-2,this.tickPx2=0;break;case 2:this.tickPx1=-1,this.tickPx2=1;break;case 1:this.tickPx1=0,this.tickPx2=2;}return this}setGrids(R){return this.options.primaryGrid=R,this.options.secondaryGrid=R,this}setPrimaryGrid(R){return this.options.primaryGrid=R,this}setSecondaryGrid(R){return this.options.secondaryGrid=R,this}primaryGridOn(){return this.setPrimaryGrid(!0)}primaryGridOff(){return this.setPrimaryGrid(!1)}secondaryGridOn(){return this.setSecondaryGrid(!0)}secondaryGridOff(){return this.setSecondaryGrid(!1)}gridsOn(){return this.setGrids(!0)}gridsOff(){return this.setGrids(!1)}turnGridsOff(){return this.gridsOff(...arguments)}turnGridsOn(){return this.gridsOn(...arguments)}setAxisColor(R){return this.options.axisColor=R,this}getAxisColor(){return this.options.axisColor||'black'}setPrimaryTicksColor(R){return this.options.primaryTicksColor=R,this}getPrimaryTicksColor(){return this.options.primaryTicksColor||'black'}setSecondaryTicksColor(R){return this.options.secondaryTicksColor=R,this}getSecondaryTicksColor(){return this.options.secondaryTicksColor||'black'}setTicksLabelColor(R){return this.options.ticksLabelColor=R,this}getTicksLabelColor(){return this.options.ticksLabelColor||'black'}setPrimaryGridColor(R){return this.options.primaryGridColor=R,this}getPrimaryGridColor(){return this.options.primaryGridColor}setSecondaryGridColor(R){return this.options.secondaryGridColor=R,this}getSecondaryGridColor(){return this.options.secondaryGridColor}setPrimaryGridWidth(R){return this.options.primaryGridWidth=R,this}getPrimaryGridWidth(){return this.options.primaryGridWidth}setSecondaryGridWidth(R){return this.options.secondaryGridWidth=R,this}getSecondaryGridWidth(){return this.options.secondaryGridWidth}setPrimaryGridOpacity(R){return this.options.primaryGridOpacity=R,this}getPrimaryGridOpacity(){return this.options.primaryGridOpacity}setSecondaryGridOpacity(R){return this.options.secondaryGridOpacity=R,this}getSecondaryGridOpacity(){return this.options.secondaryGridOpacity}setPrimaryGridDasharray(R){return this.options.primaryGridDasharray=R,this}getPrimaryGridDasharray(){return this.options.primaryGridDasharray}setSecondaryGridDasharray(R){return this.options.secondaryGridDasharray=R,this}getSecondaryGridDasharray(){return this.options.secondaryGridDasharray}setLabelColor(R){this.options.labelColor=R}getLabelColor(){return this.options.labelColor}setTickContent(R,G,U){if(U||(U={}),U.overwrite||!U.exponential)R.textContent=U.overwrite||this.valueToText(G);else{var Z=Math.round(Math.log(G)/Math.log(10)),Q=Math.floor(G*Math.pow(10,-Z));R.textContent=1==Q?'10':Q+'x10';var K=document.createElementNS(this.graph.ns,'tspan');K.textContent=Z,K.setAttribute('font-size','0.7em'),K.setAttribute('dy',-5),R.appendChild(K)}U.fontSize&&R.setAttribute('font-size',U.fontSize)}isX(){return!1}isY(){return!1}setUnit(R){return this.options.unit=R,this}setUnitWrapper(R,G){return this.options.unitWrapperBefore=R,this.options.unitWrapperAfter=G,this}setUnitDecade(R){return this.options.unitDecade=R,this}setScientific(R){return this.options.scientificScale=R,this}setScientificScaleExponent(R){return this.options.scientificScaleExponent=R,this}setEngineering(R){return this.options.scientificScale=R,this.options.engineeringScale=R,this}getEngineeringExponent(R){return R-=0<R?R%3:(3- -R%3)%3,R}setLogScale(R){return this.options.logScale=R,this}isZoomed(){return this.currentAxisMin!=this.getMinValue()&&this.currentAxisMax!=this.getMaxValue()}hasAxis(){return!1}getType(){return null}}W.prototype.getValue=W.prototype.getVal,W.prototype.getDeltaPx=W.prototype.getRelPx,E.default=W})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(7)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var X})(this,function(E,Y){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var X=function(F){return F&&F.__esModule?F:{default:F}}(Y);class I extends X.default{constructor(N,F,O){super(N,F,O),this.leftright=F,this.left='left'==F}setAxisPosition(N){this.shiftPosition=N}getAxisPosition(){return this.shiftPosition||0}getAdditionalWidth(){let N=0;return this.getLabel()&&(N+=this.graph.options.fontSize),this.isShown()&&(N+=Math.abs(this.tickMargin)),N}isX(){return!1}isY(){return!0}resetTicksLength(){this.longestTick=[!1,0]}getMaxSizeTick(){return this.longestTick&&this.longestTick[0]?this.longestTick[0].getComputedTextLength()+5:0}draw(){this.tickMargin=this.left?-5-this.tickPx1*this.tickScaling[1]:5+this.tickPx1*this.tickScaling[1];var N=super.draw(...arguments);return N+=this.getAdditionalWidth(),this.drawSpecifics(N),this.fullwidthlabel=N,N}equalizePosition(N){return this.placeLabel(this.left?-N:N),this.getLabel()?N+this.graph.options.fontSize:0}drawTick(N,F,O,V){var W=this,R=this.groupTicks,B,G;if(B=V||this.getPos(N),!(void 0==B||isNaN(B))){var U=this.nextTick(F,Z=>{Z.setAttribute('x1',(this.left?1:-1)*this.tickPx1*this.tickScaling[F]),Z.setAttribute('x2',(this.left?1:-1)*this.tickPx2*this.tickScaling[F]),1==F?Z.setAttribute('stroke',this.getPrimaryTicksColor()):Z.setAttribute('stroke',this.getSecondaryTicksColor())});if(U.setAttribute('y1',B),U.setAttribute('y2',B),this.nextGridLine(1==F,0,this.graph.getDrawingWidth(),B,B),1==F){var G=this.nextTickLabel(Z=>{Z.setAttribute('x',this.tickMargin),'black'!==this.getTicksLabelColor()&&Z.setAttribute('fill',this.getTicksLabelColor()),this.left?Z.setAttribute('text-anchor','end'):Z.setAttribute('text-anchor','start'),Z.style.dominantBaseline='central'});G.setAttribute('y',B),this.setTickContent(G,N,O),(G.textContent+'').length>=this.longestTick[1]&&(this.longestTick[0]=G,this.longestTick[1]=(G.textContent+'').length)}}}drawLabel(){'black'!==this.getLabelColor()&&this.label.setAttribute('fill',this.getLabelColor()),this.label.setAttribute('dominant-baseline',this.left?'auto':'hanging'),this.labelTspan.textContent=this.getLabel()}placeLabel(N){this.label.setAttribute('transform','translate('+N+', '+Math.abs(this.getMaxPx()+this.getMinPx())/2+') rotate(-90)')}drawSpecifics(){this.line.setAttribute('y1',this.getMinPx()),this.line.setAttribute('y2',this.getMaxPx()),this.line.setAttribute('x1',0),this.line.setAttribute('x2',0),this.line.setAttribute('stroke',this.getAxisColor());var N=this.getSpan();this.line.setAttribute('marker-start',this.options.splitMarks&&0!=N[0]?'url(#verticalsplit_'+this.graph.getId()+')':''),this.line.setAttribute('marker-end',this.options.splitMarks&&1!=N[1]?'url(#verticalsplit_'+this.graph.getId()+')':'')}setShift(N){if(this.shift=N,this.shift&&this.graph.getWidth()){let F=this.shift;F=this.floating?F:this.isLeft()?F:this.graph.getWidth()-this.graph.getPaddingRight()-this.graph.getPaddingLeft()-F,this.group.setAttribute('transform','translate( '+F+' 0 )'),this.drawLabel()}}isLeft(){return this.left}isRight(){return!this.left}isFlipped(){return!this.options.flipped}_draw0Line(N){this._0line||(this._0line=document.createElementNS(this.graph.ns,'line')),this._0line.setAttribute('y1',N),this._0line.setAttribute('y2',N),this._0line.setAttribute('x1',0),this._0line.setAttribute('x2',this.graph.getDrawingWidth()),this._0line.setAttribute('stroke','black'),this.groupGrids.appendChild(this._0line)}handleMouseMoveLocal(N,F){F-=this.graph.getPaddingTop(),this.mouseVal=this.getVal(F)}scaleToFitAxis(N,F,O,V,B,W){N&&N.isX()||(N=this.graph.getXAxis()),isNaN(O)&&(O=N.getCurrentMin()),isNaN(V)&&(V=N.getCurrentMax()),B===void 0&&(B=!0),W===void 0&&(W=!0),'number'==typeof F&&(V=O,O=F,F=!1);var R=-(1/0),G=1/0,U=0;for(var Z=0,Q=this.graph.series.length;Z<Q;Z++)this.graph.series[Z].isShown()&&this.graph.series[Z]!=F&&this.graph.series[Z].getXAxis()==N&&this.graph.series[Z].getYAxis()===this&&(U++,R=W?Math.max(R,this.graph.series[Z].getMax(O,V)):0,G=B?Math.min(G,this.graph.series[Z].getMin(O,V)):0);if(0==U)this.setMinMaxToFitSeries();else{G=B?G:this.getCurrentMin(),R=W?R:this.getCurrentMax();var K=R-G;G-=this.options.axisDataSpacing.min*K,R+=this.options.axisDataSpacing.max*K,this._doZoomVal(G,R)}return this}setMinMaxFlipped(){var N=this.maxPx-this.minPx;if(!isNaN(N)){var F=this.maxPx-N*this.options.span[0]-this.options.marginMin,O=this.maxPx-N*this.options.span[1]+this.options.marginMax;this.minPxFlipped=this.isFlipped()?F:O,this.maxPxFlipped=this.isFlipped()?O:F}}}E.default=I})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(6)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var X})(this,function(E,Y){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var X=function(F){return F&&F.__esModule?F:{default:F}}(Y);class I extends X.default{constructor(N,F,O={}){super(N,F,O)}set categories(N){return this._barCategories=N,this}draw(){var N=this,O=this.graph.drawingSpaceWidth,V=this._barCategories,F;if(this.forceMin(0),this.forceMax(1),this.cacheCurrentMin(),this.cacheCurrentMax(),this.cacheInterval(),!!V){Array.isArray(V)||(V=[V]);for(var B=0;B<=V.length;B++)this.drawTick(B/V.length,2),B<V.length&&(F=this.nextTickLabel(function(W){W.setAttribute('y',(N.top?-1:1)*((1==N.options.tickPosition?8:20)+(N.top?10:0))),W.setAttribute('text-anchor','middle'),'black'!==N.getTicksLabelColor()&&W.setAttribute('fill',N.getTicksLabelColor()),W.style.dominantBaseline='hanging'}),F.setAttribute('x',this.getPos((B+0.5)/V.length)),F.textContent=V[B].title);return this.drawSpecifics(),this}}autoSeries(){let N=[];for(let F of this.graph.series)F.getXAxis()==this&&N.push(F);return this.setSeries(...N),this}setSeries(){var N=this;return this.series=arguments,Array.prototype.map.call(this.series,function(F,O){'object'==typeof F||(F=N.graph.getSerie(F)),F.setCategoryConfig&&F.setCategoryConfig(O,N._barCategories,N.series.length)}),this._getUsedCategories(),this}_getUsedCategories(){let N={},F=0;Array.prototype.map.call(this.series,W=>{let R=W.getUsedCategories();for(let G of R)N.hasOwnProperty(G)||(N[G]=1,F+=1),N[G]++,F++});let O=0;for(let W in N){let R=N[W];N[W]=O,O+=R}let V={},B=0;Array.prototype.map.call(this.series,W=>{let R=W.getUsedCategories(),G={};R.map(U=>{V[U]=V[U]||0.5,G[U]=(N[U]+V[U])/F,V[U]++}),W.setDataIndices(G,F),B++})}getType(){return'category'}}E.default=I})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(7),S(3)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var X})(this,function(E,Y,X){'use strict';function I(J,$){return Math.round(J/$)*$}function N(J,$){switch($.unit){case's':J.setSeconds(I(J.getSeconds(),$.increment)),J.setMilliseconds(0);break;case'i':J.setMinutes(I(J.getMinutes(),$.increment)),J.setSeconds(0),J.setMilliseconds(0);break;case'h':J.setHours(I(J.getHours(),$.increment)),J.setMinutes(0),J.setSeconds(0),J.setMilliseconds(0);break;case'd':J.setMinutes(0),J.setSeconds(0),J.setMilliseconds(0),J.setHours(0),J.setDate(I(J.getDate(),$.increment));break;case'm':J.setMinutes(0),J.setSeconds(0),J.setMilliseconds(0),J.setHours(0),J.setDate(1),J.setMonth(I(J.getMonth(),$.increment));break;case'y':J.setMinutes(0),J.setSeconds(0),J.setMilliseconds(0),J.setHours(0),J.setDate(1),J.setMonth(0);break;default:throw'Date format not recognized';}return J}function F(J,$){switch($.unit){case's':J.setSeconds(J.getSeconds()+$.increment),J.setMilliseconds(0);break;case'i':J.setMinutes(J.getMinutes()+$.increment),J.setSeconds(0),J.setMilliseconds(0);break;case'h':J.setHours(J.getHours()+$.increment),J.setMinutes(0),J.setSeconds(0),J.setMilliseconds(0);break;case'd':J.setDate(J.getDate()+$.increment),J.setMinutes(0),J.setSeconds(0),J.setMilliseconds(0),J.setHours(0);break;case'm':J.setMonth(J.getMonth()+$.increment),J.setMinutes(0),J.setSeconds(0),J.setMilliseconds(0),J.setHours(0),J.setDate(1);break;case'y':J.setFullYear(J.getFullYear()+$.increment),J.setMinutes(0),J.setSeconds(0),J.setMilliseconds(0),J.setHours(0),J.setDate(1),J.setMonth(0);break;default:throw'Date format not recognized';}return J}function O(J,$,ee){if(J.groups[$][ee])return J.groups[$][ee].group.setAttribute('display','block'),J.groups[$][ee];var te={group:document.createElementNS(J.graph.ns,'g'),text:document.createElementNS(J.graph.ns,'text')},ie=document.createElementNS(J.graph.ns,'line');return ie.setAttribute('stroke','black'),ie.setAttribute('y1',0),2===$?(ie.setAttribute('y2',6),te.text.setAttribute('y',15),te.line=ie,te.group.appendChild(te.line)):1===$?(ie.setAttribute('y2',20),te.text.setAttribute('y',10),te.line1=ie,te.line2=ie.cloneNode(),te.group.appendChild(te.line1),te.group.appendChild(te.line2)):void 0,(te.text.setAttribute('text-anchor','middle'),te.text.setAttribute('dominant-baseline','middle'),te.group.appendChild(te.text),J.getWrapper($).appendChild(te.group),J.groups[$][ee]=te)}function V(J,$,ee){for(;ee<J.groups[$].length;ee++)B(J.groups[$][ee])}function B(J){J.group.setAttribute('display','none')}function W(J,$){return Q(J,$)}function R(J,$,ee,te,ie,re,ae){switch(J){case 1:var se=Math.max(te,Math.min(ie,re)),ne=Math.max(te,Math.min(ie,ae));if(isNaN(ne)||isNaN(se))return;for($.line1.setAttribute('x1',se),$.line2.setAttribute('x1',ne),$.line1.setAttribute('x2',se),$.line2.setAttribute('x2',ne),$.text.setAttribute('x',(se+ne)/2);8*ee.length>ne-se;)if(ee=ee.substr(0,ee.length-2)+'.',1==ee.length){ee='';break}$.text.textContent=ee;break;case 2:if(re<te||re>ie)return void B($);$.line.setAttribute('x1',re),$.line.setAttribute('x2',re),$.text.setAttribute('x',re),$.text.textContent=ee;}}Object.defineProperty(E,'__esModule',{value:!0});var G=function($){return $&&$.__esModule?$:{default:$}}(Y),U=function($){if($&&$.__esModule)return $;var ee={};if(null!=$)for(var te in $)Object.prototype.hasOwnProperty.call($,te)&&(ee[te]=$[te]);return ee.default=$,ee}(X),Z=[{threshold:20,increments:{1:{increment:1,unit:'i',format:'HH"h"MM (dd/mm/yy)'},2:{increment:1,unit:'s',format:'MM:ss"s"'}}},{threshold:50,increments:{1:{increment:1,unit:'i',format:'HH"h"MM (dd/mm/yy)'},2:{increment:2,unit:'s',format:'MM:ss"s"'}}},{threshold:100,increments:{1:{increment:1,unit:'i',format:'HH"h"MM (dd/mm/yy)'},2:{increment:5,unit:'s',format:'MM:ss"s"'}}},{threshold:600,increments:{1:{increment:10,unit:'i',format:'HH"h"MM (dd/mm/yy)'},2:{increment:30,unit:'s',format:'MM:ss"s"'}}},{threshold:1000,increments:{1:{increment:1,unit:'h',format:'HH"h"MM (dd/mm/yy)'},2:{increment:10,unit:'i',format:'MM"min"'}}},{threshold:1500,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:1,unit:'i',format:'H"h"MM'}}},{threshold:3000,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:2,unit:'i',format:'H"h"MM'}}},{threshold:8000,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:10,unit:'i',format:'H"h"MM'}}},{threshold:26400,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:20,unit:'i',format:'H"h"MM'}}},{threshold:86400,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:1,unit:'h',format:'H"h"MM'}}},{threshold:200000,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:2,unit:'h',format:'H"h"MM'}}},{threshold:400000,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:6,unit:'h',format:'H"h"MM'}}},{threshold:1400000,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:12,unit:'h',format:'HH"h"MM'}}},{threshold:6400000,increments:{1:{increment:1,unit:'m',format:'mmmm yyyy'},2:{increment:1,unit:'d',format:'dd'}}},{threshold:12400000,increments:{1:{increment:1,unit:'m',format:'mmmm yyyy'},2:{increment:2,unit:'d',format:'dd'}}},{threshold:43200000,increments:{1:{increment:1,unit:'m',format:'mmmm yyyy'},2:{increment:7,unit:'d',format:'dd'}}},{threshold:69120000,increments:{1:{increment:1,unit:'m',format:'mmmm yyyy'},2:{increment:15,unit:'d',format:'dd'}}},{threshold:86400000,increments:{1:{increment:1,unit:'y',format:'yyyy'},2:{increment:3,unit:'m',format:'mm/yyyy'}}},{threshold:172800000,increments:{1:{increment:1,unit:'y',format:'yyyy'},2:{increment:4,unit:'m',format:'mm/yyyy'}}},{threshold:864000000,increments:{1:{increment:1,unit:'y',format:'yyyy'},2:{increment:6,unit:'m',format:'mm/yyyy'}}},{threshold:1036800000,increments:{1:{increment:1,unit:'y',format:'yyyy'},2:{increment:1,unit:'y',format:'yyyy'}}}],Q=function(){var J=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[WLloSZ]|"[^"]*"|'[^']*'/g,$=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,ee=/[^-+\dA-Z]/g,te=function(re,ae){for(re=re+'',ae=ae||2;re.length<ae;)re='0'+re;return re},ie=function(re,ae){var se=new Date(re[ae+'FullYear'](),0,1);return Math.ceil(((re-se)/86400000+se[ae+'Day']()+1)/7)};return function(re,ae,se){var ne=Q;if(1!=arguments.length||'[object String]'!=Object.prototype.toString.call(re)||/\d/.test(re)||(ae=re,re=void 0),re=re?new Date(re):new Date,isNaN(re))throw SyntaxError('invalid date:'+re);ae=(ne.masks[ae]||ae||ne.masks['default'])+'','UTC:'==ae.slice(0,4)&&(ae=ae.slice(4),se=!0);var oe=se?'getUTC':'get',le=re[oe+'Date'](),de=re[oe+'Day'](),pe=re[oe+'Month'](),ue=re[oe+'FullYear'](),ge=re[oe+'Hours'](),ce=re[oe+'Minutes'](),he=re[oe+'Seconds'](),xe=re[oe+'Milliseconds'](),me=se?0:re.getTimezoneOffset(),ye={d:le,dd:te(le),ddd:ne.i18n.dayNames[de],dddd:ne.i18n.dayNames[de+7],m:pe+1,mm:te(pe+1),mmm:ne.i18n.monthNames[pe],mmmm:ne.i18n.monthNames[pe+12],yy:(ue+'').slice(2),yyyy:ue,h:ge%12||12,hh:te(ge%12||12),H:ge,HH:te(ge),M:ce,MM:te(ce),s:he,ss:te(he),l:te(xe,3),L:te(99<xe?Math.round(xe/10):xe),t:12>ge?'a':'p',tt:12>ge?'am':'pm',T:12>ge?'A':'P',TT:12>ge?'AM':'PM',Z:se?'UTC':((re+'').match($)||['']).pop().replace(ee,''),o:(0<me?'-':'+')+te(100*Math.floor(Math.abs(me)/60)+Math.abs(me)%60,4),S:['th','st','nd','rd'][3<le%10?0:(10!=le%100-le%10)*le%10],W:ie(re,oe)};return ae.replace(J,function(fe){return fe in ye?ye[fe]:fe.slice(1,fe.length-1)})}}();Q.masks={'default':'ddd mmm dd yyyy HH:MM:ss',shortDate:'m/d/yy',mediumDate:'mmm d, yyyy',longDate:'mmmm d, yyyy',fullDate:'dddd, mmmm d, yyyy',shortTime:'h:MM TT',mediumTime:'h:MM:ss TT',longTime:'h:MM:ss TT Z',isoDate:'yyyy-mm-dd',isoTime:'HH:MM:ss',isoDateTime:'yyyy-mm-dd\'T\'HH:MM:ss',isoUtcDateTime:'UTC:yyyy-mm-dd\'T\'HH:MM:ss\'Z\''},Q.i18n={dayNames:['Sun','Mon','Tue','Wed','Thu','Fri','Sat','Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],monthNames:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec','January','February','March','April','May','June','July','August','September','October','November','December']};class K extends G.default{constructor(){super(...arguments)}init(J,$){super.init(J,$),this.wrapper={1:document.createElementNS(J.ns,'g'),2:document.createElementNS(J.ns,'g')},this.groups={'1':[],'2':[]};var ee=document.createElementNS(J.ns,'rect');ee.setAttribute('fill','#c0c0c0'),ee.setAttribute('stroke','#808080'),ee.setAttribute('height','20'),ee.setAttribute('x','0'),ee.setAttribute('y','0'),this.rect=ee,this.wrapper[1].appendChild(this.rect),this.group.appendChild(this.wrapper[1]),this.group.appendChild(this.wrapper[2]),this.wrapper[1].setAttribute('transform','translate( 0, 25 )'),this.wrapper[2].setAttribute('transform','translate( 0, 00 )')}draw(){this.cacheCurrentMax(),this.cacheCurrentMin(),(void 0==this.currentAxisMin||void 0==this.currentAxisMax)&&this.setMinMaxToFitSeries(!0),this.line.setAttribute('x1',this.getMinPx()),this.line.setAttribute('x2',this.getMaxPx()),this.line.setAttribute('y1',0),this.line.setAttribute('y2',0);var J=this.maxPx-this.minPx,$=this.getCurrentInterval(),ee=this.getCurrentMax(),te=this.getCurrentMin();if(this.rect.setAttribute('width',J),this.rect.setAttribute('x',this.minPx),!ee||!te)return 0;var ie;for(pe=0;pe<Z.length;pe++)if(Z[pe].threshold>$/J){ie=Z[pe];break}ie||(ie=Z[Z.length-1]);var se=0,re,ae,ne,oe,le,de,pe;for(se=1;2>=se;se++){if(!U.isNumeric(te)){V(this,se,0);break}ne=new Date(te),oe=N(ne,ie.increments[se]),pe=0;do if(le=W(oe,ie.increments[se].format),de=O(this,se,pe),re=this.getPx(oe.getTime()),oe=F(oe,ie.increments[se]),ae=this.getPx(oe.getTime()),R(se,de,le,this.getMinPx(),this.getMaxPx(),re,ae),pe++,100<pe)break;while(oe.getTime()<ee);V(this,se,pe)}}isX(){return!0}getWrapper(J){return this.wrapper[J]}setShift(J){this.shift=J,this.group.setAttribute('transform','translate(0 '+(this.top?this.shift:this.graph.getDrawingHeight()-this.shift)+')')}getAxisPosition(){return 60}setMinMaxFlipped(){var J=this.maxPx-this.minPx,$=J*this.options.span[1]+this.minPx,ee=J*this.options.span[0]+this.minPx;this.minPxFlipped=this.isFlipped()?$:ee,this.maxPxFlipped=this.isFlipped()?ee:$}}E.default=K})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(1),S(12),S(13),S(3),S(14)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var X})(this,function(E,Y,X,I,N,F){'use strict';function O(ee){return ee&&ee.__esModule?ee:{default:ee}}function V(ee,te,ie,re,ae){if(te){if(ee.options.markersIndependant){var se=ee.getMarkerDomIndependant(ee.counter1,ee.counter2,te),ne='M '+ie+' '+re+' ';ne+=te.markerPath+' ',se.setAttribute('d',ne)}ae.path=ae.path||'',ae.path+='M '+ie+' '+re+' ',ae.path+=te.markerPath+' '}}function B(ee){var se=0,ne=ee.data.length,oe=0,he=[],xe=0,me=1,be=ee.isXMonotoneous(),Ae=ee.getXAxis().getMathMaxPx(),te,ie,re,ae,le,de,pe,ue,ge,ce,ye,fe,ke,Me;ee.isFlipped()&&(xe=1,me=0);var _e=[],Se=[],Pe=[],Ce=0;if('x_equally_separated'==ee.mode){if(ee.isFlipped())return[ee.data,ee.xData];for(Pe=[];se<ne;se++){oe=0,le=0,de=ee.data[se].length;var ve=Math.round(ee.degradationPx/ee.getXAxis().getRelPx(ee.xData[se].dx));for(1==ve&&(Se.push(ee.xData[se]),_e.push(ee.data[se])),pe=1/0,ue=-(1/0);oe<de;oe+=1){if(te=ee.xData[se].x+oe*ee.xData[se].dx,be&&0>te){Me=[te,ie,ee.data[se][oe]];continue}if(be&&Me&&(Ce+=Me[2],pe=Math.min(pe,Me[2]),ue=Math.max(ue,Me[2]),Me=!1,le++),Ce+=ee.data[se][oe],pe=Math.min(pe,ee.data[se][oe]),ue=Math.max(ue,ee.data[se][oe]),(0==oe%ve&&0<oe||ke)&&(Pe.push(Ce/ve),he.push(ee.xData[se].x+oe*ee.xData[se].dx-ve/2*ee.xData[se].dx,pe,ue),pe=1/0,ue=-(1/0),Ce=0),be&&te>Ae){ke=!0;break}le++}_e.push(Pe),Se.push({dx:ve*ee.xData[se].dx,x:ee.xData[se].x+ve*ee.xData[se].dx/2})}return ee.degradationSerie&&(ee.degradationSerie.setData(he),ee.degradationSerie.draw()),[_e,Se]}for(;se<ne;se++){oe=0,le=0,de=ee.data[se].length,ge=0,ce=0,pe=1/0,ue=-(1/0);for(var Le=[];oe<de;oe+=2){if(re=ee.getX(ee.data[se][oe+xe]),be&&0>re){Me=[re,ee.getY(ee.data[se][oe+me]),ee.data[se][oe+xe],ee.data[se][oe+me]];continue}if(be&&Me?(ce+=Me[3],ge++,pe=Math.min(pe,Me[3]),ue=Math.max(ue,Me[3]),ye=Me[2],fe=Me[0],Me=!1,le++):void 0==ye&&(ye=ee.data[se][oe+xe],fe=re),Math.abs(re-fe)>ee.degradationPx&&oe<de){if(Le.push((ye+ee.data[se][oe+xe])/2,ce/ge),he.push((ee.data[se][oe+xe]+ye)/2,pe,ue),fe>Ae)break;ye=void 0,ge=0,ce=0,pe=1/0,ue=-(1/0),le++}ce+=ee.data[se][oe+me],ge++,pe=Math.min(pe,ee.data[se][oe+me]),ue=Math.max(ue,ee.data[se][oe+me]),be&&re>Ae&&(ke=!0),te=re,ie=ae}if(_e.push(Le),ke)break}return ee.degradationSerie&&(ee.degradationSerie.setData(he),ee.degradationSerie.draw()),[_e]}function W(ee){if(ee.picks)for(var te=0;te<ee.picks.length;te++)ee.picks[te].hide()}function R(ee){if(ee.picks)for(var te=0;te<ee.picks.length;te++)ee.picks[te].show()}Object.defineProperty(E,'__esModule',{value:!0});var G=O(Y),U=O(X),Z=O(I),Q=function(te){if(te&&te.__esModule)return te;var ie={};if(null!=te)for(var re in te)Object.prototype.hasOwnProperty.call(te,re)&&(ie[re]=te[re]);return ie.default=te,ie}(N),K=O(F);const J={lineColor:'black',lineStyle:1,flip:!1,label:'',lineWidth:1,markers:!1,trackMouse:!1,trackMouseLabel:!1,trackMouseLabelRouding:1,lineToZero:!1,autoPeakPicking:!1,autoPeakPickingNb:4,autoPeakPickingMinDistance:10,autoPeakPickingFormat:!1,autoPeakPickingAllowAllY:!1,selectableOnClick:!0,markersIndependant:!1};class $ extends U.default{constructor(){super(...arguments)}init(ee,te,ie){var re=this;if(this.selectionType='unselected',this.markerFamilies={},this.graph=ee,this.name=te,this.options=Q.extend(!0,{},J,ie||{}),Q.mapEventEmission(this.options,this),this.styles={},this.styles.unselected={lineColor:this.options.lineColor,lineStyle:this.options.lineStyle,lineWidth:this.options.lineWidth,markers:this.options.markers},this.styles.selected={lineWidth:3},this.extendStyles(),this.markersDom=new Map,this.shown=!0,this.data=[],this._isMinOrMax={x:{min:!1,max:!1},y:{min:!1,max:!1}},this.groupLines=document.createElementNS(this.graph.ns,'g'),this.domMarker=document.createElementNS(this.graph.ns,'path'),this.domMarker.style.cursor='pointer',this.groupMain=document.createElementNS(this.graph.ns,'g'),this.additionalData={},this.marker=document.createElementNS(this.graph.ns,'circle'),this.marker.setAttribute('fill','black'),this.marker.setAttribute('r',3),this.marker.setAttribute('display','none'),this.markerLabel=document.createElementNS(this.graph.ns,'text'),this.markerLabelSquare=document.createElementNS(this.graph.ns,'rect'),this.markerLabelSquare.setAttribute('fill','white'),this.domMarkerHover={},this.domMarkerSelect={},this.markerHovered=0,this.groupMarkerSelected=document.createElementNS(this.graph.ns,'g'),this.markerPoints={},this.lines=[],this.groupMain.appendChild(this.groupLines),this.groupMain.appendChild(this.marker),this.groupMain.appendChild(this.groupMarkerSelected),this.groupMain.appendChild(this.markerLabelSquare),this.groupMain.appendChild(this.markerLabel),this.groupMarkers=document.createElementNS(this.graph.ns,'g'),this.groupMain.appendChild(this.groupMarkers),this.independantMarkers=[],this.initExtended1&&this.initExtended1(),this.options.autoPeakPicking){this.picks=this.picks||[];for(var ae=0,se=this.options.autoPeakPickingNb;ae<se;ae++){var ne=this.graph.newShape({type:'label',label:{text:'',position:{x:0},anchor:'middle'},selectable:!0,shapeOptions:{minPosY:15}});ne.draw(),ne.setSerie(re),re.picks.push(ne)}}this.groupLines.addEventListener('click',function(){re.options.selectableOnClick&&(re.isSelected()?re.graph.unselectSerie(re):re.graph.selectSerie(re))}),this.options.markers&&this.setMarkers(this.options.markers,'unselected')}setOptions(ee){return this.options=Q.extend(!0,{},$.prototype.defaults,ee||{}),this.styles.unselected={lineColor:this.options.lineColor,lineStyle:this.options.lineStyle,markers:this.options.markers},this.applyLineStyles(),this}calculateSlots(){this,this.slotsData={};for(var ee=0,te=this.slots.length;ee<te;ee++)this.calculateSlot(this.slots[ee],ee)}slotCalculator(ee,te){return(0,Z.default)({min:this.minX,max:this.maxX,data:this.data,slot:ee,slotNumber:te,flip:this.getFlip()})}calculateSlot(ee,te){var ie=this;this.slotsData[ee]=this.slotCalculator(ee,te),this.slotsData[ee].then(function(re){return ie.slotsData[ee]=re,re})}onMouseOverMarker(ee,te){this.toggleMarker(te,!0,!0),this.options.onMouseOverMarker&&this.options.onMouseOverMarker(te,!!this.infos&&(this.infos[te[0]]||!1),[this.data[te[1]][2*te[0]],this.data[te[1]][2*te[0]+1]])}onMouseOutMarker(ee,te){this.markersOffHover(),this.options.onMouseOutMarker&&this.options.onMouseOutMarker(te,!!this.infos&&(this.infos[te[0]]||!1),[this.data[te[1]][2*te[0]],this.data[te[1]][2*te[0]+1]])}toggleMarker(ee,te,ie){var re=ee[0],ae=ee[1]||0;ee=ee.join();var se;'undefined'==typeof te&&(se=ie?!this.domMarkerHover[ee]:!this.domMarkerSelect[ee]);var ne=this['domMarker'+(ie?'Hover':'Select')];if(se||!0===te){if(!ne[ee]){var oe=document.createElementNS(this.graph.ns,'path');this.setMarkerStyleTo(oe,this.markerFamilies[this.selectionType][this.getMarkerCurrentFamily(re)]),this['domMarker'+(ie?'Hover':'Select')][ee]=oe,this.groupMarkerSelected.appendChild(oe)}else oe=ne[ee];var le,de;'x_equally_separated'==this.mode?(le=this._xDataToUse[ae].x+re*this._xDataToUse[ae].dx,de=this.data[ae][re]):(le=this.data[ae][2*re],de=this.data[ae][2*re+1]),le=this.getX(le),de=this.getY(de),oe.setAttribute('d','M '+le+' '+de+' '+this.getMarkerPath(this.markerFamilies[this.selectionType][this.getMarkerCurrentFamily(re)],1)),ie&&this.markerHovered++}else if((!se||!1===te)&&(ie&&this.domMarkerHover[ee]&&!this.domMarkerSelect[ee]||this.domMarkerSelect[ee])){if(!ne[ee])return;this.groupMarkerSelected.removeChild(ne[ee]),delete ne[ee],ie&&this.markerHovered--}return se}markersOffHover(){for(var ee in this.domMarkerHover)this.toggleMarker(ee.split(','),!1,!0);return this}markersOffSelect(){for(var ee in this.domMarkerSelect)this.toggleMarker(ee.split(','),!1,!1);return this}onClickOnMarker(ee,te){var ie=this.toggleMarker(te);ie&&this.options.onSelectMarker&&this.options.onSelectMarker(te,!!this.infos&&(this.infos[te[0]]||!1)),!ie&&this.options.onUnselectMarker&&this.options.onUnselectMarker(te,!!this.infos&&(this.infos[te[0]]||!1)),this.options.onToggleMarker&&this.options.onToggleMarker(te,!!this.infos&&(this.infos[te[0]]||!1),ie)}_getMarkerIndexFromEvent(ee){var te=this.graph._getXY(ee);return this.searchIndexByPxXY(te.x-this.graph.getPaddingLeft(),te.y-this.graph.getPaddingTop())}onMouseWheel(){}empty(){for(var ee=0,te=this.lines.length;ee<te;ee++)this.groupLines.removeChild(this.lines[ee]);return this.lines=[],this}select(ee){return ee=ee||'selected',this.selected='unselected'!==ee,this.areMarkersShown()||this.areMarkersShown(ee)?(this.selectionType=ee,this.draw(!0),this.applyLineStyles()):(this.selectionType=ee,this.applyLineStyles()),this.applyLineStyle(this.getSymbolForLegend()),this}unselect(){return this.selected=!1,this.select('unselected')}degrade(ee,te){var ie=this.graph.newSerie(this.name+'_degraded',te,G.default.SERIE_ZONE);if(this.degradationPx=ee,!!ie)return ie.setData([]),ie.setXAxis(this.getXAxis()),ie.setYAxis(this.getYAxis()),this.degradationSerie=ie,ie}drawInit(){var ee,te;if(this.currentLineId=0,this.counter=0,this._drawn=!0,this.currentLine='',this.degradationPx?(ee=B(this),te=ee[1],ee=ee[0],this._dataToUse=ee,this._xDataToUse=te):(this._dataToUse=this.data,this._xDataToUse=this.xData),this._optimizeMonotoneous=this.isXMonotoneous(),this.optimizeMonotoneousDirection=this.XMonotoneousDirection()&&!this.getXAxis().isFlipped()||!this.XMonotoneousDirection()&&this.getXAxis().isFlipped(),this._optimizeBreak,this._optimizeBuffer,this._slotToUse=!1,this.options.useSlots&&this.slots&&0<this.slots.length){if(this.isFlipped())var ie=this.graph.getDrawingHeight()*(this.maxY-this.minY)/(this.getYAxis().getCurrentMax()-this.getYAxis().getCurrentMin());else var ie=this.graph.getDrawingWidth()*(this.maxX-this.minX)/(this.getXAxis().getCurrentMax()-this.getXAxis().getCurrentMin());for(var re=0,ae=this.slots.length;re<ae;re++)if(ie<this.slots[re]){this._slotToUse=this.slotsData[this.slots[re]],this._slotId=re;break}}this.detectedPeaks=[],this.lastYPeakPicking=!1}removeLinesGroup(){this._afterLinesGroup=this.groupLines.nextSibling,this.groupMain.removeChild(this.groupLines)}insertLinesGroup(){if(!this._afterLinesGroup)throw'Could not find group after lines to insertion.';this.groupMain.insertBefore(this.groupLines,this._afterLinesGroup),this._afterLinesGroup=!1}removeExtraLines(){for(var ee=this.currentLineId,te=this.lines.length;ee<te;ee++)this.groupLines.removeChild(this.lines[ee]);this.lines.splice(this.currentLineId,te-this.currentLineId),this.currentLineId=0}detectPeaks(ee,te){this.options.autoPeakPicking&&(this.options.lineToZero?this.detectedPeaks.push([te,ee]):this.lastYPeakPicking?te>=this.lastYPeakPicking[0]&&this.lookForMaxima||te<=this.lastYPeakPicking[0]&&this.lookForMinima?this.lastYPeakPicking=[te,ee]:(te<this.lastYPeakPicking[0]&&this.lookForMaxima||te>this.lastYPeakPicking[0]&&this.lookForMinima)&&(this.lookForMinima?(this.lookForMinima=!1,this.lookForMaxima=!0):(this.lookForMinima=!0,this.lookForMaxima=!1,this.detectedPeaks.push(this.lastYPeakPicking),this.lastYPeakPicking=!1),this.lastYPeakPicking=[te,ee]):this.lastYPeakPicking=[te,ee])}draw(ee){if(ee||this.hasDataChanged()){this.drawInit();var te=this._dataToUse,ie=this._xDataToUse,re=this._slotToUse;this.removeLinesGroup(),this.eraseMarkers(),this.lookForMaxima=!0,this.lookForMinima=!1,this.error&&this.errorDrawInit(),this._draw_slot()||('x_equally_separated'==this.mode?this._draw_equally_separated():this._draw_standard()),this.error&&this.errorDraw(),this.makePeakPicking(),this.removeExtraLines(),this.insertMarkers(),this.insertLinesGroup()}for(var ae in this.domMarkerHover)this.toggleMarker(ae.split(','),!1,!0);for(var ae in this.domMarkerSelect)this.toggleMarker(ae.split(','),!1,!1);this.applyLineStyle(this.getSymbolForLegend()),this.hasStyleChanged(this.selectionType)&&this.updateStyle(),this.dataHasChanged(!1)}_draw_standard(){var ee=this,te=this._dataToUse,re=0,ae=te.length,pe=!1,ue=!1,me=this.getXAxis(),ye=this.getYAxis(),fe=me.getCurrentMin(),be=ye.getCurrentMin(),Ae=me.getCurrentMax(),ke=ye.getCurrentMax(),ie,se,ne,oe,le,de,ne,ge,ce,he,xe,Me,_e,Se,Pe,Ce,ve,Le,we,Te=0,Ee=1,De=!1,Ye=!1,Xe;for(this.isFlipped()&&(Te=1,Ee=0),re=0;re<ae;re++){for(ie=!1,this.counter1=re,this.currentLine='',se=0,ne=0,oe=te[re].length,se=0;se<oe;se+=2){if(le=te[re][se+Te],de=te[re][se+Ee],le<fe&&pe<fe||le>Ae&&pe>Ae||(de<be&&ue<be||de>ke&&ue>ke)&&!this.options.lineToZero){pe=le,ue=de,Ye=!0;continue}if(this.counter2=se/2,this.markersShown()&&this.getMarkerCurrentFamily(this.counter2),he=this.getX(le),xe=this.getY(de),he!=ge||xe!=ce){if(De=le<fe||de<be||le>Ae||de>ke,this.options.lineToZero){if(De=le<fe||le>Ae,De)continue;}else if(De||Ye){!1!==pe&&!1!==ue||Ye?(Xe=[],Me=(le-fe)/(le-pe),_e=de-Me*(de-ue),Se=(le-Ae)/(le-pe),Pe=de-Se*(de-ue),Ce=(de-be)/(de-ue),ve=le-Ce*(le-pe),Le=(de-ke)/(de-ue),we=le-Le*(le-pe),1>Me&&0<Me&&!1!==_e&&_e<ke&&_e>be&&Xe.push([fe,_e]),1>Se&&0<Se&&!1!==Pe&&Pe<ke&&Pe>be&&Xe.push([Ae,Pe]),1>Ce&&0<Ce&&!1!==ve&&ve<Ae&&ve>fe&&Xe.push([ve,be]),1>Le&&0<Le&&!1!==we&&we<Ae&&we>fe&&Xe.push([we,ke]),0<Xe.length?De?Ye?2==Xe.length&&(this._createLine(),this._addPoint(this.getX(Xe[0][0]),this.getY(Xe[0][1]),Xe[0][0],Xe[0][1],!1,!1,!1),this._addPoint(this.getX(Xe[1][0]),this.getY(Xe[1][1]),Xe[0][0],Xe[0][1],!1,!1,!1)):(1<Xe.length&&(console.error('Programmation error. Please e-mail me.'),console.log(Xe,we,ve,Pe,_e,de,be,ke,ue)),this._addPoint(this.getX(Xe[0][0]),this.getY(Xe[0][1]),Xe[0][0],Xe[0][1],!1,!1,!1)):(1<Xe.length&&(console.error('Programmation error. Please e-mail me.'),console.log(Xe,we,ve,Pe,_e,de,be,ke,ue)),this._createLine(),this._addPoint(this.getX(Xe[0][0]),this.getY(Xe[0][1]),Xe[0][0],Xe[0][1],!1,!1,!1),this._addPoint(he,xe,pe,ue,!1,!1,!0)):!De&&this._addPoint(he,xe,pe,ue,se,!1,!1)):(ge=he,ce=xe,pe=le,ue=de),ge=he,ce=xe,pe=le,ue=de,Ye=De;continue}if(isNaN(he)||isNaN(xe)){0<this.counter&&this._createLine();continue}if(this._optimize_before(he,xe)){if(this._addPoint(he,xe,le,de,se,!1,!0),this.detectPeaks(le,de),!this._optimize_after(he,xe)){ie=!0;break}ge=he,ce=xe,pe=le,ue=de}}}if(this._createLine(),ie)break}if(this._tracker){this._trackerDom&&this._trackerDom.remove();var Ie=this.groupLines.cloneNode(!0);this.groupMain.appendChild(Ie);for(var re=0,ae=Ie.children.length;re<ae;re++)Ie.children[re].setAttribute('stroke','transparent'),Ie.children[re].setAttribute('stroke-width','25px'),Ie.children[re].setAttribute('pointer-events','stroke');ee._trackerDom=Ie,ee.groupMain.addEventListener('mousemove',function(Ne){var ze=ee.graph._getXY(Ne),He=ee.handleMouseMove(!1,!1);ee._trackingCallback(ee,He,ze.x,ze.y)}),ee.groupMain.addEventListener('mouseleave',function(){ee._trackingOutCallback(ee)})}return this}_draw_slot(){var ee=this;return!!this._slotToUse&&(this._slotToUse.done?this._slotToUse.done(function(te){ee.drawSlot(te,ee._slotId)}):this.drawSlot(this._slotToUse,ee._slotId),!0)}_draw_equally_separated(){for(var ee=0,te=this._dataToUse,ie=this._xDataToUse,re=te.length,ae,se,ne,oe,le,de,pe,ue;ee<re;ee++){for(ae=0,se=0,ne=te[ee].length,this.counter1=ee;ae<ne;ae+=1)if((this.counter2=ae,this.markersShown()&&this.getMarkerCurrentFamily(se),this.isFlipped()?(le=ie[ee].x+ae*ie[ee].dx,oe=te[ee][ae],pe=this.getX(le),de=this.getY(oe)):(oe=ie[ee].x+ae*ie[ee].dx,le=te[ee][ae],de=this.getX(oe),pe=this.getY(le)),!!this._optimize_before(de,pe))&&(this._addPoint(de,pe,oe,le,ae,!1,!1),!this._optimize_after(de,pe))){ue=!0;break}if(this._createLine(),ue)break}}_optimize_before(ee,te){return!this._optimizeMonotoneous||(this.optimizeMonotoneousDirection&&ee<this.getXAxis().getMathMinPx()||!this.optimizeMonotoneousDirection&&ee>this.getXAxis().getMathMaxPx()?(this._optimizeBuffer=[ee,te],!1):(this._optimizeBuffer&&(this._addPoint(this._optimizeBuffer[0],this._optimizeBuffer[1],!1,!1,!1,!1,!1),this._optimizeBuffer=!1),!0))}_optimize_after(ee){return!this._optimizeMonotoneous||(this.optimizeMonotoneousDirection&&ee>this.getXAxis().getMathMaxPx()||!this.optimizeMonotoneousDirection&&ee<this.getXAxis().getMathMinPx()?!1:!0)}hidePeakPicking(ee){this._hidePeakPickingLocked||(this._hidePeakPickingLocked=ee),W(this)}showPeakPicking(ee){this._hidePeakPickingLocked&&!ee||R(this)}killPeakPicking(){if(this.picks)for(var ee=0,te=this.picks.length;ee<te;ee++)this.picks[ee].kill()}kill(){super.kill(),this.killPeakPicking()}getMarkerCurrentFamily(ee){if(this.markerPoints&&this.markerPoints[this.selectionType]){var te;for(var ie=0;ie<this.markerPoints[this.selectionType].length&&this.markerPoints[this.selectionType][ie][0]<=ee;ie++)this.markerPoints[this.selectionType][ie][1]>=ee&&(this.markerCurrentFamily=this.markerPoints[this.selectionType][ie][2],te=this.markerFamilies[this.selectionType][this.markerCurrentFamily]);return!!te&&(this.getMarkerDom(te),this.markerCurrentFamily)}}drawSlot(ee,te){var ie=0,re,ae,se,ne;if(this.isFlipped())var oe=this.slots[te]/(this.maxY-this.minY),le=Math.floor((this.getYAxis().getCurrentMin()-this.minY)*oe),de=Math.ceil((this.getYAxis().getCurrentMax()-this.minY)*oe);else var oe=this.slots[te]/(this.maxX-this.minX),le=Math.floor((this.getXAxis().getCurrentMin()-this.minX)*oe),de=Math.ceil((this.getXAxis().getCurrentMax()-this.minX)*oe);for(ne=le;ne<=de;ne++)ee[ne]&&(this.isFlipped()?(ae=Math.floor(this.getY(ee[ne].x)),se=this.getX(ee[ne].max),this._addPoint(this.getX(ee[ne].start),ae,!1,!1,!1,!1,!1),this._addPoint(se,ae,!1,!1,!1,!0,!1),this._addPoint(this.getX(ee[ne].min),ae,!1,!1,!1,!1,!1),this._addPoint(this.getX(ee[ne].stop),ae,!1,!1,!1,!0,!1)):(re=Math.floor(this.getX(ee[ne].x)),se=this.getY(ee[ne].max),this.options.autoPeakPicking&&allY.push([ee[ne].max,ee[ne].x]),this._addPoint(re,this.getY(ee[ne].start),!1,!1,!1,!1,!1),this._addPoint(re,se,!1,!1,!1,!0,!1),this._addPoint(re,this.getY(ee[ne].min),!1,!1,!1,!1,!1),this._addPoint(re,this.getY(ee[ne].stop),!1,!1,!1,!0,!1)));this._createLine(),ie++}setMarkerStyleTo(ee,te){if(!ee||!te)throw console.trace(),'Cannot set marker style. DOM does not exist.';ee.setAttribute('fill',te.fillColor||'transparent'),ee.setAttribute('stroke',te.strokeColor||this.getLineColor()),ee.setAttribute('stroke-width',te.strokeWidth||1)}hideTrackingMarker(){this.marker.setAttribute('display','none'),this.markerLabel.setAttribute('display','none'),this.markerLabelSquare.setAttribute('display','none')}_addPoint(ee,te,ie,re,ae,se,ne){var oe;if(!(isNaN(ee)||isNaN(te))){if(0==this.counter?this.currentLine='M ':this.options.lineToZero||se?this.currentLine+='M ':this.currentLine+='L ',this.currentLine+=ee,this.currentLine+=' ',this.currentLine+=te,this.currentLine+=' ',this.options.lineToZero&&void 0!==(oe=this.getYAxis().getPos(0))&&(this.currentLine+='L ',this.currentLine+=ee,this.currentLine+=' ',this.currentLine+=oe,this.currentLine+=' '),this.error&&this.errorAddPoint(ae,ie,re,ee,te),!this.markerPoints)return void this.counter++;let le;this.markersShown()&&!1!==ne&&(le=this.markerFamilies[this.selectionType||'unselected'])&&V(this,le[this.markerCurrentFamily],ee,te,this.markersDom.get(le[this.markerCurrentFamily])),this.counter++}}_createLine(){var ee=this.currentLineId++,te;return this.lines[ee]?te=this.lines[ee]:(te=document.createElementNS(this.graph.ns,'path'),this.applyLineStyle(te),this.groupLines.appendChild(te),this.lines[ee]=te),0==this.counter?te.setAttribute('d',''):te.setAttribute('d',this.currentLine),this.currentLine='M ',this.counter=0,te}applyLineStyles(){for(var ee=0;ee<this.lines.length;ee++)this.applyLineStyle(this.lines[ee])}applyLineStyle(ee){ee.setAttribute('stroke',this.getLineColor()),ee.setAttribute('stroke-width',this.getLineWidth()),this.getLineDashArray()?ee.setAttribute('stroke-dasharray',this.getLineDashArray()):ee.removeAttribute('stroke-dasharray'),ee.setAttribute('fill','none')}updateStyle(){this.applyLineStyles(),this.setLegendSymbolStyle(),this.styleHasChanged(!1)}getMarkerPath(ee,te){var ie=ee.zoom||1,te=te||0,re=[];switch(ee.type){case 2:re=['m',-2,-2,'l',4,4,'m',-4,0,'l',4,-4];break;case 3:re=['m',-2,0,'l',4,0,'m',-2,-2,'l',0,4];break;case 4:re=['m',-1,-1,'l',2,0,'l',-1,2,'z'];break;default:case 1:re=['m',-2,-2,'l',4,0,'l',0,4,'l',-4,0,'z'];}if((1==ie||!ie)&&!te)return re.join(' ');if(re){for(var ae=0,se=re.length;ae<se;ae++)'number'==typeof re[ae]&&(re[ae]*=ie+te);return re.join(' ')}}getMarkerDom(ee){var te=this;if(!this.markersDom.has(ee)){var ie=document.createElementNS(this.graph.ns,'path');this.setMarkerStyleTo(ie,ee),this.markersDom.set(ee,{dom:ie,path:''}),ie.addEventListener('mouseover',function(re){var ae=te._getMarkerIndexFromEvent(re);te.onMouseOverMarker(re,ae)}),ie.addEventListener('mouseout',function(re){var ae=te._getMarkerIndexFromEvent(re);te.onMouseOutMarker(re,ae)}),ie.addEventListener('click',function(re){var ae=te._getMarkerIndexFromEvent(re);te.onClickOnMarker(re,ae)})}return ee.dom}getMarkerDomIndependant(ee,te,ie){var re=this,ae=ee+','+te;if(!this.independantMarkers[ae]){var se=document.createElementNS(this.graph.ns,'path');this.setMarkerStyleTo(se,ie),se.addEventListener('mouseover',function(ne){re.onMouseOverMarker(ne,[te,ee])}),se.addEventListener('mouseout',function(ne){re.onMouseOutMarker(ne,[te,ee])}),se.addEventListener('click',function(ne){re.onClickOnMarker(ne,[te,ee])}),this.independantMarkers[ae]=se}return this.groupMarkers.appendChild(this.independantMarkers[ae]),this.independantMarkers[ae]}searchIndexByPxXY(ee,te){var ie=!1,re=!1,ae,se=this._xDataToUse,ne,oe;if('x_equally_separated'==this.mode)for(var le=0,de=this.data.length;le<de;le++)for(var pe=0,ue=this.data[le].length;pe<ue;pe+=1)ne=se[le].x+pe*se[le].dx,oe=this.data[le][pe],ae=Math.pow(this.getX(ne)-ee,2)+Math.pow(this.getY(oe)-te,2),(!ie||ae<ie)&&(ie=ae,re=[pe,le]);else for(var le=0,de=this.data.length;le<de;le++)for(var pe=0,ue=this.data[le].length;pe<ue;pe+=2)ne=this.data[le][pe],oe=this.data[le][pe+1],ae=Math.pow(this.getX(ne)-ee,2)+Math.pow(this.getY(oe)-te,2),(!ie||ae<ie)&&(ie=ae,re=[pe/2,le]);return re}searchClosestValue(ee){var te;for(var ie=0;ie<this.data.length;ie++){if(ee<=this.data[ie][this.data[ie].length-2]&&ee>=this.data[ie][0])te=this._searchBinary(ee,this.data[ie],!1);else if(ee>=this.data[ie][this.data[ie].length-2]&&ee<=this.data[ie][0])te=this._searchBinary(ee,this.data[ie],!0);else continue;return{dataIndex:ie,xMin:this.data[ie][te],xMax:this.data[ie][te+2],yMin:this.data[ie][te+1],yMax:this.data[ie][te+3],xBeforeIndex:te/2,xAfterIndex:te/2+1,xBeforeIndexArr:te,xClosest:(Math.abs(this.data[ie][te+2]-ee)<Math.abs(this.data[ie][te]-ee)?te+2:te)/2}}}handleMouseMove(ee,te){var ie=ee||this.getXAxis().getMouseVal(),re=this.searchClosestValue(ie);if(re){var ae=(ie-re.xMin)/(re.xMax-re.xMin),se=(1-ae)*re.yMin+ae*re.yMax;if(te&&this.options.trackMouse){if(void 0==re.xMin)return!1;var ne=this.getX(this.getFlip()?se:ie),oe=this.getY(this.getFlip()?ie:se);switch(this.marker.setAttribute('display','block'),this.marker.setAttribute('cx',ne),this.marker.setAttribute('cy',oe),this.markerLabel.setAttribute('display','block'),this.markerLabelSquare.setAttribute('display','block'),this.options.trackMouseLabel){case!1:break;default:this.markerLabel.textContent=this.options.trackMouseLabel.replace('<x>',ie.toFixed(this.options.trackMouseLabelRouding)).replace('<y>',se.toFixed(this.options.trackMouseLabelRouding));}this.markerLabel.setAttribute('x',ne+5),this.markerLabel.setAttribute('y',oe-5),this.markerLabelSquare.setAttribute('x',ne+5),this.markerLabelSquare.setAttribute('y',oe-5-this.graph.options.fontSize),this.markerLabelSquare.setAttribute('width',this.markerLabel.getComputedTextLength()+2),this.markerLabelSquare.setAttribute('height',this.graph.options.fontSize+2)}return{xBefore:re.xMin,xAfter:re.xMax,yBefore:re.yMin,yAfter:re.yMax,trueX:ie,interpolatedY:se,xBeforeIndex:re.xBeforeIndex,xIndexClosest:re.xClosest}}}_searchBinary(ee,te,ie){var re=0,ae=te.length,se=ae-2;if(te[re]==ee)return re;if(te[se]==ee)return se;for(var oe=0,ne;!0;){if(oe++,100<oe)throw'Error loop';if(ne=(re+se)/2,ne-=ne%2,ne==re||te[ne]==ee)return ne;te[ne]<=ee?ie?se=ne:re=ne:te[ne]>ee&&(ie?re=ne:se=ne)}}getMax(ee,te){var ie=Math.min(ee,te),re=Math.max(ee,te),ae=this.searchClosestValue(ie),se=this.searchClosestValue(re),le=-(1/0),ne,oe,de,pe;if(ae||(ie=this.minX,ae=this.searchClosestValue(ie)),se||(re=this.maxX,se=this.searchClosestValue(re)),!ae||!se)return-(1/0);for(ne=ae.dataIndex;ne<=se.dataIndex;ne++)for(de=ne==ae.dataIndex?ae.xBeforeIndexArr:0,pe=ne==se.dataIndex?se.xBeforeIndexArr:this.data[ne].length,oe=de;oe<=pe;oe+=2)le=Math.max(le,this.data[ne][oe+1]);return le}getMin(ee,te){var ie=Math.min(ee,te),re=Math.max(ee,te),ae=this.searchClosestValue(ie),se=this.searchClosestValue(re),le=1/0,ne,oe,de,pe;if(ae||(ie=this.minX,ae=this.searchClosestValue(ie)),se||(re=this.maxX,se=this.searchClosestValue(re)),!ae||!se)return 1/0;for(ne=ae.dataIndex;ne<=se.dataIndex;ne++)for(de=ne==ae.dataIndex?ae.xBeforeIndexArr:0,pe=ne==se.dataIndex?se.xBeforeIndexArr:this.data[ne].length,oe=de;oe<=pe;oe+=2)le=Math.min(le,this.data[ne][oe+1]);return le}setStyle(ee,te='unselected'){this.styles[te]=ee,this.styleHasChanged(te)}setLineStyle(ee,te='unselected',ie){return te=te,this.styles[te]=this.styles[te]||{},this.styles[te].lineStyle=ee,ie&&this.setLineStyle(ee,'selected'),this.styleHasChanged(te),this}getLineStyle(ee){return this.getStyle(ee).lineStyle}getLineDashArray(ee=this.selectionType||'unselected'){switch(this.getStyle(ee).lineStyle){case 2:return'1, 1';break;case 3:return'2, 2';break;case 3:return'3, 3';break;case 4:return'4, 4';break;case 5:return'5, 5';break;case 6:return'5 2';break;case 7:return'2 5';break;case 8:return'4 2 4 4';break;case 9:return'1,3,1';break;case 10:return'9 2';break;case 11:return'2 9';break;case!1:case 1:return!1;break;default:return this.styles[ee].lineStyle;}this.styleHasChanged(ee)}getStyle(ee=this.selectionType||'unselected'){return this.styles[ee]}extendStyles(){for(var ee in this.styles){var te=this.styles[ee];te&&(this.styles[ee]=Q.extend(!0,{},this.styles.unselected,te))}}extendStyle(ee,te){var ie=this.styles[ee];this.styles[ee]=Q.extend(!0,{},this.styles[te||'unselected'],ie||{}),this.styles[ee].markers.map(function(re){re.dom&&(re.dom='')}),this._recalculateMarkerPoints(ee,this.styles[ee].markers),this.styleHasChanged(ee)}setLineWidth(ee,te,ie){return te=te||'unselected',this.styles[te]=this.styles[te]||{},this.styles[te].lineWidth=ee,ie&&this.setLineWidth(ee,'selected'),this.styleHasChanged(te),this}getLineWidth(ee){return this.getStyle(ee).lineWidth||1}setLineColor(ee,te,ie){return te=te||'unselected',this.styles[te]=this.styles[te]||{},this.styles[te].lineColor=ee,ie&&this.setLineColor(ee,'selected'),this.styleHasChanged(te),this}getLineColor(ee){return this.getStyle(ee).lineColor||'black'}showMarkers(ee,te){return ee=ee||'unselected',this.styles[ee]=this.styles[ee]||{},this.styles[ee].showMarkers=!0,te&&this._drawn?this.draw(!0):this.styleHasChanged(ee),this}hideMarkers(ee,te){return ee=ee||'unselected',this.styles[ee].showMarkers=!1,te&&this._drawn?this.draw(!0):this.styleHasChanged(ee),this}markersShown(ee){return!1!==this.getStyle(ee).showMarkers}areMarkersShown(){return this.markersShown.apply(this,arguments)}isMarkersShown(){return this.markersShown.apply(this,arguments)}setMarkers(ee,te,ie){return this.styles[te||'unselected']=this.styles[te||'unselected']||{},this.showMarkers(te,!1),Array.isArray(ee)||'object'!=typeof ee?!ee&&(ee=[{type:1,zoom:1,points:'all'}]):ee=[ee],this.styles[te||'unselected'].markers=ee,ie&&(this.styles.selected.markers=Q.extend(!0,{},ee)),this._recalculateMarkerPoints(te,ee),this.styleHasChanged(te),this.dataHasChanged(!0),this}setMarkersPoints(ee,te,ie){this._extendMarkers('points',ee,te,ie,!0)}setMarkersColor(ee,te,ie){this._extendMarkers('color',ee,te,ie)}setMarkersType(ee,te,ie){this._extendMarkers('type',ee,te,ie)}setMarkersZoom(ee,te,ie){this._extendMarkers('zoom',ee,te,ie)}setMarkersStrokeColor(ee,te,ie){this._extendMarkers('strokeColor',ee,te,ie)}setMarkersStrokeWidth(ee,te,ie){this._extendMarkers('strokeWidth',ee,te,ie)}setMarkersFillColor(ee,te,ie){this._extendMarkers('fillColor',ee,te,ie)}_extendMarkers(ee,te,ie,re,ae){(ie=ie||0,re=re||'unselected',this.styles[re]&&this.styles[re].markers)&&(this.styles[re].markers[ie][ee]=te,ae&&this._recalculateMarkerPoints(re,this.styles[re].markers),this.markersDom[this.styles[re].markers[ie]]&&this.setMarkerStyleTo(this.markersDom[this.styles[re].markers[ie]].dom,this.styles[re].markers[ie]))}_recalculateMarkerPoints(ee,te){var ie=[];ie.push([0,1/0,null]);for(var re=0,ae=te.length;re<ae;re++){te[re].markerPath=this.getMarkerPath(te[re]),te[re].points||(te[re].points='all'),Array.isArray(te[re].points)||(te[re].points=[te[re].points]);for(var se=0,ne=te[re].points.length;se<ne;se++)'all'==te[re].points[se]?ie.push([0,1/0,re]):Array.isArray(te[re].points[se])?ie.push([te[re].points[se][0],te[re].points[se][1],re]):ie.push([te[re].points[se],te[re].points[se],re])}this.markerFamilies[ee||'unselected']=te,ie.sort(function(oe,le){return oe[0]-le[0]||(null==oe[2]?-1:1)}),this.markerPoints[ee||'unselected']=ie}insertMarkers(ee){if(this.markerFamilies&&this.markerFamilies[ee||this.selectionType]&&!this.options.markersIndependant)for(var te=0,ie=this.markerFamilies[ee||this.selectionType].length;te<ie;te++)if(this.markersDom.has(this.markerFamilies[ee||this.selectionType][te])){let re=this.markersDom.get(this.markerFamilies[ee||this.selectionType][te]);re.dom.setAttribute('d',re.path),this.groupMarkers.appendChild(re.dom),this.currentMarkersSelectionType=this.selectionType}}getMarkerForLegend(){if(this.markerPoints&&this.markerPoints[this.selectionType]){if(!this.markerForLegend){var ee=document.createElementNS(this.graph.ns,'path');this.setMarkerStyleTo(ee,this.markerFamilies[this.selectionType][0]),ee.setAttribute('d','M 14 0 '+this.getMarkerPath(this.markerFamilies[this.selectionType][0])),this.markerForLegend=ee}return this.markerForLegend}}eraseMarkers(){var ee=this;if(this.options.markersIndependant){for(var te in this.independantMarkers)ee.groupMarkers.removeChild(this.independantMarkers[te]);this.independantMarkers={}}else this.currentMarkersSelectionType&&(this.markersDom.forEach(function(ie){ie.dom&&ie.dom.parentNode===ee.groupMarkers&&(ee.groupMarkers.removeChild(ie.dom),ie.path='')}),this.currentMarkersSelectionType=!1)}showImpl(){this.showPeakPicking()}hideImpl(){this.hidePeakPicking()}XIsMonotoneous(){return this.xmonotoneous=!0,this}isXMonotoneous(){return this.xmonotoneous||!1}XMonotoneousDirection(){return this.data&&this.data[0]&&0<this.data[0][2]-this.data[0][0]}makePeakPicking(){var ee=this,te=this.detectedPeaks,ie,re,ae=[],re,se=0,ne=te.length,oe,le,de,pe,ue=ee.graph.selectedShapes.map(function(ge){return ge.getProp('xval')});for(te.sort(function(ge,ce){return ce[0]-ge[0]}),le=0;se<ne;se++)if((ie=te[se][1],re=ee.getX(ie),oe=0,de=ee.getY(te[se][0]),!(re<ee.getXAxis().getMinPx()||re>ee.getXAxis().getMaxPx()))&&!(!ee.options.autoPeakPickingAllowAllY&&(de>ee.getYAxis().getMinPx()||de<ee.getYAxis().getMaxPx()))){for(;oe<ae.length&&!(Math.abs(ae[oe]-re)<ee.options.autoPeakPickingMinDistance);oe++);if(!(oe<ae.length)){if(-1<(pe=ue.indexOf(ie))){ae.push(re);continue}if(!ee.picks[le])return;for(0>this.getYAxis().getPx(te[se][0])-20?(ee.picks[le].setLabelPosition({x:ie,y:'5px'}),ee.picks[le].setLabelBaseline('hanging')):(ee.picks[le].setLabelBaseline('no-change'),ee.picks[le].setLabelPosition({x:ie,y:te[se][0],dy:'-15px'})),ee.picks[le].setProp('xval',ie),ee.options.autoPeakPickingFormat?ee.picks[le].setLabelText(ee.options.autoPeakPickingFormat.call(ee.picks[le],ie,le)):ee.picks[le].setLabelText(Math.round(1000*ie)/1000+''),ee.picks[le].makeLabels(),le++;ee.picks[le]&&ee.picks[le].isSelected();)le++;if(ae.length==ee.options.autoPeakPickingNb)break}}}}Q.mix($,K.default),E.default=$})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(4),S(3)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var X})(this,function(E,Y,X){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I=function(V){return V&&V.__esModule?V:{default:V}}(Y),N=function(V){if(V&&V.__esModule)return V;var B={};if(null!=V)for(var W in V)Object.prototype.hasOwnProperty.call(V,W)&&(B[W]=V[W]);return B.default=V,B}(X);class F extends I.default{constructor(){super(...arguments)}setData(O,V,B){function W(fe){var be=Object.prototype.toString.call(fe);return'[object Array]'===be||'[object Int16Array]'===be||'[object Int32Array]'===be||'[object Float32Array]'===be||'[object Float64Array]'===be||'[object Uint8Array]'===be||'[object Uint16Array]'===be||'[object Uint32Array]'===be||'[object Int8Array]'===be}var R=0,V=V||!1,B=B||'float',Q=0,G,U,Z,K;this.minX=Number.MAX_SAFE_INTEGER,this.maxX=Number.MIN_SAFE_INTEGER,this.minY=Number.MAX_SAFE_INTEGER,this.maxY=Number.MIN_SAFE_INTEGER;var J=W(O),$=[];if(!J&&'object'==typeof O)O=[O];else if(J&&!W(O[0])&&'object'!=typeof O[0])O=[O],V=!0;else if(J&&W(O[0])&&2<O[0].length)V=!0;else if(!J)return void N.throwError('Data is not an array');var ee=W(O[0]),te=W(O[0][0]);if(!ee||V||te||(O=[O]),ee)for(var ie=0,re=O.length;ie<re;ie++){Z=this._addData(B,V?O[ie].length:2*O[ie].length),$.push(Z),R=0;for(var ae=0,se=O[ie].length;ae<se;ae++)V?(Z[R]=O[ie][ae],this[0==ae%2?'_checkX':'_checkY'](Z[R]),R++,Q+=ae%2?1:0):(Z[R]=O[ie][ae][0],this._checkX(Z[R]),R++,Z[R]=O[ie][ae][1],this._checkY(Z[R]),R++,Q++)}else if('object'==typeof O[0])if(O[0].x)for(var ie=0,se=O.length;ie<se;ie++){var Z=this._addData(B,2*O[ie].x.length);$.push(Z),R=0;for(var ae=0,ne=O[0].x.length;ae<ne;ae++)Z[R]=O[ie].x[ae],R++,Z[R]=O[ie].y[ae],R++,this._checkX(O[ie].x[ae]),this._checkY(O[ie].y[ae]),Q++}else{this.mode='x_equally_separated';var oe=0,le=[],$=[],re=0,de;if(!O[0].y)return console.log(O),void N.throwError('No y data');for(var ie=0,se=O.length;ie<se;ie++)oe+=O[ie].y.length,K=0!=ie&&(!O[ie+1]||O[ie].x+O[ie].dx*O[ie].y.length==O[ie+1].x),K||($.push(this._addData(B,oe)),le.push(oe),oe=0);this.xData=[],oe=0,re=0,R=0;for(var ie=0,se=O.length;ie<se;ie++){G=O[ie].x,U=O[ie].dx,this.xData.push({x:G,dx:U}),de=O[ie].y.length,this._checkX(G),this._checkX(G+U*de);for(var ae=0;ae<de;ae++)$[re][R]=O[ie].y[ae],this._checkY($[re][R]),R++,Q++;oe+=O[ie].y.length,le[re]==oe&&(re++,oe=0,R=0)}}var pe=(this.maxX-this.minX)/this.graph.getDrawingWidth(),ue=[],ge=4*this.graph.getDrawingWidth(),ce=Q/4,ge=this.graph.getDrawingWidth(),ce=Q;if(this.data=$,0<ge){for(;ge<ce;)ue.push(ge),ge*=4;this.slots=ue,this.options.useSlots&&this.calculateSlots()}if(this.isFlipped()){var he=this.maxX,xe=this.maxY,me=this.minX,ye=this.minY;this.maxX=xe,this.maxY=he,this.minX=ye,this.minY=me}return this.dataHasChanged(),this.graph.updateDataMinMaxAxes(),this}_addData(O,V){switch(O){case'int':var B=4*V;break;case'float':var B=8*V;}var W=new ArrayBuffer(B);switch(O){case'int':return new Int32Array(W);break;default:case'float':return new Float64Array(W);}}clearData(){return this.setData([]),this}getData(){return this.data}setOptions(O){this.options=O||{}}setOption(O,V){this.options[O]=V}kill(O){return this.graph.removeSerieFromDom(this),this.graph._removeSerie(this),this.graph.legend&&!O&&this.graph.legend.update(),this.graph=void 0,this}hide(O){if(this.hidden=!0,this.groupMain.setAttribute('display','none'),this.getSymbolForLegend().setAttribute('opacity',0.5),this.getTextForLegend().setAttribute('opacity',0.5),this.hideImpl(),O){var V=this.graph.getShapesOfSerie(this);for(var B=0,W=V.length;B<W;B++)V[B].hide()}return this.emit('hide'),this}show(O){if(this.hidden=!1,this.groupMain.setAttribute('display','block'),this.getSymbolForLegend().setAttribute('opacity',1),this.getTextForLegend().setAttribute('opacity',1),this.showImpl(),this.draw(!0),O){var V=this.graph.getShapesOfSerie(this);for(var B=0,W=V.length;B<W;B++)V[B].show()}return this.emit('show'),this}hideImpl(){}showImpl(){}toggleDisplay(){return this.isShown()?this.hide():this.show(),this}isShown(){return!this.hidden}getX(O){return(O=this.getXAxis().getPx(O))-O%0.2}getY(O){return(O=this.getYAxis().getPx(O))-O%0.2}isSelected(){return this.selected||'unselected'!==this.selectionType}_checkX(O){this.minX=Math.min(this.minX,O),this.maxX=Math.max(this.maxX,O)}_checkY(O){this.minY=Math.min(this.minY,O),this.maxY=Math.max(this.maxY,O)}getName(){return this.name}autoAxis(){return this.isFlipped()?(this.setXAxis(this.graph.getYAxis()),this.setYAxis(this.graph.getXAxis())):(this.setXAxis(this.graph.getXAxis()),this.setYAxis(this.graph.getYAxis())),this.graph.updateDataMinMaxAxes(),this}setXAxis(O){return this.xaxis='number'==typeof O?this.isFlipped()?this.graph.getYAxis(O):this.graph.getXAxis(O):O,this.graph.updateDataMinMaxAxes(),this}setYAxis(O){return'number'==typeof O?this.xaxis=this.isFlipped()?this.graph.getXAxis(O):this.graph.getYAxis(O):this.yaxis=O,this.graph.updateDataMinMaxAxes(),this}setAxes(){for(var O=0;2>O;O++)arguments[O]&&this[arguments[O].isX()?'setXAxis':'setYAxis'](arguments[O]);return this}getXAxis(){return this.xaxis}getYAxis(){return this.yaxis}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getSymbolForLegend(){if(!this.lineForLegend){var O=document.createElementNS(this.graph.ns,'line');this.applyLineStyle(O),O.setAttribute('x1',5),O.setAttribute('x2',25),O.setAttribute('y1',0),O.setAttribute('y2',0),O.setAttribute('cursor','pointer'),this.lineForLegend=O}return this.lineForLegend}setLegendSymbolStyle(){this.applyLineStyle(this.getSymbolForLegend())}updateStyle(){this.setLegendSymbolStyle(),this.graph.updateLegend()}getTextForLegend(){if(!this.textForLegend){var O=document.createElementNS(this.graph.ns,'text');O.setAttribute('cursor','pointer'),O.textContent=this.getLabel(),this.textForLegend=O}return this.textForLegend}getIndex(){return this.graph.series.indexOf(this)}getLabel(){return this.options.label||this.name}setLabel(O){return this.options.label=O,this.textForLegend&&(this.textForLegend.textContent=O),this.graph.requireLegendUpdate(),this}setFlip(O){return this.options.flip=O,this}getFlip(){return this.options.flip}isFlipped(){return this.options.flip}setLayer(O){return this.options.layer=parseInt(O)||1,this}getLayer(){return this.options.layer||1}setStyle(O,V='unselected'){this.styles[V]=O,this.styleHasChanged(V)}styleHasChanged(O='unselected'){if(this._changedStyles=this._changedStyles||{},!1===O)for(var V in this._changedStyles)this._changedStyles[V]=!1;else this._changedStyles[O||'unselected']=!0;return this.graph.requireLegendUpdate(),this}hasStyleChanged(O){return this._changedStyles=this._changedStyles||{},this._changedStyles[O||'unselected']}dataHasChanged(O){return this._dataHasChanged=void 0===O||O,this}hasDataChanged(){return this._dataHasChanged}setInfo(O,V){return this.infos=this.infos||{},this.infos[O]=V,this}getInfo(O){return(this.infos||{})[O]}setAdditionalData(O){return this.additionalData=O,this}getAdditionalData(){return this.additionalData}select(){return this.selected=!0,this}unselect(){return this.selected=!1,this}enableTracking(O,V){return this._tracker=!0,this._trackingCallback=O,this._trackingOutCallback=V,this}disableTracking(){return this._trackerDom&&(this._trackerDom.remove(),this._trackerDom=null),this._tracker=!1,this._trackingCallback=null,this}allowTrackingLine(O){O=O||{},this.graph.addSerieToTrackingLine(this,O)}getMarkerForLegend(){return!1}get type(){return this._type}getType(){return this._type}set excludedFromLegend(O=!0){this._excludedFromLegend=O}get excludedFromLegend(){return!!this._excludedFromLegend}setDataIndices(O,V){this.categoryIndices=O,this.nbCategories=V}}E.default=F})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(3)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var X})(this,function(E,Y){'use strict';function X(){var O=URL.createObjectURL(new Blob([' ( '+function(){onmessage=function(V){var B=V.data.data,W=V.data.slotNumber,R=V.data.slot,G=V.data.flip,U=V.data.max,Z=V.data.min,Q,K=[];for(var J=0,$=B.length;J<$;J++)for(var ee=0,te=B[J].length;ee<te;ee+=2)Q=Math.floor((B[J][ee]-Z)*(R/(U-Z))),K[Q]=K[Q]||{min:B[J][ee+1],max:B[J][ee+1],start:B[J][ee+1],stop:!1,x:B[J][ee]},K[Q].stop=B[J][ee+1],K[Q].min=Math.min(B[J][ee+1],K[Q].min),K[Q].max=Math.max(B[J][ee+1],K[Q].max);postMessage({slotNumber:W,slot:R,data:K,_queueId:V.data._queueId})}}.toString()+')()'],{type:'application/javascript'}));N=new Worker(O),N.onmessage=function(V){var B=V.data._queueId;delete V.data._queueId,F[B].resolve(V.data.data),delete F[B]}}Object.defineProperty(E,'__esModule',{value:!0}),E.default=function(O){N||X();var V=I.guid();O._queueId=V;var W=new Promise(function(R){B=R}),B;return F[V]={promise:W,resolve:B},N.postMessage(O),F[V].promise};var I=function(V){if(V&&V.__esModule)return V;var B={};if(null!=V)for(var W in V)Object.prototype.hasOwnProperty.call(V,W)&&(B[W]=V[W]);return B.default=V,B}(Y),N,F={}})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(3)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var X})(this,function(E,Y){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var X=function(N){if(N&&N.__esModule)return N;var F={};if(null!=N)for(var O in N)Object.prototype.hasOwnProperty.call(N,O)&&(F[O]=N[O]);return F.default=N,F}(Y);E.default={doErrorDraw:function(I,N,F,O,V,B){N instanceof Array||(N=[N]);var W='y'==I?'getY':'getX',R='y'==I?['top','bottom']:['left','right'],G;if(!(isNaN(V)||isNaN(B)))for(var U=0,Z=N.length;U<Z;U++)N[U]instanceof Array?(G=R[0],this.errorstyles[U].paths[G]+=' M '+V+' '+B,this.errorstyles[U].paths[G]+=this.makeError(I,U,this[W](F+N[U][0]),O,G),G=R[1],this.errorstyles[U].paths[G]+=' M '+V+' '+B,this.errorstyles[U].paths[G]+=this.makeError(I,U,this[W](F-N[U][1]),O,G)):(G=R[0],this.errorstyles[U].paths[G]+=' M '+V+' '+B,this.errorstyles[U].paths[G]+=this.makeError(I,U,this[W](F+N[U]),O,G),G=R[1],this.errorstyles[U].paths[G]+=' M '+V+' '+B,this.errorstyles[U].paths[G]+=this.makeError(I,U,this[W](F-N[U]),O,G))},makeError:function(I,N,F,O,V){var B;switch(this.errorstyles[N].type){case'bar':B='makeBar';break;case'box':B='makeBox';}return this[B+I.toUpperCase()](F,O,this.errorstyles[N][V])},makeBarY:function(I,N,F){if(I&&F){var O=X.isNumeric(F.width)?F.width:10;return' V '+I+' m -'+O/2+' 0 h '+O+' m -'+O/2+' 0 V '+N+' '}},makeBoxY:function(I,N,F){return I&&F?' m 5 0 V '+I+' h -10 V '+N+' m 5 0 ':void 0},makeBarX:function(I,N,F){if(I&&F){var O=X.isNumeric(F.width)?F.width:10;return' H '+I+' m 0 -'+O/2+' v '+O+' m 0 -'+O/2+' H '+N+' '}},makeBoxX:function(I,N,F){return I&&F?' v 5 H '+I+' v -10 H '+N+' v 5 ':void 0},check:function(I,N,F){var O,V;if((this.getType()!=Graph.SERIE_LINE&&this.getType()!=Graph.SERIE_SCATTER||(O=this.data[2*I])&&(V=this.data[2*I+1]))&&void 0!==O){for(var B=0,W=N.length;B<W;B++)Array.isArray(N[B])?(isNaN(N[B][0])||this._checkY(V+N[B][0]),isNaN(N[B][1])||this._checkY(V-N[B][1])):isNaN(N[B])||(this._checkY(V+N[B]),this._checkY(V-N[B]));for(var B=0,W=F.length;B<W;B++)Array.isArray(F[B])?(isNaN(F[B][0])||this._checkX(O-F[B][0]),isNaN(F[B][1])||this._checkX(O+F[B][1])):isNaN(N[B])||(this._checkX(O-F[B]),this._checkX(O+F[B]))}},setDataError:function(I,N){if(this.error=I,!N)for(let F=0,O=this.error.length;F<O;F++)this.error[F]&&this.check(F,this.error[F][0],this.error[F][1]);return this.dataHasChanged(),this.graph.updateDataMinMaxAxes(),this},setErrorStyle:function(I){function N(U){U.dom=document.createElementNS(F.graph.ns,'path'),U.dom.setAttribute('fill',U.fillColor||'none'),U.dom.setAttribute('stroke',U.strokeColor||'black'),U.dom.setAttribute('stroke-opacity',U.strokeOpacity||1),U.dom.setAttribute('fill-opacity',U.fillOpacity||1),U.dom.setAttribute('stroke-width',U.strokeWidth||1),F.groupMain.appendChild(U.dom)}var F=this;I=I||['box','bar'],Array.isArray(I)||(I=[I]);var O=[],V=[['y','top','bottom'],['x','left','right']];for(var B=0;B<I.length;B++){O[B]={},'string'==typeof I[B]&&(I[B]={type:I[B],y:{}}),O[B].type=I[B].type;for(var W=0,R=V.length;W<R;W++){I[B].all&&(I[B][V[W][1]]=X.extend(!0,{},I[B].all),I[B][V[W][2]]=X.extend(!0,{},I[B].all)),I[B][V[W][0]]&&(I[B][V[W][1]]=X.extend(!0,{},I[B][V[W][0]]),I[B][V[W][2]]=X.extend(!0,{},I[B][V[W][0]]));for(var G=1;2>=G;G++)I[B][V[W][G]]&&(O[B][V[W][G]]=I[B][V[W][G]],N(O[B][V[W][G]]))}}return this.errorstyles=O,this},errorDrawInit:function(){if(this.errorstyles)for(var I=0,N=this.errorstyles.length;I<N;I++)this.errorstyles[I].paths={top:'',bottom:'',left:'',right:''}},errorAddPoint:function(I,N,F,O,V){var B;this.error&&(B=this.error[I/2])&&(B[0]&&this.doErrorDraw('y',B[0],F,V,O,V),B[1]&&this.doErrorDraw('x',B[1],N,O,O,V))},errorAddPointBarChart:function(I,N,F,O){var V;this.error&&(V=this.error[I])&&this.doErrorDraw('y',V,N,O,F,O)},errorDraw:function(){if(this.error&&this.errorstyles)for(var I=0,N=this.errorstyles.length;I<N;I++)for(var F in this.errorstyles[I].paths)this.errorstyles[I][F]&&this.errorstyles[I][F].dom&&this.errorstyles[I][F].dom.setAttribute('d',this.errorstyles[I].paths[F])}}})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(3),S(11),S(14)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var X})(this,function(E,Y,X,I){'use strict';function N(V){return V&&V.__esModule?V:{default:V}}Object.defineProperty(E,'__esModule',{value:!0}),function(B){if(B&&B.__esModule)return B;var W={};if(null!=B)for(var R in B)Object.prototype.hasOwnProperty.call(B,R)&&(W[R]=B[R]);return W.default=B,W}(Y);var F=N(X);N(I);class O extends F.default{constructor(){super()}init(V,B,W){this.graph=V,this.name=B,this.options=W||{},this.groupMain=document.createElementNS(this.graph.ns,'g'),this.pathDom=document.createElementNS(this.graph.ns,'path'),this.groupMain.appendChild(this.pathDom),this.styles={},this.styles.unselected={lineColor:this.options.lineColor,lineStyle:this.options.lineStyle,lineWidth:this.options.lineWidth,fillColor:this.options.fillColor,fillOpacity:this.options.fillOpacity,markers:this.options.markers}}setData(V){for(var B in this.data=V,this.minY=Number.MAX_SAFE_INTEGER,this.maxY=Number.MIN_SAFE_INTEGER,this.data)this._checkY(this.data[B]);return this}setFillColor(V,B,W){return B=B||'unselected',this.styles[B]=this.styles[B]||{},this.styles[B].fillColor=V,W&&this.setFillColor(V,'selected'),this.styleHasChanged(B),this}getFillColor(V){return this.getStyle(V).fillColor}setFillOpacity(V,B,W){return B=B||'unselected',this.styles[B]=this.styles[B]||{},this.styles[B].fillOpacity=V,W&&this.setLineWidth(V,'selected'),this.styleHasChanged(B),this}getFillOpacity(V){return this.getStyle(V).fillOpacity||1}applyLineStyles(){this.applyLineStyle(this.pathDom)}applyLineStyle(V){V.setAttribute('stroke',this.getLineColor()),V.setAttribute('stroke-width',this.getLineWidth()),this.getLineDashArray()?V.setAttribute('stroke-dasharray',this.getLineDashArray()):V.removeAttribute('stroke-dasharray'),V.setAttribute('fill',this.getFillColor()),V.setAttribute('fill-opacity',this.getFillOpacity()||1)}draw(){var V='';for(var B in this.error&&this.errorDrawInit(),this.data)this.categoryIndices[B]&&(V+='M '+this.getXAxis().getPos(this.categoryIndices[B])+' '+this.getYAxis().getPos(0)+' V '+this.getYAxis().getPos(this.data[B])+' h '+this.getXAxis().getDeltaPx(1/this.nbCategories)+' V '+this.getYAxis().getPos(0),this.error&&this.errorAddPointBarChart(B,this.data[B],this.getXAxis().getPos(this.categoryIndices[B]+0.5/this.nbCategories),this.getYAxis().getPos(this.data[B])));this.error&&this.errorDraw(),this.pathDom.setAttribute('d',V),this.applyLineStyles()}setMarkers(){}getUsedCategories(){return Object.keys(this.data)}}E.default=O})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(12),S(3)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var X})(this,function(E,Y,X){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I=function(V){return V&&V.__esModule?V:{default:V}}(Y);const N={orientation:'y',maxBoxWidth:20,defaultStyle:{meanLineColor:'rgb( 100, 0, 0 )',meanLineWidth:2,boxAboveLineWidth:1,boxAboveLineColor:'rgb( 0, 0, 0 )',boxAboveFillColor:'transparent',boxAboveFillOpacity:1,boxBelowLineWidth:1,boxBelowLineColor:'rgb( 0, 0, 0 )',boxBelowFillColor:'transparent',boxBelowFillOpacity:1,barAboveLineColor:'rgba( 0, 0, 0, 1 )',barAboveLineWidth:1,barBelowLineColor:'rgba( 0, 0, 0, 1 )',barBelowLineWidth:1,outlierLineWidth:1,outlierLineColor:'rgb( 255, 255, 255 )',outlierFillColor:'rgb( 0, 0, 0 )',outlierFillOpacity:1}};class F extends I.default{constructor(){super()}init(O,V,B){this.graph=O,this.name=V,this.options=(0,X.extend)(!0,{},N,B||{}),this.groupMain=document.createElementNS(this.graph.ns,'g'),this.pathDom=document.createElementNS(this.graph.ns,'path'),this.groupMain.appendChild(this.pathDom),this.styles={},this.styles.unselected=this.options.defaultStyle}setData(O,V){if(this.data=O,!!Array.isArray(O)){let B,W,R,G,U;for(var Z in'y'==this.options.orientation?(B=this.getXAxis(),W=this.getYAxis(),R=this._checkX.bind(this),G=this._checkY.bind(this),U=!0,this.minY=O[0].Q2,this.maxY=O[0].Q2,this.maxX=O[0].x,this.minX=O[0].x):(B=this.getYAxis(),W=this.getXAxis(),R=this._checkY.bind(this),G=this._checkX.bind(this),U=!1,this.minX=O[0].Q2,this.maxX=O[0].Q2,this.maxY=O[0].y,this.minY=O[0].y),V&&(R=function(){},G=function(){}),B&&W||(0,X.throwError)('Error in setting data of the box serie. The X and Y axes must be set beforehand'),this.data)U?(R(this.data[Z].x),this.data[Z].pos=this.data[Z].x):(R(this.data[Z].y),this.data[Z].pos=this.data[Z].y),this.data[Z].Q3&&G(this.data[Z].Q3),this.data[Z].Q1&&G(this.data[Z].Q1),this.data[Z].whiskers?Array.isArray(this.data[Z].whiskers)?(0<this.data[Z].whiskers.length&&G(this.data[Z].whiskers[0]),1<this.data[Z].whiskers.length&&G(this.data[Z].whiskers[1])):(G(this.data[Z].whiskers),this.data[Z].whiskers=[this.data[Z].whiskers]):this.data[Z].whiskers=[],Array.isArray(this.data[Z].outliers)?this.data[Z].outliers.map(Q=>G(Q)):this.data[Z].outliers=[];return this.dataHasChanged(),this.graph.updateDataMinMaxAxes(),this}}_style(O,V,B='unselected',W=!1){return this.styles[B]=this.styles[B]||{},this.styles[B][O]=V,W&&this._set(O,V,'selected'),this.styleHasChanged(B),this}_gstyle(O,V){return this.getStyle(V)[O]}getStyle(O='unselected'){return this.styles[O]||{}}setMeanLineColor(){return this._style('meanLineColor',...arguments)}getMeanLineColor(){return this._gstyle('meanLineColor',...arguments)}setStyle(O,V='unselected'){this.styles[V]=(0,X.extend)({},N.defaultStyle,this.styles.unselected,O),this.styleHasChanged(V)}setMeanLineWidth(){return this._style('meanLineWidth',...arguments)}getMeanLineWidth(){return this._gstyle('meanLineWidth',...arguments)}setBoxAboveLineColor(){return this._style('boxAboveLineColor',...arguments)}getBoxAboveLineColor(){return this._gstyle('boxAboveLineColor',...arguments)}setBoxBelowLineColor(){return this._style('boxBelowLineColor',...arguments)}getBoxBelowLineColor(){return this._gstyle('boxBelowLineColor',...arguments)}setBoxAboveLineWidth(){return this._style('boxAboveLineWidth',...arguments)}getBoxAboveLineWidth(){return this._gstyle('boxAboveLineWidth',...arguments)}setBoxBelowLineWidth(){return this._style('boxBelowLineWidth',...arguments)}getBoxBelowLineWidth(){return this._gstyle('boxBelowLineWidth',...arguments)}setBoxAboveFillColor(){return this._style('boxAboveFillColor',...arguments)}getBoxAboveFillColor(){return this._gstyle('boxAboveFillColor',...arguments)}setBoxBelowFillColor(){return this._style('boxBelowFillColor',...arguments)}getBoxBelowFillColor(){return this._gstyle('boxBelowFillColor',...arguments)}setBoxAboveFillOpacity(){return this._style('boxAboveFillOpacity',...arguments)}getBoxAboveFillOpacity(){return this._gstyle('boxAboveFillOpacity',...arguments)}setBoxBelowFillOpacity(){return this._style('boxBelowFillOpacity',...arguments)}getBoxBelowFillOpacity(){return this._gstyle('boxBelowFillOpacity',...arguments)}setBarAboveLineColor(){return this._style('barAboveLineColor',...arguments)}getBarAboveLineColor(){return this._gstyle('barAboveLineColor',...arguments)}setBarBelowLineColor(){return this._style('barBelowLineColor',...arguments)}getBarBelowLineColor(){return this._gstyle('barBelowLineColor',...arguments)}setBarAboveLineWidth(){return this._style('barAboveLineWidth',...arguments)}getBarAboveLineWidth(){return this._gstyle('barAboveLineWidth',...arguments)}setBarBelowLineWidth(){return this._style('barBelowLineWidth',...arguments)}getBarBelowLineWidth(){return this._gstyle('barBelowLineWidth',...arguments)}setOutlierLineColor(){return this._style('outlierLineColor',...arguments)}getOutlierLineColor(){return this._gstyle('outlierLineColor',...arguments)}setOutlierLineWidth(){return this._style('outlierLineWidth',...arguments)}getOutlierLineWidth(){return this._gstyle('outlierLineWidth',...arguments)}setOutlierFillColor(){return this._style('outlierFillColor',...arguments)}getOutlierFillColor(){return this._gstyle('outlierFillColor',...arguments)}setOutlierFillOpacity(){return this._style('outlierFillOpacity',...arguments)}getOutlierFillOpacity(){return this._gstyle('outlierFillOpacity',...arguments)}applyLineStyles(){this.applyLineStyle(this.pathDom)}applyLineStyle(O){O.setAttribute('stroke',this.getLineColor()),O.setAttribute('stroke-width',this.getLineWidth()),O.removeAttribute('stroke-dasharray'),O.setAttribute('fill',this.getFillColor()),O.setAttribute('fill-opacity',this.getFillOpacity()||1)}draw(){if(this.data){let V='y'==this.options.orientation?this.getYAxis():this.getXAxis(),B='y'==this.options.orientation?this.getXAxis():this.getYAxis(),O,W,R,G,U,Z,Q,K;if((0,X.emptyDom)(this.groupMain),'category'==B.getType())W=B.getRelPx(0.8/this.nbCategories);else{W=this.options.maxBoxWidth;for(var J=0,$=this.data.length;J<$-1;J++)W=Math.min(W,Math.abs(B.getPx(this.data[J+1].pos)-B.getPx(this.data[J].pos)))}for(var J=0,$=this.data.length;J<$;J++){if('category'==B.getType()){let se='y'==this.options.orientation?this.data[J].x:this.data[J].y;if(!!this.categoryIndices.hasOwnProperty(se))O=[B.getPos(this.categoryIndices[se])+1.2*W/2];else if(Array.isArray(this._linkedToScatterSeries))for(let ne of this._linkedToScatterSeries)if(ne.categoryIndices.hasOwnProperty(se)){O=[B.getPos(ne.categoryIndices[se])+1.2*W/2],V='y'==this.options.orientation?ne.getYAxis():ne.getXAxis();break}}else O=[B.getPos('y'==this.options.orientation?this.data[J].x:this.data[J].y),W];R=V.getPos(this.data[J].Q2),G=V.getPos(this.data[J].Q3),U=V.getPos(this.data[J].Q1),this.data[J].whiskers.map(se=>{se<this.data[J].Q1?Q=V.getPos(se):Z=V.getPos(se)}),K=this.data[J].outliers.map(se=>V.getPos(se));var ee=document.createElementNS(this.graph.ns,'line');this.applyMeanStyle(ee);var te=document.createElementNS(this.graph.ns,'rect'),ie=document.createElementNS(this.graph.ns,'rect');'y'==this.options.orientation?(te.setAttribute('width',W),te.setAttribute('x',O[0]-W/2),ie.setAttribute('width',W),ie.setAttribute('x',O[0]-W/2),ee.setAttribute('x1',O[0]-W/2),ee.setAttribute('x2',O[0]+W/2),ee.setAttribute('y1',R),ee.setAttribute('y2',R)):(te.setAttribute('height',W),te.setAttribute('y',O[0]-W/2),ie.setAttribute('height',W),ie.setAttribute('y',O[0]-W/2),ee.setAttribute('y1',O[0]-W/2),ee.setAttribute('y2',O[0]+W/2),ee.setAttribute('x1',R),ee.setAttribute('x2',R)),this.boxPos(te,R,G,'x'==this.options.orientation),this.boxPos(ie,R,U,'x'==this.options.orientation),this.applyBoxStyle(te,ie);var re=document.createElementNS(this.graph.ns,'line'),ae=document.createElementNS(this.graph.ns,'line');'y'==this.options.orientation?(void 0!==Z&&(re.setAttribute('y1',G),re.setAttribute('y2',Z),re.setAttribute('x1',O[0]),re.setAttribute('x2',O[0])),void 0!==Q&&(ae.setAttribute('y1',U),ae.setAttribute('y2',Q),ae.setAttribute('x1',O[0]),ae.setAttribute('x2',O[0]))):(void 0!==Z&&(re.setAttribute('x1',G),re.setAttribute('x2',Z),re.setAttribute('y1',O[0]),re.setAttribute('y2',O[0])),void 0!==Q&&(ae.setAttribute('x1',U),ae.setAttribute('x2',Q),ae.setAttribute('y1',O[0]),ae.setAttribute('y2',O[0]))),K.map(se=>{let ne=document.createElementNS(this.graph.ns,'circle');ne.setAttribute('r',2),'y'==this.options.orientation?(ne.setAttribute('cx',O[0]),ne.setAttribute('cy',se)):(ne.setAttribute('cy',O[0]),ne.setAttribute('cx',se)),this.setOutlierStyle(ne),this.groupMain.appendChild(ne)}),void 0!==Z&&this.groupMain.appendChild(re),void 0!==Q&&this.groupMain.appendChild(ae),void 0!=G&&this.groupMain.appendChild(te),void 0!=U&&this.groupMain.appendChild(ie),this.groupMain.appendChild(ee),this.applyWhiskerStyle(re,ae)}}}applyBoxStyle(O,V){O.setAttribute('stroke',this.getBoxAboveLineColor()),O.setAttribute('stroke-width',this.getBoxAboveLineWidth()),this.getBoxAboveFillColor()!==void 0&&O.setAttribute('fill',this.getBoxAboveFillColor()),this.getBoxAboveFillOpacity()!==void 0&&O.setAttribute('fill-opacity',this.getBoxAboveFillOpacity()),V.setAttribute('stroke',this.getBoxBelowLineColor()),V.setAttribute('stroke-width',this.getBoxBelowLineWidth()),this.getBoxBelowFillColor()!==void 0&&V.setAttribute('fill',this.getBoxBelowFillColor()),this.getBoxAboveFillOpacity()!==void 0&&V.setAttribute('fill-opacity',this.getBoxBelowFillOpacity())}applyWhiskerStyle(O,V){O.setAttribute('stroke',this.getBarAboveLineColor()),O.setAttribute('stroke-width',this.getBarAboveLineWidth()),V.setAttribute('stroke',this.getBarBelowLineColor()),V.setAttribute('stroke-width',this.getBarBelowLineWidth())}applyMeanStyle(O){O.setAttribute('stroke',this.getMeanLineColor()),O.setAttribute('stroke-width',this.getMeanLineWidth())}setOutlierStyle(O){O.setAttribute('stroke',this.getOutlierLineColor()),O.setAttribute('stroke-width',this.getOutlierLineWidth()),this.getBoxBelowFillColor()!==void 0&&O.setAttribute('fill',this.getOutlierFillColor()),this.getBoxAboveFillOpacity()!==void 0&&O.setAttribute('fill-opacity',this.getOutlierFillOpacity())}getCategoryIndex(O){if(!this.categories)throw new Error('No categories were defined. Probably axis.setSeries was not called');for(var V=0;V<this.categories.length;V++)if(this.categories[V].name==O)return V;return!1}setMarkers(){}boxPos(O,V,B,W){V>B?(O.setAttribute(W?'x':'y',B),O.setAttribute(W?'width':'height',V-B)):(O.setAttribute(W?'x':'y',V),O.setAttribute(W?'width':'height',B-V))}getUsedCategories(){let O='y'==this.options.orientation?'x':'y',V=this.data.map(B=>B[O]);return Array.isArray(this._linkedToScatterSeries)&&this._linkedToScatterSeries.map(B=>{B.getUsedCategories().map(W=>{let R;-1<(R=V.indexOf(W))&&V.splice(R,1)})}),V}linkToScatterSerie(...O){this._linkedToScatterSeries=O}}E.default=F})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(11),S(3),S(14)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var X})(this,function(E,Y,X,I){'use strict';function N(V){return V&&V.__esModule?V:{default:V}}Object.defineProperty(E,'__esModule',{value:!0});var F=N(Y);(function(B){if(B&&B.__esModule)return B;var W={};if(null!=B)for(var R in B)Object.prototype.hasOwnProperty.call(B,R)&&(W[R]=B[R]);return W.default=B,W})(X),N(I);class O extends F.default{constructor(){super(...arguments)}initExtended1(){this.lines=this.lines||{},this.initExtended2&&this.initExtended2()}setColors(V){this.colors=V}_draw_standard(){var V=this,B=this._dataToUse,R=0,G=B.length,$=!1,ee=!1,se=this.getXAxis(),ne=this.getYAxis(),oe=se.getCurrentMin(),le=ne.getCurrentMin(),de=se.getCurrentMax(),pe=ne.getCurrentMax(),ue=0,ge=1,W,U,Z,Q,K,J,Z,te,ie,re,ae;for(this.eraseLines(),this.isFlipped()&&(ue=1,ge=0),R=0;R<G;R++){for(W=!1,this.counter1=R,this.currentLine='',U=0,Z=0,Q=B[R].length,U=0;U<Q;U+=2){if(K=B[R][U+ue],J=B[R][U+ge],K<oe&&$<oe||K>de&&$>de||(J<le&&ee<le||J>pe&&ee>pe)&&!this.options.lineToZero){$=K,ee=J;continue}if(this.counter2=U/2,this.markersShown()&&this.getMarkerCurrentFamily(this.counter2),re=this.getX(K),ae=this.getY(J),re!=te||ae!=ie){if(isNaN(re)||isNaN(ae)){0<this.counter;continue}if(this._optimize_before(re,ae)){var ce=this.colors[R][U/2];if(this._addPoint(re,ae,K,J,te,ie,$,ee,U,ce,!1,!0),this.detectPeaks(K,J),!this._optimize_after(re,ae)){W=!0;break}te=re,ie=ae,$=K,ee=J}}}if(W)break}if(this.latchLines(),this._tracker){this._trackerDom&&this._trackerDom.remove();var he=this.groupLines.cloneNode(!0);this.groupMain.appendChild(he);for(var R=0,G=he.children.length;R<G;R++)he.children[R].setAttribute('stroke','transparent'),he.children[R].setAttribute('stroke-width','25px'),he.children[R].setAttribute('pointer-events','stroke');V._trackerDom=he,V.groupMain.addEventListener('mousemove',function(xe){var me=V.graph._getXY(xe),ye=V.handleMouseMove(!1,!1);V._trackingCallback(V,ye,me.x,me.y)}),V.groupMain.addEventListener('mouseleave',function(){V._trackingOutCallback(V)})}return this}_addPoint(V,B,W,R,G,U,Z,Q,K,J){if(void 0!==G&&void 0!==U&&!(isNaN(V)||isNaN(B))){var $=this.lines[J];$||($=this.lines[J]={object:document.createElementNS(this.graph.ns,'path'),path:'',color:J},$.object.setAttribute('stroke',J),$.color=J,this.groupLines.appendChild($.object)),$.path+='M '+G+' '+U+' L '+V+' '+B,this.error&&this.errorAddPoint(K,W,R,V,B)}}removeExtraLines(){}latchLines(){for(var V in this.lines)this.lines[V].object.setAttribute('d',this.lines[V].path)}eraseLines(){for(var V in this.lines)this.lines[V].path='',this.lines[V].object.setAttribute('d','')}applyLineStyle(V){V.setAttribute('stroke-width',this.getLineWidth()),this.getLineDashArray()?V.setAttribute('stroke-dasharray',this.getLineDashArray()):V.removeAttribute('stroke-dasharray'),V.setAttribute('fill','none')}}E.default=O})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(12),S(3),S(14)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var X})(this,function(E,Y,X,I){'use strict';function N(R){return R&&R.__esModule?R:{default:R}}Object.defineProperty(E,'__esModule',{value:!0});var F=N(Y),O=function(G){if(G&&G.__esModule)return G;var U={};if(null!=G)for(var Z in G)Object.prototype.hasOwnProperty.call(G,Z)&&(U[Z]=G[Z]);return U.default=G,U}(X),V=N(I);const B={};class W extends F.default{constructor(){super(...arguments)}init(R,G,U){var Z=this;this.graph=R,this.name=G,this.id=Math.random()+Date.now(),this.shapes=[],this.shown=!0,this.options=O.extend(!0,{},B,U),this.data=[],this.shapesDetails=[],this.shapes=[],this._type='scatter',O.mapEventEmission(this.options,this),this._isMinOrMax={x:{min:!1,max:!1},y:{min:!1,max:!1}},this.groupPoints=document.createElementNS(this.graph.ns,'g'),this.groupMain=document.createElementNS(this.graph.ns,'g'),this.additionalData={},this.selectedStyleGeneral={},this.selectedStyleModifiers={},this.groupPoints.addEventListener('mouseover',function(Q){var K=parseInt(Q.target.parentElement.getAttribute('data-shapeid'));Z.emit('mouseover',K,Z.data[2*K],Z.data[2*K+1])}),this.groupPoints.addEventListener('mouseout',function(Q){var K=parseInt(Q.target.parentElement.getAttribute('data-shapeid'));Z.emit('mouseout',K,Z.data[2*K],Z.data[2*K+1])}),this.minX=Number.MAX_VALUE,this.minY=Number.MAX_VALUE,this.maxX=Number.MIN_VALUE,this.maxY=Number.MIN_VALUE,this.groupMain.appendChild(this.groupPoints),this.currentAction=!1,this.initExtended1&&this.initExtended1(),this.styles={},this.styles.unselected={},this.styles.selected={},this.styles.unselected.default={shape:'circle',cx:0,cy:0,r:3,stroke:'transparent',fill:'black'},this.styles.selected.default={shape:'circle',cx:0,cy:0,r:4,stroke:'transparent',fill:'black'}}setData(R,G,U){var Z=0,G=G||'2D',U=U||'float',K=0,Q;if(this.empty(),this.shapesDetails=[],this.shapes=[],!R instanceof Array)return this;R instanceof Array&&!(R[0]instanceof Array)&&'object'!=typeof R[0]&&(G='1D');var J='2D'==G;Q=this._addData(U,J?2*R.length:R.length),Z=0;for(var $=0,ee=R.length;$<ee;$++)J?(Q[Z]=R[$][0],this._checkX(Q[Z]),Z++,Q[Z]=R[$][1],this._checkY(Q[Z]),Z++,K++):(Q[Z]=R[$],this[0==$%2?'_checkX':'_checkY'](Q[Z]),Z++,K+=$%2?1:0);return this.dataHasChanged(),this.graph.updateDataMinMaxAxes(),this.data=Q,this}setDataCategory(R){for(var G in R)if(Array.isArray(R[G].y))for(let U of R[G].y)this._checkY(U);return this.dataHasChanged(),this.graph.updateDataMinMaxAxes(),this.data=R,this}empty(){for(;this.groupPoints.firstChild;)this.groupPoints.removeChild(this.groupPoints.firstChild)}getSymbolForLegend(){if(this.symbol)return this.symbol;var R=document.createElementNS(this.graph.ns,'g');R.setAttribute('data-shapeid',-1);var G=this.doShape(R,this.styles.unselected.default),U=this.getStyle('unselected',-1,!0);for(var Z in U[-1])'shape'!=Z&&G.setAttribute(Z,U[-1][Z]);return R}setStyle(R,G,U){return'string'==typeof G&&(U=G,G=!1),void 0===U&&(U='unselected'),this.styles[U]=this.styles[U]||{},this.styles[U].all=R,this.styles[U].modifiers=G,this.styleHasChanged(U),this}draw(R){if(R||this.hasDataChanged()||this.hasStyleChanged('unselected')){var Z=0,K=this,J='category'==this.getXAxis().getType(),G,U,Q;this._drawn=!0,this.dataHasChanged(!1),this.styleHasChanged(!1),this.groupMain.removeChild(this.groupPoints);var $=0,ee=1;this.getFlip()&&($=1,ee=0),this.data.length/2;var te=[];if(Z=0,Q=this.data.length,this.error&&this.errorDrawInit(),J){for(let ie=0;Z<Q;Z+=1)if(this.categoryIndices.hasOwnProperty(this.data[Z].x)){let re=this.data[Z].y,ae=re.length,se=0;this.error;for(let ne of this.data[Z].y){let oe=se/(ae-1)*(0.8/this.nbCategories)+this.categoryIndices[this.data[Z].x]+0.1/this.nbCategories;U=this.getY(ne),G=this.getX(oe),se++,this.shapesDetails[ie]=this.shapesDetails[ie]||[],this.shapesDetails[ie][0]=G,this.shapesDetails[ie][1]=U,te.push(ie),ie++}}}else for(;Z<Q;Z+=2)this.data[Z+$]<this.getXAxis().getCurrentMin()||this.data[Z+$]>this.getXAxis().getCurrentMax()||this.data[Z+ee]<this.getYAxis().getCurrentMin()||this.data[Z+ee]>this.getYAxis().getCurrentMax()||(G=this.getX(this.data[Z+$]),U=this.getY(this.data[Z+ee]),this.error&&this.errorAddPoint(Z,this.data[Z+$],this.data[Z+ee],G,U),this.shapesDetails[Z/2]=this.shapesDetails[Z/2]||[],this.shapesDetails[Z/2][0]=G,this.shapesDetails[Z/2][1]=U,te.push(Z/2));this.error&&this.errorDraw(),this.applyStyle('unselected',te),this.groupMain.appendChild(this.groupPoints)}}_addPoint(R,G,U){var Z=document.createElementNS(this.graph.ns,'g');Z.setAttribute('transform','translate('+R+', '+G+')'),Z.setAttribute('data-shapeid',U),shape=this.extraStyle&&this.extraStyle[U]?this.doShape(Z,this.extraStyle[U]):this.stdStylePerso?this.doShape(Z,this.stdStylePerso):this.doShape(Z,this.stdStyle),this.shapes[U]=shape,this.groupPoints.appendChild(Z)}doShape(R,G){var U=document.createElementNS(this.graph.ns,G.shape);return R.appendChild(U),U}getStyle(R,G,U){var R=R||'unselected',Z,Q={};'number'==typeof G?Z=[G]:Array.isArray(G)&&(Z=G);var K,G,J,$,ee;this.styles[R].all!==void 0&&(ee=this.styles[R].all,'function'==typeof ee?ee=ee():!1===ee&&(ee={}));for(var te=0,ie=Z.length;te<ie;te++){if(G=Z[te],K=this.shapes[G],(J=this.styles[R].modifiers)&&('function'==typeof J||J[G])){'function'==typeof J?$=J(G,K):J[G]&&($=J[G]);var re=O.extend({},ee,$);$=O.extend($,re)}else $=void 0==ee?this.styles[R].default:ee;if(!K){var ae=document.createElementNS(this.graph.ns,'g');ae.setAttribute('data-shapeid',G),this.shapes[G]=this.doShape(ae,$),this.groupPoints.appendChild(ae),K=this.shapes[G]}U||K.parentNode.setAttribute('transform','translate('+this.shapesDetails[G][0]+', '+this.shapesDetails[G][1]+')'),Q[G]=$}return Q}applyStyle(R,G,U){var Z,Q,K=this.getStyle(R,G,U);for(Z in K)for(Q in K[Z])'shape'!==Q&&(K[Z][Q]?this.shapes[Z].setAttribute(Q,K[Z][Q]):this.shapes[Z].removeAttribute(Q))}unselectPoint(R){this.selectPoint(R,!1)}selectPoint(R,G,U){if(!(this.shapesDetails[R][2]&&this.shapesDetails[R][2]==U)){if('string'==typeof G&&(U=G,G=void 0),Array.isArray(R))return this.selectPoints(R);if(this.shapes[R]&&this.shapesDetails[R])if((this.shapesDetails[R][2]||!1===G)&&!0!==G){var Z=this.shapesDetails[R][2];this.shapesDetails[R][2]=!1;var Q=this.getStyle(Z,R,!0);for(var K in Q[R])this.shapes[R].removeAttribute(K);this.applyStyle('unselected',R,!0)}else U=U||'selected',this.shapesDetails[R][2]=U,this.applyStyle(U,R,!0)}}getUsedCategories(){return'object'==typeof this.data[0]?this.data.map(R=>R.x):[]}}O.mix(W,V.default),E.default=W})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(12),S(3)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var X})(this,function(E,Y,X){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I=function(V){return V&&V.__esModule?V:{default:V}}(Y);const N={fillColor:'rgba( 0, 0, 0, 0.1 )',lineColor:'rgba( 0, 0, 0, 1 )',lineWidth:'1px'};class F extends I.default{constructor(){super(...arguments)}init(O,V,B){this,this.graph=O,this.name=V,this.selectionType='unselected',this.id=Math.random()+Date.now(),this.shown=!0,this.options=(0,X.extend)(!0,{},N,B),this.data=[],this.groupZones=document.createElementNS(this.graph.ns,'g'),this.groupMain=document.createElementNS(this.graph.ns,'g'),this.lineZone=document.createElementNS(this.graph.ns,'path'),this.lineZone.setAttribute('stroke','black'),this.lineZone.setAttribute('stroke-width','1px'),this.additionalData={},this.minX=Number.MAX_VALUE,this.minY=Number.MAX_VALUE,this.maxX=Number.MIN_VALUE,this.maxY=Number.MIN_VALUE,this.groupMain.appendChild(this.groupZones),this.groupZones.appendChild(this.lineZone),this.currentAction=!1,this.applyLineStyle(this.lineZone),this.styleHasChanged(),this.clip=document.createElementNS(this.graph.ns,'clipPath'),this.clipId=(0,X.guid)(),this.clip.setAttribute('id',this.clipId),this.graph.defs.appendChild(this.clip),this.clipRect=document.createElementNS(this.graph.ns,'rect'),this.clip.appendChild(this.clipRect),this.clip.setAttribute('clipPathUnits','userSpaceOnUse'),this.groupMain.setAttribute('clip-path','url(#'+this.clipId+')')}setData(O,V,B){var W=0,V=V||'2D',B=B||'float',G=0,R;if(this.data=[],this.dataHasChanged(),!(!O instanceof Array)){var U;O instanceof Array&&!(O[0]instanceof Array)?(V='1D',U=1.5*O.length,!(O[1]instanceof Array)&&(V='1D_flat',U=1*O.length)):O instanceof Array&&!(O[0][1]instanceof Array)?(V='2D_flat',U=3*O.length):(V='2D',U=3*O.length),R=this._addData(B,U),W=0;for(var Z=0,Q=O.length;Z<Q;Z++)if('2D'==V||'2D_flat'==V)R[W]=O[Z][0],this._checkX(R[W]),W++,'2D'==V?(R[W]=O[Z][1][0],this._checkY(R[W]),W++,G++,R[W]=O[Z][1][1],this._checkY(R[W]),W++,G++):(R[W]=O[Z][1],this._checkY(R[W]),W++,G++,R[W]=O[Z][2],this._checkY(R[W]),W++,G++);else if('1D_flat'==V){if(0==Z%3){R[W]=O[Z],this._checkX(R[W]),W++,G++;continue}R[W]=O[Z],this._checkY(R[W]),W++,G++}else{if(0==Z%2){R[W]=O[Z],this._checkX(R[W]),W++,G++;continue}R[W]=O[Z][0],this_checkY(R[W]),W++,G++,R[W]=O[Z][1],this_checkY(R[W]),W++,G++}return this.graph.updateDataMinMaxAxes(),this.data=R,this.dataHasChanged(),this}}_addData(O,V){switch(O){case'int':var B=4*V;break;case'float':var B=8*V;}var W=new ArrayBuffer(B);switch(O){case'int':return new Int32Array(W);break;default:case'float':return new Float64Array(W);}}empty(){for(;this.group.firstChild;)this.group.removeChild(this.group.firstChild)}draw(O){if(O||this.hasDataChanged()){var R=0,Z=this,V,B,W,G,U,Q=this.getXAxis().getMinPx(),K=this.getXAxis().getMaxPx(),J=this.getYAxis().getMinPx(),$=this.getYAxis().getMaxPx();this.clipRect.setAttribute('x',Math.min(Q,K)),this.clipRect.setAttribute('y',Math.min(J,$)),this.clipRect.setAttribute('width',Math.abs(K-Q)),this.clipRect.setAttribute('height',Math.abs($-J)),this._drawn=!0,this.groupMain.removeChild(this.groupZones),this.data.length/2,R=0,G=0,U=this.data.length;for(var ee='',te='',ie;R<U;R+=3){if(V=this.getX(this.data[R]),B=this.getY(this.data[R+1]),W=this.getY(this.data[R+2]),0>V){ie=[V,B,W];continue}if(ie&&(''!=te&&(te=' L '+te),ee+=ie[0]+','+Math.max(ie[1],ie[2])+' L ',te=V+','+Math.min(ie[1],ie[2])+te,ie=!1,G++),''!=te&&(te=' L '+te),W>B?(ee+=V+','+B+' L ',te=V+','+W+te):(ee+=V+','+W+' L ',te=V+','+B+te),V>this.getXAxis().getMaxPx())break}0<ee.length&&0<te.length?this.lineZone.setAttribute('d','M '+ee+te+' z'):this.lineZone.setAttribute('d',''),this.groupMain.appendChild(this.groupZones)}this.hasStyleChanged(this.selectionType)&&(this.applyLineStyle(this.lineZone),this.styleHasChanged(!1))}applyLineStyle(O){O.setAttribute('stroke',this.getLineColor()),O.setAttribute('stroke-width',this.getLineWidth()),O.setAttribute('fill',this.getFillColor()),O.setAttribute('fill-opacity',this.getFillOpacity()),O.setAttribute('stroke-opacity',this.getLineOpacity())}setLineWidth(O){return this.options.lineWidth=O,this.styleHasChanged(),this}getLineWidth(){return this.options.lineWidth}setLineOpacity(O){return this.options.lineOpacity=O,this.styleHasChanged(),this}getLineOpacity(){return this.options.lineOpacity}setLineColor(O){return this.options.lineColor=O,this.styleHasChanged(),this}getLineColor(){return this.options.lineColor}setFillOpacity(O){return this.options.fillOpacity=O,this.styleHasChanged(),this}getFillOpacity(){return this.options.fillOpacity}setFillColor(O){return this.options.fillColor=O,this.styleHasChanged(),this}getFillColor(){return this.options.fillColor}getMax(O,V){var B=Math.min(O,V),W=Math.max(O,V),R=this.searchClosestValue(B),G=this.searchClosestValue(W),Q=-(1/0),U,Z,K,J;if(R||(B=this.minX,R=this.searchClosestValue(B)),G||(W=this.maxX,G=this.searchClosestValue(W)),!R||!G)return-(1/0);for(U=R.dataIndex;U<=G.dataIndex;U++)for(K=U==R.dataIndex?R.xBeforeIndexArr:0,J=U==G.dataIndex?G.xBeforeIndexArr:this.data[U].length,Z=K;Z<=J;Z+=3)Q=Math.max(Q,this.data[U][Z+1],this.data[U][Z+2]);return Q}getMin(O,V){var B=Math.min(O,V),W=Math.max(O,V),R=this.searchClosestValue(B),G=this.searchClosestValue(W),Q=1/0,U,Z,K,J;if(R||(B=this.minX,R=this.searchClosestValue(B)),G||(W=this.maxX,G=this.searchClosestValue(W)),!R||!G)return 1/0;for(U=R.dataIndex;U<=G.dataIndex;U++)for(K=U==R.dataIndex?R.xBeforeIndexArr:0,J=U==G.dataIndex?G.xBeforeIndexArr:this.data[U].length,Z=K;Z<=J;Z+=3)Q=Math.min(Q,this.data[U][Z+1],this.data[U][Z+2]);return Q}searchClosestValue(O){var V;for(var B=0;B<this.data.length;B++){if(O<=this.data[B][this.data[B].length-3]&&O>=this.data[B][0])V=this._searchBinary(O,this.data[B],!1);else if(O>=this.data[B][this.data[B].length-3]&&O<=this.data[B][0])V=this._searchBinary(O,this.data[B],!0);else continue;return{dataIndex:B,xMin:this.data[B][V],xMax:this.data[B][V+3],yMin:this.data[B][V+1],yMax:this.data[B][V+4],xBeforeIndex:V/3,xAfterIndex:V/3+1,xBeforeIndexArr:V,xClosest:(Math.abs(this.data[B][V+3]-O)<Math.abs(this.data[B][V]-O)?V+3:V)/2}}}_searchBinary(O,V,B){var W=0,R=V.length,G=R-3;if(V[W]==O)return W;if(V[G]==O)return G;for(var Z=0,U;!0;){if(Z++,100<Z)throw'Error loop';if(U=(W+G)/3,U-=U%3,U==W||V[U]==O)return U;V[U]<=O?B?G=U:W=U:V[U]>O&&(B?W=U:G=U)}}}E.default=F})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(12),S(3)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var X})(this,function(E,Y,X){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I=function(B){return B&&B.__esModule?B:{default:B}}(Y),N=function(B){if(B&&B.__esModule)return B;var W={};if(null!=B)for(var R in B)Object.prototype.hasOwnProperty.call(B,R)&&(W[R]=B[R]);return W.default=B,W}(X);const F={};class O extends I.default{init(V,B,W){this.options=N.extend(!0,{},F,W||{}),N.mapEventEmission(this.options,this),this.graph=V,this.groupMain=document.createElementNS(this.graph.ns,'g'),this.rects=[],this.paths=[],this.recalculateBinsOnDraw=!1}setData(V){this.minX=this.maxX=this.minY=this.maxY=0;var B=0,W=V.length;for(this.data=V,this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY,B=0;B<W;B++)this._checkX(V[B][0]),this._checkY(V[B][1]);return this.dataHasChanged(),this.graph.updateDataMinMaxAxes(),this}calculateDensity(V,B,W,R,G,U){var Z=[],K=this.data.length,ee=Number.POSITIVE_INFINITY,te=Number.NEGATIVE_INFINITY,Q,J,$;for(Q=0;Q<K;Q++)(J=~~((this.data[Q][0]-V)/B),$=~~((this.data[Q][1]-R)/G),!(J>W||$>U||0>J||0>$))&&(Z[J]=Z[J]||[],Z[J][$]=Z[J][$]+1||1,ee=Z[J][$]<ee?Z[J][$]:ee,te=Z[J][$]>te?Z[J][$]:te);return this.maxIndexX=W,this.maxIndexY=U,this.binMin=ee,this.binMax=te,this.deltaX=B,this.deltaY=G,this.fromX=V,this.fromY=R,this.numX=W,this.numY=U,this.densitymap=Z,Z}calculateDensityWeighted(V,B,W,R,G,U){var Z=[],K=this.data.length,ee=Number.POSITIVE_INFINITY,te=Number.NEGATIVE_INFINITY,Q,J,$,ie,re,ae,se,ne,oe,le,de;for(Q=0;Q<K;Q++)(ae=(this.data[Q][0]-V)/B-0.5,se=(this.data[Q][1]-R)/G-0.5,J=Math.floor(ae),$=Math.floor(se),ne=J,le=$,oe=J+1,de=$+1,ie=1-(ae-J),re=1-(se-$),!(J>W||$>U||0>J||0>$))&&(Z[ne]=Z[ne]||[],Z[oe]=Z[oe]||[],Z[ne][le]=Z[ne][le]||0,Z[oe][le]=Z[oe][le]||0,Z[ne][de]=Z[ne][de]||0,Z[oe][de]=Z[oe][de]||0,Z[ne][le]+=ie*re,Z[oe][le]+=(1-ie)*re,Z[ne][de]+=ie*(1-re),Z[oe][de]+=(1-ie)*(1-re),ee=Z[ne][le]<ee?Z[ne][le]:ee,te=Z[ne][le]>te?Z[ne][le]:te,ee=Z[oe][le]<ee?Z[oe][le]:ee,te=Z[oe][le]>te?Z[oe][le]:te,ee=Z[ne][de]<ee?Z[ne][de]:ee,te=Z[ne][de]>te?Z[ne][de]:te,ee=Z[oe][de]<ee?Z[oe][de]:ee,te=Z[oe][de]>te?Z[oe][de]:te);return this.maxIndexX=W,this.maxIndexY=U,this.binMin=ee,this.binMax=te,this.deltaX=B,this.deltaY=G,this.fromX=V,this.fromY=R,this.numX=W,this.numY=U,this.densitymap=Z,Z}autoBins(V,B){return this.numX=V||400,this.numY=B||this.numX,this.calculateDensity(this.minX,(this.maxX-this.minX)/V,V,this.minY,(this.maxY-this.minY)/B,B),this.recalculateBinsOnDraw=!1,this}setPxPerBin(V,B,W){return V&&this.calculationDensityMap({from:'min',to:'max',pxPerBin:V,weighted:W}),B&&this.calculationDensityMap(!1,{from:'min',to:'max',pxPerBin:B,weighted:W}),this}setBinsFromTo(V,B,W,R){return this.densityMapCalculation=this.densityMapCalculation||{},this.densityMapCalculation[V]={from:B,to:W,numBins:R},this.calculationDensityMap(),this}calculationDensityMap(V,B){this.method=this.calculateDensityAdvanced,this.densityMapCalculation=this.densityMapCalculation||{},V&&(this.densityMapCalculation.x=V),B&&(this.densityMapCalculation.y=B)}calculateDensityAdvanced(){var V={x:{from:0,num:0,delta:0,weighing:!1},y:{from:0,num:0,delta:0,weighing:!1}},B={x:this.graph.drawingSpaceWidth,y:this.graph.drawingSpaceHeight},W={x:this.getXAxis,y:this.getYAxis},R=!1;for(var G in this.densityMapCalculation)if(this.densityMapCalculation[G].weighted&&(R=!0,V[G].weighing=!0),this.densityMapCalculation[G].pxPerBin){var U='min'==this.densityMapCalculation[G].from?W[G].call(this).getCurrentMin():this.densityMapCalculation[G].from,Z='max'==this.densityMapCalculation[G].to?W[G].call(this).getCurrentMax():this.densityMapCalculation[G].to,Q=Math.abs(W[G].call(this).getRelPx(Z-U));V[G].num=Math.ceil(B[G]/this.densityMapCalculation[G].pxPerBin),V[G].from=U-Math.abs(W[G].call(this).getRelVal((V[G].num*this.densityMapCalculation[G].pxPerBin-Q)/2)),V[G].delta=Math.abs(W[G].call(this).getRelVal(this.densityMapCalculation[G].pxPerBin))}else V[G].num=this.densityMapCalculation[G].numBins||400,V[G].from='min'==this.densityMapCalculation[G].from?W[G].call(this).getCurrentMin():this.densityMapCalculation[G].from,V[G].delta=this.densityMapCalculation[G].to?(('max'==this.densityMapCalculation[G].to?W[G].call(this).getCurrentMax():this.densityMapCalculation[G].to)-V[G].from)/V[G].num:this.densityMapCalculate[G].delta;(R?this.calculateDensityWeighted:this.calculateDensity).call(this,V.x.from,V.x.delta,V.x.num,V.y.from,V.y.delta,V.y.num)}setColorMapBinBoundaries(V,B){return this.colorMapMin=V,this.colorMapMax=B,this}autoColorMapBinBoundaries(){return this.colorMapMin=this.binMin,this.colorMapMax=this.binMax,this}onRedrawColorMapBinBoundaries(V){return this.callbackColorMapMinMax=V,this}colorMapHSL(V,B,W){W=W||'linear';var R={exp:function(ie){return(Math.exp(1*(ie/B))-Math.exp(0))/(Math.exp(1)-Math.exp(0))},log:function(ie){return(Math.log(ie+1)-Math.log(1))/(Math.log(B+1)-Math.log(1))},linear:function(ie){return(ie-0)/(B-0)}},G=0,U=[],Z=[],Q={h:null,s:null,l:null,a:null},$=V.length-1,K,J;for(var ee=0;ee<=B;ee++){for(var te in K=R[W](ee),J=Math.floor(K*$),J==V.length-1&&(J=$-1),K=(K-J/$)/(1/$),Q)Q[te]=(V[J+1][te]-V[J][te])*K+V[J][te];U[G]='hsl('+Q.h+', '+Math.round(100*Q.s)+'%, '+Math.round(100*Q.l)+'%)',Z[G]=Q.a,G++}return this.opacities=Z,this.colorMap=U,this.colorMapNum=B,this}autoColorMapHSL(V,B){return this.colorMapHSV(V,100,B||'linear'),this}getColorIndex(V){return Math.max(0,Math.min(this.colorMapNum,Math.floor((V-this.colorMapMin)/(this.colorMapMax-this.colorMapMin)*this.colorMapNum)))}draw(){var V;if(this.method&&this.method(),!this.callbackColorMapMinMax||void 0==this.colorMapMin||void 0==this.colorMapMax||'auto'==this.callbackColorMapMinMax)this.autoColorMapBinBoundaries();else{var B=this.callbackColorMapMinMax(this.binMin,this.binMax);this.setColorMapBinBoundaries(B[0],B[1])}var W=this.getXAxis().getRelPx(this.deltaX),R=this.getYAxis().getRelPx(this.deltaY);for(var G=0;G<this.paths.length;G++)this.paths[G]='';for(var G=0;G<this.maxIndexX;G++)for(var U=0;U<this.maxIndexY;U++)if(void 0!=this.densitymap[G]&&void 0!=this.densitymap[G][U]){V=this.getColorIndex(this.densitymap[G][U]),this.paths[V]||(this.paths[V]=''),this.paths[V]+=' M '+this.getXAxis().getPx(G*this.deltaX+this.fromX)+' '+this.getYAxis().getPx(U*this.deltaY+this.fromY)+' h '+W+' v '+R+' h -'+W+' z';;}this.drawRects()}drawRects(){for(var V=0;V<this.paths.length;V++)this.rects[V]||(this.rects[V]=document.createElementNS(this.graph.ns,'path'),this.rects[V].setAttribute('shape-rendering','crispEdges')),void 0!==this.paths[V]&&(this.rects[V].setAttribute('d',this.paths[V]),this.rects[V].setAttribute('fill',this.colorMap[V]),this.rects[V].setAttribute('fill-opacity',this.opacities[V])),this.groupMain.appendChild(this.rects[V])}setOptions(V){return this.options=N.extend(!0,{},F,V||{}),this}}E.default=O})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(11),S(3)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var X})(this,function(E,Y,X){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I=function(V){return V&&V.__esModule?V:{default:V}}(Y),N=function(V){if(V&&V.__esModule)return V;var B={};if(null!=V)for(var W in V)Object.prototype.hasOwnProperty.call(V,W)&&(B[W]=V[W]);return B.default=V,B}(X);class F extends I.default{constructor(){super(...arguments),this.negativeDelta=0,this.positiveDelta=0,this.negativeThreshold=0,this.positiveThreshold=0}setData(O,V,B){var V=V||'2D',B=B||'float',R=O.length,Q=[],W,G,U,Z;for(O instanceof Array||'object'!=typeof O||(this.minX=O.minX,this.minY=O.minY,this.maxX=O.maxX,this.maxY=O.maxY,O=O.segments,R=O.length),W=0;W<R;W++){for(U=O[W].lines.length,Z=this._addData(B,U),G=0;G<U;G+=2)Z[G]=O[W].lines[G],this._checkX(Z[G]),Z[G+1]=O[W].lines[G+1],this._checkY(Z[G+1]);Q.push({lines:Z,zValue:O[W].zValue})}return this.data=Q,this.graph.updateDataMinMaxAxes(),this.dataHasChanged(!0),this}draw(O){if(O||this.hasDataChanged()){this.currentLine=0;var G=0,U=this.data.length,Z=0,V,B,W,R,Q,K,J,$;this.minZ=1/0,this.maxZ=-(1/0);var ee=this.groupLines.nextSibling;this.groupMain.removeChild(this.groupLines),this.zValues={};var te=0,ie=1;this.getFlip()&&(te=0,ie=1);var re=this.getYAxis().getCurrentMin(),ae=this.getXAxis().getCurrentMin(),se=this.getXAxis().getCurrentMax(),ne=this.getYAxis().getCurrentMax();for(this.counter=0,this.currentLineId=0;G<U;G++){for(this.currentLine='',Z=0,Q=0,($=this.data[G].lines,K=$.length);Z<K;Z+=4)$[Z+te]<ae&&$[Z+2+te]<ae||$[Z+ie]<re&&$[Z+2+ie]<re||$[Z+ie]>ne&&$[Z+2+ie]>ne||$[Z+te]>se&&$[Z+2+te]>se||(W=this.getX($[Z+te]),R=this.getY($[Z+ie]),V=this.getX($[Z+2+te]),B=this.getY($[Z+2+ie]),V!=W||B!=R)&&(this.currentLine+='M ',this.currentLine+=W,this.currentLine+=' ',this.currentLine+=R,this.currentLine+='L ',this.currentLine+=V,this.currentLine+=' ',this.currentLine+=B,this.counter++,Q++);this.currentLine+=' z',J=this._createLine(),J.setAttribute('data-zvalue',this.data[G].zValue),this.zValues[this.data[G].zValue]={dom:J},this.minZ=Math.min(this.minZ,this.data[G].zValue),this.maxZ=Math.max(this.maxZ,this.data[G].zValue)}for(G++,G=this.currentLine+1;G<this.lines.length;G++)this.groupLines.removeChild(this.lines[G]),this.lines.splice(G,1);for(G=0;G<U;G++)this.setColorTo(this.lines[G],this.data[G].zValue,this.minZ,this.maxZ);this.onMouseWheel(0,{shiftKey:!1}),this.groupMain.insertBefore(this.groupLines,ee)}else if(this.hasStyleChanged(this.selectionType))for(;G<U;G++)this.setColorTo(this.lines[G],this.data[G].zValue,this.minZ,this.maxZ)}onMouseWheel(O,V,B,W){for(var R in O/=250,void 0===B?V.shiftKey&&this.options.hasNegative?(this.negativeDelta=Math.min(0,Math.max(-1,this.negativeDelta+Math.min(0.1,Math.max(-0.1,O)))),this.negativeThreshold=-this.minZ*Math.pow(this.negativeDelta,3)):(this.positiveDelta=Math.min(1,Math.max(0,this.positiveDelta+Math.min(0.1,Math.max(-0.1,O)))),this.positiveThreshold=this.maxZ*Math.pow(this.positiveDelta,3)):(!W&&(this.negativeThreshold=-B*this.minZ,this.negativeDelta=-Math.pow(Math.abs(this.negativeThreshold/-this.minZ),1/3)),W&&(this.positiveThreshold=B*this.maxZ,this.positiveDelta=Math.pow(this.positiveThreshold/this.maxZ,1/3))),isNaN(this.positiveDelta)&&(this.positiveDelta=0),isNaN(this.negativeDelta)&&(this.negativeDelta=0),this.zValues)this.zValues[R].dom.setAttribute('display',0<=R&&R>=this.positiveThreshold||0>=R&&R<=this.negativeThreshold?'block':'none');this._shapeZoom&&(this.options.hasNegative?(this._shapeZoom.setHandleNeg(-Math.pow(this.negativeDelta,3),this.minZ),this._shapeZoom.showHandleNeg()):this._shapeZoom.hideHandleNeg(),this._shapeZoom.setHandlePos(Math.pow(this.positiveDelta,3),this.maxZ))}setDynamicColor(O){this.lineColors=O,this.styleHasChanged()}setNegative(O){this.options.hasNegative=O,O&&(this.negativeThreshold=0)}setColorTo(O,V,B,W){if(this.lineColors){var R={h:0,s:0,l:0};for(var G in R)R[G]=0<V?this.lineColors.fromPositive[G]+(this.lineColors.toPositive[G]-this.lineColors.fromPositive[G])*(V/W):this.lineColors.fromNegative[G]+(this.lineColors.toNegative[G]-this.lineColors.fromNegative[G])*(V/B);R.h/=360;var U=N.hslToRgb(R.h,R.s,R.l);O.setAttribute('stroke','rgb('+U.join()+')')}}getSymbolForLegend(){if(!this.lineForLegend){var O=document.createElementNS(this.graph.ns,'ellipse');O.setAttribute('cx',7),O.setAttribute('cy',0),O.setAttribute('rx',8),O.setAttribute('ry',3),O.setAttribute('cursor','pointer'),this.lineForLegend=O}return this.applyLineStyle(this.lineForLegend,this.maxZ),this.lineForLegend}applyLineStyle(O,V){O.setAttribute('stroke',this.getLineColor()),O.setAttribute('stroke-width',this.getLineWidth()+(this.isSelected()?2:0)),this.getLineDashArray()&&O.setAttribute('stroke-dasharray',this.getLineDashArray()),O.setAttribute('fill','none'),this.setColorTo(O,V===void 0?O.getAttribute('data-zvalue'):V,this.minZ,this.maxZ),this.hasStyleChanged(!1)}setShapeZoom(O){this._shapeZoom=O}}E.default=F})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(2),S(3),S(4)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var X})(this,function(E,Y,X,I){'use strict';function N(W){return W&&W.__esModule?W:{default:W}}Object.defineProperty(E,'__esModule',{value:!0});var F=N(Y),O=function(R){if(R&&R.__esModule)return R;var G={};if(null!=R)for(var U in R)Object.prototype.hasOwnProperty.call(R,U)&&(G[U]=R[U]);return G.default=R,G}(X),V=N(I);class B extends V.default{constructor(){super()}init(W,R){var G=this;if(this.graph=W,this.properties=R||{},this.handles=[],this.options=this.options||{},this.group=document.createElementNS(this.graph.ns,'g'),this._selected=!1,this.createDom(),this._dom&&(this._dom.jsGraphIsShape=this),this.group.jsGraphIsShape=this,this.classes=[],this.transforms=[],this._data.masker){var U=document.createElementNS(this.graph.ns,'mask');this.maskingId=Math.random(),U.setAttribute('id',this.maskingId),this.maskDomWrapper=document.createElementNS(this.graph.ns,'rect'),this.maskDomWrapper.setAttribute('fill','white'),U.appendChild(this.maskDomWrapper);var Z=this._dom.cloneNode();U.appendChild(Z),this.maskDom=Z,this.graph.defs.appendChild(U)}return this.group&&(this._dom&&this.group.appendChild(this._dom),this.group.addEventListener('mouseover',function(Q){G.handleMouseOver(Q)}),this.group.addEventListener('mouseout',function(Q){G.handleMouseOut(Q)}),this.group.addEventListener('mousedown',function(Q){G.graph.focus(),G.handleMouseDown(Q)}),this.group.addEventListener('click',function(Q){G.handleClick(Q)}),this.group.addEventListener('dblclick',function(Q){G.handleDblClick(Q)})),this.initImpl(),this.graph.emit('shapeNew',this),this}initImpl(){}getData(){return this._data}getType(){return this.type}kill(W){this.graph.removeShapeFromDom(this),W||this.graph._removeShape(this),this.graph.stopElementMoving(this),this.graph.emit('shapeRemoved',this),this._inDom=!1}hide(){if(!this.hidden)return this.hidden=!0,this.group.style.display='none',this}show(){if(this.hidden)return this.hidden=!1,this.group.style.display='block',this.redraw(),this}addClass(W){return this.classes=this.classes||[],-1==this.classes.indexOf(W)&&this.classes.push(W),this.makeClasses(),this}removeClass(W){return this.classes.splice(this.classes.indexOf(W),1),this.makeClasses(),this}makeClasses(){return this._dom&&this._dom.setAttribute('class',this.classes.join(' ')),this}changed(W){return W&&this.graph.emit(W,this),this.graph.emit('shapeChanged',this),this}setEventReceptacle(){this.rectEvent||(this.rectEvent=document.createElementNS(this.graph.ns,'rect'),this.rectEvent.setAttribute('pointer-events','fill'),this.rectEvent.setAttribute('fill','transparent'),this.group.appendChild(this.rectEvent),this.rectEvent.jsGraphIsShape=this);var W=this.group.getBBox();this.rectEvent.setAttribute('x',W.x),this.rectEvent.setAttribute('y',W.y-10),this.rectEvent.setAttribute('width',W.width),this.rectEvent.setAttribute('height',W.height+20)}setSerie(W){return this.serie=W,this.xAxis=W.getXAxis(),this.yAxis=W.getYAxis(),this}getSerie(){return this.serie}autoAxes(){return this.xAxis||(this.xAxis=this.graph.getXAxis()),this.yAxis||(this.yAxis=this.graph.getYAxis()),this}setXAxis(W){return this.xAxis=W,this}setYAxis(W){this.yAxis=W}getXAxis(){return this.xAxis||this.autoAxes(),this.xAxis}getYAxis(){return this.yAxis||this.autoAxes(),this.yAxis}setLayer(W){return this.setProp('layer',W),this}getLayer(){var W=this.getProp('layer');return void 0===W?1:W}draw(W){return(!this._inDom||W)&&(this.appendToDom(),this._inDom=!0),this.makeLabels(),this.redraw(),this.applyStyle(),this}redraw(){return this.hidden?this:(this.position=this.applyPosition(),this.redrawImpl(),!this.position)?this:(this.updateLabels(),this._applyTransforms(),this)}redrawImpl(){}setProperties(W){this.properties=W,Array.isArray(this.properties.position)||(this.properties.position=[this.properties.position]);var R=this;for(var G=0,U=this.properties.position.length;G<U;G++){var Z=F.default.check(this.properties.position[G],function(Q){return R.getRelativePosition(Q)});this.properties.position[G]=Z}return this.emit('propertiesChanged'),this}getRelativePosition(W){var R;if(null!==(R=/position([0-9]*)/.exec(W)))return this.getPosition(R[1]);return null===(R=/labelPosition([0-9]*)/.exec(W))?void 0:this.getLabelPosition(R[1])}getProperties(){return this.properties}setProp(W,R,G){return this.properties=this.properties||{},this.properties[W]=this.properties[W]||[],this.properties[W][G||0]=R,this.emit('propertyChanged',W),this}getProp(W,R){return(this.properties[W]||[])[R||0]}getProps(W){return this.properties[W]||[]}addProp(W,R){this.properties[W]=this.properties[W]||[],this.properties[W].push(R)}resetProp(W){this.properties[W]=[]}setDom(W,R,G){!this._dom||G&&O.hasSavedAttribute(this._dom,W)||this._dom.setAttribute(W,R)}setDomGroup(W,R){this.group&&this.group.setAttribute(W,R)}setStrokeColor(W){return this.setProp('strokeColor',W),this.overwriteSavedProp('stroke',W),this.applySelectedStyle(),this}getStrokeColor(){return this.getProp('strokeColor')}setFillColor(W){return this.setProp('fillColor',W),this.overwriteSavedProp('fill',W),this.applySelectedStyle(),this}getFillColor(){return this.getProp('fillColor')}setFillOpacity(W){return this.setProp('fillOpacity',W),this.overwriteSavedProp('fill-opacity',W),this.applySelectedStyle(),this}setStrokeWidth(W){return this.setProp('strokeWidth',W),this.overwriteSavedProp('stroke-width',W),this.applySelectedStyle(),this}getStrokeWidth(){return this.getProp('strokeWidth')}setStrokeDasharray(W){return this.setProp('strokeDasharray',W),this.overwriteSavedProp('stroke-dasharray',W),this.applySelectedStyle(),this}setAttributes(W){return this.setProp('attributes',W),this}overwriteSavedProp(W,R){O.overwriteDomAttribute(this._dom,W,R)}addAttribute(W,R){var G={};return G[W]=R,this.addProp('attributes',G),this}addTransform(W,R){return this.addProp('transforms',{type:W,arguments:Array.isArray(R)?R:[R]}),this}resetTransforms(){return this.resetProp('transforms'),this}setLabelText(W,R){return this.setProp('labelText',W,R||0),this}getLabelText(W,R){return this.getProp('labelText',R||0)}displayLabel(W){return this.setProp('labelVisible',!0,W||0),this}hideLabel(W){return this.setProp('labelVisible',!1,W||0),this}setLabelColor(W,R){return this.setProp('labelColor',W,R||0),this}setLabelFontSize(W,R){return this.setProp('labelFontSize',W,R||0),this}getLabelPosition(W){return this.getProp('labelPosition',W||0)}setLabelPosition(W,R){var U=F.default.check(W,function(Z){return G.getRelativePosition(Z)}),G;return this.setProp('labelPosition',U,R||0),this}setLabelAngle(W,R){return this.setProp('labelAngle',W,R||0),this}setLabelBaseline(W,R){return this.setProp('labelBaseline',W,R||0),this}setLabelAnchor(W,R){return this.setProp('labelAnchor',W,R||0),this}setLabelSize(W,R){return this.setProp('labelSize',W,R||0),this}setLabelStrokeColor(W,R){return this.setProp('labelStrokeColor',W,R||0),this}setLabelStrokeWidth(W,R){return this.setProp('labelStrokeWidth',W,R||0),this}applyGenericStyle(){this.setDom('fill',this.getProp('fillColor'),!0),this.setDom('fill-opacity',this.getProp('fillOpacity'),!0),this.setDom('stroke',this.getProp('strokeColor'),!0),this.setDom('stroke-width',this.getProp('strokeWidth'),!0),this.setDom('stroke-dasharray',this.getProp('strokeDasharray'),!0);var W=this.getProps('attributes');for(var R=0,G=W.length;R<G;R++)for(var U in W[R])this.setDom(U,'function'==typeof W[R][U]?W[R][U].call(this,U):W[R][U],!0);return this._applyTransforms(),this}applyStyle(){return this.applyGenericStyle()}calculatePosition(W){var R=W instanceof F.default?W:this.getPosition(W);return R?R&&R.compute?R.compute(this.graph,this.getXAxis(),this.getYAxis(),this.getSerie()):void this.graph.throw():void 0}getPosition(W){var R=this.getProp('position',W||0);return this.setProp('position',R=F.default.check(R),W),R}setPosition(W,R){var G=this,U=F.default.check(W,function(Z){return G.getRelativePosition(Z)});return this.setProp('position',U,R||0)}_applyTransforms(){var W=this.getProp('transforms'),R='';if(W&&(W=Array.isArray(W)?W:[W],0!=W.length)){for(var G=0;G<W.length;G++){switch(R+=W[G].type+'(',W[G].type){case'translate':R+=F.default.getDeltaPx(W[G].arguments[0],this.getXAxis()).replace('px',''),R+=', ',R+=F.default.getDeltaPx(W[G].arguments[1],this.getYAxis()).replace('px','');break;case'rotate':if(R+=W[G].arguments[0],R+=', ',1==this.transforms[G].arguments.length){var U=this.getPosition(0);R+=U.x+', '+U.y}else R+=F.default.getDeltaPx(W[G].arguments[1],this.getXAxis()).replace('px',''),R+=', ',R+=F.default.getDeltaPx(W[G].arguments[2],this.getYAxis()).replace('px','');}R+=') '}return this.setDomGroup('transform',R),this}}makeLabels(){var W=this;this._labels=this._labels||[],this._labels.map(function(G){W.group.removeChild(G)}),this._labels=[];for(var R=0;this.getProp('labelText',R);)W._labels[R]||(W._labels[R]=document.createElementNS(W.graph.ns,'text'),W._labels[R].setAttribute('data-label-i',R),W._labels[R].jsGraphIsShape=W,W.group.appendChild(this._labels[R]),W._labels[R].addEventListener('dblclick',function(G){G.stopPropagation(),W.labelDblClickListener(G)})),R++;return this.updateLabels(),this}isLabelEditable(W){return this.getProp('labelEditable',W||0)}updateLabels(){this,this._labels=this._labels||[];for(var W=0,R=this._labels.length;W<R;W++)this._applyLabelData(W)}_applyLabelData(W){W=W||0;var R=this.getProp('labelVisible',W);if(!1===R)return void this._labels[W].setAttribute('display','none');this._labels[W].setAttribute('display','initial');var G=this.calculatePosition(F.default.check(this.getProp('labelPosition',W)));if(!(isNaN(G.x)||isNaN(G.y))){'NaNpx'==G.x||isNaN(G.x)||'NaN'===G.x||!1===G.x||(this._labels[W].setAttribute('x',G.x),this._labels[W].setAttribute('y',G.y));var U=this.getProp('labelAngle',W)||0;if(0!=U){var Z=this._labels[W].getAttribute('x'),Q=this._labels[W].getAttribute('y');this._labels[W].setAttribute('transform','rotate('+U+' '+Z+' '+Q+')')}return this._labels[W].setAttribute('dominant-baseline',this.getProp('labelBaseline',W)||'no-change'),this._labels[W].textContent=this.getProp('labelText',W),this._labels[W].setAttribute('fill',this.getProp('labelColor',W)||'black'),this._labels[W].setAttribute('font-size',this.getProp('labelSize',W)+'px'||'12px'),this._labels[W].setAttribute('text-anchor',this._getLabelAnchor(W)),this._labels[W].setAttribute('stroke',this.getProp('labelStrokeColor',W)),this._labels[W].setAttribute('stroke-width',this.getProp('labelStrokeWidth',W)+'px'),this._labels[W].setAttribute('stroke-location','outside'),this}}_getLabelAnchor(W){var R=this.getProp('labelAnchor',W);switch(R){case'middle':case'start':case'end':return R;break;case'right':return'end';break;case'left':return'start';break;default:return'start';}}isSelected(){return this._selectStatus||!1}hasHandles(W){return void 0!==W&&this.setProp('handles',W),!!this.getProp('handles')||!!this.getProp('statichandles')}addHandles(){if(!this.isLocked()){if(!this.handlesInDom){this.handlesInDom=!0;for(var W=1;W<this.handles.length;W++)this.handles[W]&&this.group.appendChild(this.handles[W])}return this}}removeHandles(){this.hideHandles(),this.handles=[]}hideHandles(){if(!this.handlesInDom)return this;for(var W=1;W<this.handles.length;W++)this.group.removeChild(this.handles[W]);return this.handlesInDom=!1,this}areHandlesInDom(){return this.handlesInDom}_select(W){return!!this.isSelectable()&&void(this.appendToDom(),this._selectStatus=!0,this.applySelectedStyle(),this.hasHandles()&&!this.hasStaticHandles()&&(this.addHandles(),this.setHandles()),!W&&this.graph.emit('shapeSelected',this))}applySelectedStyle(){if(this._selectStatus){var W=this.getSelectStyle(),R={};for(var G in W)R[G]='function'==typeof W[G]?W[G].call(this):W[G];O.saveDomAttributes(this._dom,R,'select')}}_unselect(W){this._selectStatus=!1,O.restoreDomAttributes(this._dom,'select'),this.hasHandles()&&!this.hasStaticHandles()&&this.hideHandles(),W||this.graph.emit('shapeUnselected',this)}getSelectStyle(){return this.selectStyle}setSelectStyle(W){return this.selectStyle=W,this.applySelectedStyle(),this}setStaticHandles(W){this.setProp('staticHandles',W)}hasStaticHandles(){return!!this.getProp('staticHandles')}_createHandles(W,R,G,U){if(!(this.handles&&0<this.handles.length)){this;for(var Z=1;Z<=W;Z++)(function(Q){var K=this,J=document.createElementNS(K.graph.ns,R);if(J.jsGraphIsShape=!0,G)for(var $ in G)J.setAttribute($,G[$]);J.addEventListener('mousedown',function(ee){K.isResizable()&&(ee.preventDefault(),ee.stopPropagation(),K.graph.emit('beforeShapeResize',K),!K.graph.prevent(!1)&&(K.resizing=!0,K.handleSelected=Q,K.handleMouseDown(ee)))}),U&&U(K.handles[Q]),K.handles[Q]=J}).call(this,Z);return this.handles}}createHandles(){}handleMouseDownImpl(){}handleMouseMoveImpl(){}handleMouseUpImpl(){}handleCreateImpl(){}handleMouseDown(W){if(!this.isLocked())return(this.isMovable()||this.isResizable())&&this.graph.elementMoving(this),this.getProp('selectOnMouseDown')&&this.graph.selectShape(this),this.isMovable()&&!this.resizing&&(this.graph.emit('beforeShapeMove',self),!this.graph.prevent(!1)&&(this.moving=!0)),this._mouseCoords=this.graph._getXY(W),this.handleMouseDownImpl(W,this._mouseCoords)}handleClick(W){return this.getProp('selectOnClick')&&this.graph.selectShape(this),!!this.isSelectable()&&void(!W.shiftKey&&this.graph.unselectShapes(),this.graph.selectShape(this))}handleMouseMove(W){if((this.resizing||this.moving)&&!this.isSelected()&&this.graph.selectShape(this),this.graph.emit('beforeShapeMouseMove',this),this.graph.prevent(!1)||!this._mouseCoords)return!1;var R=this.graph._getXY(W),G=this.getXAxis().getRelVal(R.x-this._mouseCoords.x),U=this.getYAxis().getRelVal(R.y-this._mouseCoords.y);(0!=G||0!==U)&&(this.preventUnselect=!0),this._mouseCoords=R;var Z=this.handleMouseMoveImpl(W,G,U,R.x-this._mouseCoords.x,R.y-this._mouseCoords.y);return Z}handleMouseUp(W){return this.moving&&this.graph.emit('shapeMoved',this),(this.handleSelected||this.resize)&&this.graph.emit('shapeResized',this),this.moving=!1,this.resizing=!1,this.handleSelected=!1,this.graph.elementMoving(!1),this.handleMouseUpImpl(W)}handleDblClick(){}handleMouseOver(){!this.getProp('highlightOnMouseOver')||this.moving||this.resizing||this.highlight(),this.graph.emit('shapeMouseOver',this)}handleMouseOut(){this.getProp('highlightOnMouseOver')&&this.unHighlight(),this.graph.emit('shapeMouseOut',this)}lock(){return this.setProp('locked',!0),this}unlock(){return this.setProp('locked',!1),this}isLocked(){return this.getProp('locked')||this.graph.shapesLocked}movable(){this.setProp('movable',!0)}unmovable(){return this.setProp('movable',!1),!1}isMovable(){return this.getProp('movable')}resizable(){this.setProp('resizable',!0)}unresizable(){this.setProp('resizable',!1)}isResizable(){return this.getProp('resizable')}selectable(){this.setProp('selectable',!0)}unselectable(){this.graph.unselectShape(this),this.setProp('selectable',!1)}isSelectable(){return this.getProp('selectable')}highlight(W,R){return W||(W=this.getHighlightAttributes()),R||(R='highlight'),O.saveDomAttributes(this._dom,W,R),this.highlightImpl(),this}unHighlight(W){return W||(W='highlight'),O.restoreDomAttributes(this._dom,W),this.unHighlightImpl(),this}highlightImpl(){}unHighlightImpl(){}getHighlightAttributes(){return this._highlightAttributes}setHighlightAttributes(W){return this._highlightAttributes=W,this}getMaskingID(){return this.maskingId}maskWith(W){var R;(R=W.getMaskingID())?this._dom.setAttribute('mask','url(#'+R+')'):this._dom.removeAttribute('mask')}updateMask(){var W={x:'min',y:'min'},R={x:'max',y:'max'}}labelDblClickListener(W){var R=parseInt(W.target.getAttribute('data-label-i')),G=this;if(!isNaN(R)&&this.isLabelEditable(R)){W.preventDefault(),W.stopPropagation();var U=document.createElement('input');U.setAttribute('type','text'),U.setAttribute('value',G.getProp('labelText',R)),G.graph._dom.prepend(U),O.setCSS(U,{position:'absolute',marginTop:parseInt(W.target.getAttribute('y').replace('px',''))-10+'px',marginLeft:parseInt(W.target.getAttribute('x').replace('px',''))-50+'px',textAlign:'center',width:'100px'}),U.addEventListener('blur',function(){G.setLabelText(U.getAttribute('value'),R),G._labels[R].textContent=U.getAttribute('value'),U.remove(),G.changed('shapeLabelChanged')}),U.addEventListener('keyup',function(Z){Z.stopPropagation(),Z.preventDefault(),13===Z.keyCode&&U.dispatchEvent(new Event('blur'))}),U.addEventListener('keypress',function(Z){Z.stopPropagation()}),U.addEventListener('keydown',function(Z){Z.stopPropagation()}),U.focus()}}appendToDom(){return this._forcedParentDom?this._forcedParentDom.appendChild(this.group):this.graph.appendShapeToDom(this),this}forceParentDom(W){return this._forcedParentDom=W,this}}B.prototype.computePosition=B.prototype.calculatePosition,B.prototype.showLabel=B.prototype.displayLabel,B.prototype.remove=B.prototype.kill,E.default=B})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(22)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var X})(this,function(E,Y){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var X=function(F){return F&&F.__esModule?F:{default:F}}(Y);class I extends X.default{createDom(){this._dom=document.createElementNS(this.graph.ns,'path')}createHandles(){this._createHandles(2,'line',{'stroke-width':'3',stroke:'transparent','pointer-events':'stroke',cursor:'ew-resize'})}handleMouseMoveImpl(N,F){if(!this.isLocked()){if(this.moving)this.getPosition(0).deltaPosition('x',F,this.getXAxis()),this.getPosition(1).deltaPosition('x',F,this.getXAxis());else if(this.serie&&this.handleSelected){this.resizingPosition=1==this.handleSelected?this.getPosition(0):this.getPosition(1);var O=this.serie.searchClosestValue(this.getXAxis().getVal(this.graph._getXY(N).x-this.graph.getPaddingLeft()));if(!O)return;this.resizingPosition.x!=O.xMin&&(this.preventUnselect=!0),this.resizingPosition.x=O.xMin}else this.handleSelected&&(this.resizingPosition=1==this.handleSelected?this.getPosition(0):this.getPosition(1),this.resizingPosition.deltaPosition('x',F,this.getXAxis()));this.applyPosition()}}applyPosition(){if(this.serie){var N=this.computePosition(0),F=this.computePosition(1),O=Math.abs(N.x-F.x),V=Math.min(N.x,F.x);if(2>O||0>V+O||V>this.graph.getDrawingWidth())return this.setDom('d',''),!1;var B=this.serie.searchClosestValue(this.getPosition(0).x),W=this.serie.searchClosestValue(this.getPosition(1).x),$=0,ee=Number.MAX_VALUE,R,G,U,Z,Q,K,V,J;if(!B||!W)return!1;for(B.xBeforeIndex>W.xBeforeIndex&&(R=B,B=W,W=R),this.counter=0,G=B.dataIndex;G<=W.dataIndex;G++){for(this.currentLine='',Z=G==B.dataIndex?B.xBeforeIndexArr:0,Q=G==W.dataIndex?W.xBeforeIndexArr:this.serie.data[G].length,K=0,Z==Q&&Q++,U=Z;U<=Q;U+=2)V=this.serie.getX(this.serie.data[G][U+0]),J=this.serie.getY(this.serie.data[G][U+1]),$=Math.max(this.serie.data[G][U+1],$),ee=Math.min(this.serie.data[G][U+1],ee),U==Z&&(this.firstX=V,this.firstY=J),this.currentLine+=0<K?' L '+V+' '+J+' ':' M '+V+' '+J+' ',K++;if(this.lastX=V,this.lastY=J,!this.firstX||!this.firstY||!this.lastX||!this.lastY)return;this.currentLine+=' V '+this.getYAxis().getPx(0)+' H '+this.firstX+' z',this.setDom('d',this.currentLine)}return this.maxY=this.serie.getY($),this.setHandles(),this.changed(),!0}}setHandles(){if(this.firstX){var N=this.computePosition(0),F=this.computePosition(1);N.x<F.x?(this.handles[1].setAttribute('x1',this.firstX),this.handles[1].setAttribute('x2',this.firstX),this.handles[2].setAttribute('x1',this.lastX),this.handles[2].setAttribute('x2',this.lastX)):(this.handles[1].setAttribute('x1',this.lastX),this.handles[1].setAttribute('x2',this.lastX),this.handles[2].setAttribute('x1',this.firstX),this.handles[2].setAttribute('x2',this.firstX)),this.handles[1].setAttribute('y1',this.getYAxis().getMaxPx()),this.handles[1].setAttribute('y2',this.serie.getY(0)),this.handles[2].setAttribute('y1',this.getYAxis().getMaxPx()),this.handles[2].setAttribute('y2',this.serie.getY(0))}}}E.default=I})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(3),S(22)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var X})(this,function(E,Y,X){'use strict';Object.defineProperty(E,'__esModule',{value:!0}),function(O){if(O&&O.__esModule)return O;var V={};if(null!=O)for(var B in O)Object.prototype.hasOwnProperty.call(O,B)&&(V[B]=O[B]);return V.default=O,V}(Y);var I=function(O){return O&&O.__esModule?O:{default:O}}(X);class N extends I.default{constructor(F,O){super(F,O)}createDom(){this._dom=document.createElementNS(this.graph.ns,'ellipse')}applyPosition(){var F=this.computePosition(0);return this.setDom('cx',F.x||0),this.setDom('cy',F.y||0),this.setDom('rx',this.getProp('rx')||0),this.setDom('ry',this.getProp('ry')||0),!0}handleMouseUpImpl(){this.triggerChange()}handleMouseMoveImpl(){}}E.default=N})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(22)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var X})(this,function(E,Y){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var X=function(F){return F&&F.__esModule?F:{default:F}}(Y);class I extends X.default{constructor(N,F){super(N,F)}createDom(){return!1}applyPosition(){return!0}}E.default=I})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(22)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var X})(this,function(E,Y){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var X=function(F){return F&&F.__esModule?F:{default:F}}(Y);class I extends X.default{constructor(N,F){super(N,F)}createDom(){this._dom=document.createElementNS(this.graph.ns,'path'),this.setStrokeColor('black'),this.setStrokeWidth(1)}createHandles(){}setPointsPx(N){return this.pxPoints=N,this}applyPosition(){if(this.pxPoints)this.setDom('d',this.pxPoints);else if(this.points){var N,F;this.serie?(N=this.serie.getXAxis(),F=this.serie.getYAxis()):this.xAxis&&this.yAxis&&(N=this.xAxis,F=this.yAxis),this.setDom('d','M '+this.points.map(function(O){return N.getPx(O[0])+', '+F.getPx(O[1])}).join(' L '))}return!0}}E.default=I})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(22)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var X})(this,function(E,Y){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var X=function(F){return F&&F.__esModule?F:{default:F}}(Y);class I extends X.default{constructor(N,F){super(N,F)}createDom(){this._dom=document.createElementNS(this.graph.ns,'line'),this.setStrokeColor('black'),this.setStrokeWidth(1)}createHandles(){this._createHandles(2,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white',cursor:'nwse-resize'})}applyPosition(){var N=this.calculatePosition(0),F=this.calculatePosition(1);if(N&&N.x&&N.y)return this.setDom('x2',N.x),this.setDom('y2',N.y),this.setDom('y1',F.y),this.setDom('x1',F.x),this.currentPos2x=F.x,this.currentPos2y=F.y,this.currentPos1x=N.x,this.currentPos1y=N.y,!0}handleMouseMoveImpl(N,F,O){if(!this.isLocked()){var V=this.getPosition(0),B=this.getPosition(1),W;if(1==this.handleSelected?W=V:2==this.handleSelected&&(W=B),W&&(!this._data.vertical&&W.deltaPosition('x',F,this.getXAxis()),!this._data.horizontal&&W.deltaPosition('y',O,this.getYAxis())),this.moving&&(V.x&&V.deltaPosition('x',F,this.getXAxis()),V.y&&V.deltaPosition('y',O,this.getYAxis()),B.x&&B.deltaPosition('x',F,this.getXAxis()),B.y&&B.deltaPosition('y',O,this.getYAxis())),this._data.forcedCoords){var R=this._data.forcedCoords;void 0!==R.y&&('function'==typeof R.y?B.y=V.y=R.y(this):(B.y=R.y,V.y=R.y)),void 0!==R.x&&('function'==typeof R.x?B.x=V.x=R.x(this):(B.x=R.x,V.x=R.x))}return this.rectEvent&&this.setEventReceptacle(),this.redraw(),this.changed(),this.setHandles(),!0}}setHandles(){!this.areHandlesInDom()||isNaN(this.currentPos1x)||(this.handles[1].setAttribute('x',this.currentPos1x),this.handles[1].setAttribute('y',this.currentPos1y),this.handles[2].setAttribute('x',this.currentPos2x),this.handles[2].setAttribute('y',this.currentPos2y))}setEventReceptacle(){this.currentPos1x&&(!this.rectEvent&&(this.rectEvent=document.createElementNS(this.graph.ns,'line'),this.rectEvent.setAttribute('pointer-events','stroke'),this.rectEvent.setAttribute('stroke','transparent'),this.rectEvent.jsGraphIsShape=this,this.group.appendChild(this.rectEvent)),this.rectEvent.setAttribute('x1',this.currentPos1x),this.rectEvent.setAttribute('y1',this.currentPos1y),this.rectEvent.setAttribute('x2',this.currentPos2x),this.rectEvent.setAttribute('y2',this.currentPos2y),this.rectEvent.setAttribute('stroke-width',this.getProp('strokeWidth')+2))}}E.default=I})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(23),S(2)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var X})(this,function(E,Y,X){'use strict';function I(V){return V&&V.__esModule?V:{default:V}}Object.defineProperty(E,'__esModule',{value:!0});var N=I(Y),F=I(X);class O extends N.default{constructor(V,B){super(V,B),this.nbHandles=2}createHandles(){this._createHandles(2,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white'})}applyPosition(){var V=this.calculatePosition(0),B=this.calculatePosition(1),G=this.getAxis(),U=[],W,R;let Z=this.yBaseline;if(V&&B){this.serie.isFlipped()?(Z=this.getXAxis().getPx(0)-Z,W=Math.abs(V.y-B.y),R=Math.min(V.y,B.y)):(Z=this.getYAxis().getPx(0)-Z,W=Math.abs(V.x-B.x),R=Math.min(V.x,B.x)),this.computedBaseline=Z,this.reversed=R==B.x;var Q=this.getPosition(0),K=this.getPosition(1);if('x'==G&&(2>W||0>R+W||R>this.graph.getDrawingWidth())||'y'==G&&(2>W||0>R+W||R>this.graph.getDrawingHeight()))U=[[0,0]],this.hideLabel(0),this.setDom('d',''),this.hideHandles();else{this.showLabel(0);var J=this.serie.searchClosestValue(Q[G]),$=this.serie.searchClosestValue(K[G]),de='',pe=1,ue=0,ge=Number.MAX_VALUE,ee,te,ie,re,ae,se,R,ne,oe,le;if(!J||!$)return!1;V.y=J.yMin,B.y=$.yMin,J.xBeforeIndex>$.xBeforeIndex&&(ee=J,J=$,$=ee);var me=0,ye=this.scaling,oe,le,ce,he,xe;for(this.serie.isFlipped()&&(pe=0,ue=1),te=J.dataIndex;te<=$.dataIndex;te++){for(re=te==J.dataIndex?J.xBeforeIndexArr:0,ae=te==$.dataIndex?$.xBeforeIndexArr:this.serie.data[te].length,se=0,ie=re;ie<=ae;ie+=2){if(R=this.serie.getX(this.serie.data[te][ie+ue]),ne=this.serie.getY(this.serie.data[te][ie+pe]),this.serie.isFlipped()){var fe=R;R=ne,ne=fe}if(oe||(oe=R,le=ne,this.serie.data[te][ie+ue],this.serie.data[te][ie+pe]),void 0==ce){ce=R,he=ne,xe=this.serie.data[te][ie+ue],this.serie.data[te][ie+pe];continue}(me+=0.5*((this.serie.data[te][ie+ue]-xe)*this.serie.data[te][ie+pe]),xe=this.serie.data[te][ie+ue],R!=ce||ne!=he)&&(ce=R,he=ne,U.push([R,me]),se++)}if(this.lastX=R,this.lastY=ne,!oe||!le||!this.lastX||!this.lastY)return}0==me&&(me=1);var ye;ye=this._ratio?this._ratio:150/me;for(var te=0,be=U.length;te<be;te++)U[te][1]=Z-U[te][1]*ye,0==te&&(this.firstPointX=U[te][0],this.firstPointY=U[te][1]),de+=' L '+U[te][ue]+', '+U[te][pe]+' ',this.lastPointX=U[te][0],this.lastPointY=U[te][1];this.points=U,this.sum=me;var he=le,ce=this.lastX;Math.min(20,ce-oe),de=this.serie.isFlipped()?' M '+Z+', '+oe+' '+de:' M '+oe+', '+Z+' '+de,this.setDom('d',de),this.firstX=oe,this.firstY=le,this.maxY=this.serie.getY(0),this._selected&&this.select(),this.setHandles()}return this.setLabelPosition(new F.default({x:(Q.x+K.x)/2,y:(this.firstPointY+this.lastPointY)/2+'px'})),this.updateLabels(),this.changed(),!0}}getAxis(){return this._data.axis||'x'}set ratio(V=1){this._ratio=V}get ratio(){return this._ratio}set yBaseline(V=30){this._yBaseline=V}get yBaseline(){return this._yBaseline||30}selectStyle(){this.setDom('stroke-width','2px')}selectHandles(){}setHandles(){if(void 0!=this.points&&this.isSelected()){this.addHandles();var V=this.computePosition(0),B=this.computePosition(1);V.x<B.x?(this.handles[1].setAttribute('x',this.firstPointX),this.handles[1].setAttribute('y',this.firstPointY),this.handles[2].setAttribute('x',this.lastPointX),this.handles[2].setAttribute('y',this.lastPointY)):(this.handles[2].setAttribute('x',this.firstPointX),this.handles[2].setAttribute('y',this.firstPointY),this.handles[1].setAttribute('x',this.lastPointX),this.handles[1].setAttribute('y',this.lastPointY))}}}E.default=O})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(30)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var X})(this,function(E,Y){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var X=function(F){return F&&F.__esModule?F:{default:F}}(Y);class I extends X.default{constructor(N,F){super(N,F),this.nbHandles=4}createDom(){this._dom=document.createElementNS(this.graph.ns,'rect'),this._dom.element=this,this.createHandles(this.nbHandles,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white',cursor:'nwse-resize'})}redrawImpl(){this.setPosition(),this.setHandles(),this.setBindableToDom(this._dom)}}E.default=I})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(22),S(3)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var X})(this,function(E,Y,X){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I=function(V){return V&&V.__esModule?V:{default:V}}(Y),N=function(V){if(V&&V.__esModule)return V;var B={};if(null!=V)for(var W in V)Object.prototype.hasOwnProperty.call(V,W)&&(B[W]=V[W]);return B.default=V,B}(X);class F extends I.default{constructor(O,V){super(O,V)}createDom(){return this,this._dom=document.createElementNS(this.graph.ns,'rect'),this.setStrokeColor('black'),this.setStrokeWidth(1),this.setFillColor('transparent'),this}createHandles(){if(this.hasHandles()){var O=this.getProp('handles');switch('object'!=typeof O&&(O={}),O.type||(O.type='corners'),O.type){case'sides':N.extend(O,{sides:{top:!0,bottom:!0,left:!0,right:!0}});var V=0;for(var B in O.sides)O.sides[B]&&V++;this._createHandles(V,'g').map(function(W){var R=document.createElementNS(self.graph.ns,'rect');R.setAttribute('x','-3'),R.setAttribute('width','6'),R.setAttribute('y','-6'),R.setAttribute('height','12'),R.setAttribute('stroke','black'),R.setAttribute('fill','white'),R.setAttribute('cursor','pointer'),W.appendChild(R)});var V=1;for(var B in O.sides)O.sides[B]&&(this.handles[B]=this['handle'+V],this.sides[V]=B,V++);break;case'corners':this._createHandles(4,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white'}),this.handles&&(this.handles[2].setAttribute('cursor','nesw-resize'),this.handles[4].setAttribute('cursor','nesw-resize'),this.handles[1].setAttribute('cursor','nwse-resize'),this.handles[3].setAttribute('cursor','nwse-resize'));}return this}}applyPosition(){var O=this.computePosition(0),V=this.computePosition(1),B,W,R,G;return O.x<V.x?(B=O.x,R=V.x-O.x):(B=V.x,R=O.x-V.x),O.y<V.y?(W=O.y,G=V.y-O.y):(W=V.y,G=O.y-V.y),this.currentX=B,this.currentY=W,this.currentW=R,this.currentH=G,isNaN(B)||isNaN(W)||!1===B||!1===W?!1:(this.setDom('width',R),this.setDom('height',G),this.setDom('x',B),this.setDom('y',W),this.setHandles(),this.updateMask(),!0)}handleMouseMoveImpl(O,V,B){var W=this.getProp('handles');if(this.moving||this.handleSelected){var R=this.getPosition(0),G=this.getPosition(1),U=this.getXAxis().isFlipped(),Z=this.getYAxis().isFlipped(),Q=R.x,K=R.y,J=G.x,$=G.y;if(this.moving)R.deltaPosition('x',V,this.getXAxis()),R.deltaPosition('y',B,this.getYAxis()),G.deltaPosition('x',V,this.getXAxis()),G.deltaPosition('y',B,this.getYAxis());else switch(W.type){case'sides':switch(this.sides[this.handleSelected]){case'left':R.deltaPosition('x',V,this.getXAxis());break;case'right':G.deltaPosition('x',V,this.getXAxis());break;case'top':R.deltaPosition('y',B,this.getYAxis());break;case'bottom':G.deltaPosition('y',B,this.getYAxis());}break;case'corners':default:1==this.handleSelected?(R.deltaPosition('x',V,this.getXAxis()),R.deltaPosition('y',B,this.getYAxis())):2==this.handleSelected?(G.deltaPosition('x',V,this.getXAxis()),R.deltaPosition('y',B,this.getYAxis())):3==this.handleSelected?(G.deltaPosition('y',B,this.getYAxis()),G.deltaPosition('x',V,this.getXAxis())):4==this.handleSelected&&(R.deltaPosition('x',V,this.getXAxis()),G.deltaPosition('y',B,this.getYAxis()));}return this.redraw(),this.changed(),this.setHandles(),!0}}setHandles(){if(!this.isLocked()&&(this.isSelectable()||this._staticHandles)&&this.handlesInDom){var O=this.computePosition(0),V=this.computePosition(1),B=this.getProp('handles');switch(B.type){case'sides':this.handles.left&&this.handles.left.setAttribute('transform','translate('+this.currentX+' '+(this.currentY+this.currentH/2)+')'),this.handles.right&&this.handles.right.setAttribute('transform','translate( '+(this.currentX+this.currentW)+' '+(this.currentY+this.currentH/2)+')'),this.handles.top&&this.handles.top.setAttribute('transform','translate( '+(this.currentX+this.currentW/2)+' '+this.currentY+')'),this.handles.bottom&&this.handles.bottom.setAttribute('transform','translate( '+(this.currentX+this.currentW/2)+' '+(this.currentY+this.currentH)+')');break;case'corners':default:this.handles[1].setAttribute('x',O.x),this.handles[1].setAttribute('y',O.y),this.handles[2].setAttribute('x',V.x),this.handles[2].setAttribute('y',O.y),this.handles[3].setAttribute('x',V.x),this.handles[3].setAttribute('y',V.y),this.handles[4].setAttribute('x',O.x),this.handles[4].setAttribute('y',V.y);}}}}E.default=F})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(22)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var X})(this,function(E,Y){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var X=function(F){return F&&F.__esModule?F:{default:F}}(Y);class I extends X.default{constructor(N,F){super(N,F),this.nbHandles=1}get width(){return this.options.width||10}set width(N=10){this.options.width=N}createDom(){this._dom=document.createElementNS(this.graph.ns,'path'),this._dom.setAttribute('d','M -'+this.width/2+' 0 h '+this.width+' m -'+this.width/2+' -'+this.width/2+' v '+this.width+'')}createHandles(){this._createHandles(this.nbHandles,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white',cursor:'nwse-resize'})}applyPosition(){var N=this.calculatePosition(0);if(N&&N.x&&N.y)return this.setDom('transform','translate( '+N.x+', '+N.y+')'),this.currentPos1x=N.x,this.currentPos1y=N.y,!0}redrawImpl(){this.setHandles()}handleCreateImpl(){}handleMouseDownImpl(){return this.moving=!0,!0}handleMouseUpImpl(){return this.triggerChange(),!0}handleMouseMoveImpl(N,F,O){if(!this.isLocked()){var V=this.getFromData('pos');return this.moving&&(V.x=this.graph.deltaPosition(V.x,F,this.getXAxis()),V.y=this.graph.deltaPosition(V.y,O,this.getYAxis())),this.redrawImpl(),!0}}createHandles(){this._createHandles(1,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white',cursor:'nwse-resize'})}setHandles(){!this.areHandlesInDom()||isNaN(this.currentPos1x)||(this.handles[1].setAttribute('x',this.currentPos1x),this.handles[1].setAttribute('y',this.currentPos1y))}selectStyle(){this.setDom('stroke','red'),this.setDom('stroke-width','2')}}E.default=I})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(27)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var X})(this,function(E,Y){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var X=function(F){return F&&F.__esModule?F:{default:F}}(Y);class I extends X.default{constructor(N){super(N),this.lineHeight=6}createDom(){this._dom=document.createElementNS(this.graph.ns,'line'),this.line1=document.createElementNS(this.graph.ns,'line'),this.line2=document.createElementNS(this.graph.ns,'line'),this.line3=document.createElementNS(this.graph.ns,'line'),this.rectBoundary=document.createElementNS(this.graph.ns,'path'),this.rectBoundary.setAttribute('fill','transparent'),this.rectBoundary.setAttribute('stroke','none'),this.rectBoundary.setAttribute('pointer-events','fill'),this.rectBoundary.jsGraphIsShape=!0,this.group.appendChild(this.rectBoundary),this.group.appendChild(this.line1),this.group.appendChild(this.line2),this.group.appendChild(this.line3),this._dom.element=this}createHandles(){this._createHandles(3,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white',cursor:'nwse-resize'})}redrawImpl(){this.line1.setAttribute('stroke',this.getStrokeColor()),this.line2.setAttribute('stroke',this.getStrokeColor()),this.line3.setAttribute('stroke',this.getStrokeColor()),this.line1.setAttribute('stroke-width',this.getStrokeWidth()),this.line2.setAttribute('stroke-width',this.getStrokeWidth()),this.line3.setAttribute('stroke-width',this.getStrokeWidth()),this.setHandles(),this.redrawLines()}redrawLines(){var N=this.computePosition(0),F=this.computePosition(1),O=this.computePosition(2);if(N.x&&F.x&&O.x&&this.posYPx){var V=this.lineHeight;this.rectBoundary.setAttribute('d','M '+N.x+' '+(this.posYPx-V)+' v '+2*V+' H '+F.x+' v '+-2*V+'z'),this.line1.setAttribute('x1',N.x),this.line1.setAttribute('x2',N.x),this.line2.setAttribute('x1',F.x),this.line2.setAttribute('x2',F.x),this.line3.setAttribute('x1',O.x),this.line3.setAttribute('x2',O.x),this._dom.setAttribute('x1',N.x),this._dom.setAttribute('x2',F.x),this.redrawY(V)}return this}redrawY(){if(!this.posYPx)return this;var N=this.lineHeight;return this.line1.setAttribute('y1',this.posYPx-N),this.line1.setAttribute('y2',this.posYPx+N),this.line2.setAttribute('y1',this.posYPx-N),this.line2.setAttribute('y2',this.posYPx+N),this.line3.setAttribute('y1',this.posYPx-N),this.line3.setAttribute('y2',this.posYPx+N),this._dom.setAttribute('y1',this.posYPx),this._dom.setAttribute('y2',this.posYPx),this}setHandles(){if(this.posYPx){var N=this.computePosition(0),F=this.computePosition(1),O=this.computePosition(2);N.x&&F.x&&O.x&&(this.handles[1].setAttribute('x',N.x),this.handles[1].setAttribute('y',this.posYPx),this.handles[2].setAttribute('x',F.x),this.handles[2].setAttribute('y',this.posYPx),this.handles[3].setAttribute('x',O.x),this.handles[3].setAttribute('y',this.posYPx))}}setY(N){return this.posYPx=N,this}setLineHeight(N){this.lineHeihgt=N}handleMouseMoveImpl(N,F){if(!this.isLocked()){var O=this.getPosition(0),V=this.getPosition(1),B=this.getPosition(2);switch(this.handleSelected){case 1:O.deltaPosition('x',F,this.getXAxis()),(Math.abs(B.x-V.x)>Math.abs(V.x-O.x)||Math.abs(B.x-O.x)>Math.abs(V.x-O.x))&&(B.x=O.x+0.1*(V.x-O.x));break;case 2:V.deltaPosition('x',F,this.getXAxis()),(Math.abs(B.x-V.x)>Math.abs(V.x-O.x)||Math.abs(B.x-O.x)>Math.abs(V.x-O.x))&&(B.x=V.x+0.1*(O.x-V.x));break;case 3:if(B.deltaPosition('x',F,this.getXAxis()),Math.abs(B.x-V.x)>Math.abs(V.x-O.x)||Math.abs(B.x-O.x)>Math.abs(V.x-O.x))return;}this.setLabelPosition({y:this.getLabelPosition(0).y,x:B.x}),this.updateLabels(),this.redrawLines(),this.setHandles()}}applyPosition(){return this.redrawLines(),!0}}E.default=I})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(4)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var X})(this,function(E,Y){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var X=function(F){return F&&F.__esModule?F:{default:F}}(Y);class I extends X.default{static defaults(){return{}}constructor(N){super(...arguments),this.options=N}init(){}onMouseDown(){}onMouseUp(){}onMouseMove(){}}E.default=I})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(33)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var X})(this,function(E,Y){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var X=function(F){return F&&F.__esModule?F:{default:F}}(Y);class I extends X.default{static defaults(){return{dragX:!0,dragY:!0,persistanceX:!1,persistanceY:!1}}init(N){this.graph=N,this.time=null,this.totaltime=2000}onMouseDown(N,F,O){return this._draggingX=F,this._draggingY=O,this._lastDraggingX=this._draggingX,this._lastDraggingY=this._draggingY,this.stopAnimation=!0,this.moved=!1,!0}onMouseMove(N,F,O){var V=F-this._draggingX,B=O-this._draggingY;this.options.dragX&&N._applyToAxes(function(W){W.setCurrentMin(W.getVal(W.getMinPx()-V)),W.setCurrentMax(W.getVal(W.getMaxPx()-V))},!1,!0,!1),this.options.dragY&&N._applyToAxes(function(W){W.setCurrentMin(W.getVal(W.getMinPx()-B)),W.setCurrentMax(W.getVal(W.getMaxPx()-B))},!1,!1,!0),this._lastDraggingX=this._draggingX,this._lastDraggingY=this._draggingY,this._draggingX=F,this._draggingY=O,this.moved=!0,this.time=Date.now(),this.emit('dragging'),N.draw(!0)}onMouseUp(N,F,O){var V=Date.now()-this.time;return F==this._lastDraggingX||O==this._lastDraggingY?void(this.moved&&this.emit('dragged')):(this.speedX=(F-this._lastDraggingX)/V,this.speedY=(O-this._lastDraggingY)/V,isNaN(this.speedX)||isNaN(this.speedY)?void this.emit('dragged'):void(N._applyToAxes(function(B){B._pluginDragMin=B.getCurrentMin(),B._pluginDragMax=B.getCurrentMax()},!1,!0,!0),this.stopAnimation=!1,this.accelerationX=-this.speedX/this.totaltime,this.accelerationY=-this.speedY/this.totaltime,this.options.persistanceX||this.options.persistanceY?this._persistanceMove(N):this.emit('dragged')))}_persistanceMove(N){var F=this;return F.stopAnimation?void F.emit('dragged'):void window.requestAnimationFrame(function(){var O=Date.now()-F.time,V=(0.5*F.accelerationX*O+F.speedX)*O,B=(0.5*F.accelerationY*O+F.speedY)*O;F.options.persistanceX&&N._applyToAxes(function(W){W.setCurrentMin(-W.getRelVal(V)+W._pluginDragMin),W.setCurrentMax(-W.getRelVal(V)+W._pluginDragMax),W.cacheCurrentMin(),W.cacheCurrentMax(),W.cacheInterval()},!1,!0,!1),F.options.persistanceY&&N._applyToAxes(function(W){W.setCurrentMin(-W.getRelVal(B)+W._pluginDragMin),W.setCurrentMax(-W.getRelVal(B)+W._pluginDragMax),W.cacheCurrentMin(),W.cacheCurrentMax(),W.cacheInterval()},!1,!1,!0),N.draw(),O<F.totaltime?(F.emit('dragging'),F._persistanceMove(N)):F.emit('dragged')})}}E.default=I})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(33),S(3)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var X})(this,function(E,Y,X){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I=function(V){return V&&V.__esModule?V:{default:V}}(Y),N=function(V){if(V&&V.__esModule)return V;var B={};if(null!=V)for(var W in V)Object.prototype.hasOwnProperty.call(V,W)&&(B[W]=V[W]);return B.default=V,B}(X);class F extends I.default{constructor(){super(...arguments)}init(O,V){this.graph=O,this.shapeType=V.type}setShape(O){this.shapeInfo.shapeType=O}onMouseDown(O,V,B,W){if(this.shapeType||this.options.url){var R=this,G=this,U,Z;this.count=this.count||0,V-=O.getPaddingLeft(),B-=O.getPaddingTop(),U=O.getXAxis().getVal(V),Z=O.getYAxis().getVal(B);var Q={position:[{x:U,y:Z},{x:U,y:Z}],onChange:function(J){O.triggerEvent('onAnnotationChange',J)},locked:!1,selectable:!0,resizable:!0,movable:!0};if(N.extend(!0,Q,this.options),this.emit('beforeNewShape',Q,W),!this.graph.prevent(!1)){var K=O.newShape(Q.type,Q);this.emit('createdShape',K,W),K&&(R.currentShape=K,R.currentShapeEvent=W),O.once('mouseUp',function(){R.emit('newShape',K)})}}}onMouseMove(O,V,B,W){var R=this;if(R.currentShape){R.count++;var G=R.currentShape;R.currentShape=!1,O.selectedSerie&&G.setSerie(O.selectedSerie),G.resizing=!0,G.options&&G.options.onCreate&&G.options.onCreate.call(G),G.draw(),O.selectShape(G),G.handleMouseDown(R.currentShapeEvent,!0),G.handleSelected=1,G.handleMouseMove(W,!0)}}onMouseUp(){var O=this;O.currentShape&&(O.currentShape=!1)}}E.default=F})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(3),S(33)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var X})(this,function(E,Y,X){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I=function(V){if(V&&V.__esModule)return V;var B={};if(null!=V)for(var W in V)Object.prototype.hasOwnProperty.call(V,W)&&(B[W]=V[W]);return B.default=V,B}(Y),N=function(V){return V&&V.__esModule?V:{default:V}}(X);class F extends N.default{constructor(){super(...arguments)}init(O){this._path=document.createElementNS(O.ns,'path'),I.setAttributeTo(this._path,{display:'none',fill:'rgba(0,0,0,0.1)',stroke:'rgba(0,0,0,1)','shape-rendering':'crispEdges',x:0,y:0,height:0,width:0,d:''}),this.graph=O,O.dom.appendChild(this._path)}setSerie(O){this.serie=O}onMouseDown(O,V,B){this.serie&&(this.path='M '+V+' '+B+' ',this.currentX=V,this.currentY=B,this.xs=[this.serie.getXAxis().getVal(V-O.getPaddingLeft())],this.ys=[this.serie.getYAxis().getVal(B-O.getPaddingTop())],this._path.setAttribute('d',''),this._path.setAttribute('display','block'))}onMouseMove(O,V,B){25<Math.pow(V-this.currentX,2)+Math.pow(B-this.currentY,2)&&(this.path+=' L '+V+' '+B+' ',this.currentX=V,this.currentY=B,this.xs.push(this.serie.getXAxis().getVal(V-O.getPaddingLeft())),this.ys.push(this.serie.getYAxis().getVal(B-O.getPaddingTop())),this._path.setAttribute('d',this.path+' z'),this.findPoints())}findPoints(){var O=this.serie.data,V=[],B=0,W;for(var R=0,G=O.length;R<G;R+=2){B=0;for(var U=0,Z=this.xs.length;U<Z;U+=1)W=U==Z-1?0:U+1,(this.ys[U]<O[R+1]&&this.ys[W]>O[R+1]||this.ys[U]>O[R+1]&&this.ys[W]<O[R+1])&&O[R]>(O[R+1]-this.ys[U])/(this.ys[W]-this.ys[U])*(this.xs[W]-this.xs[U])+this.xs[U]&&B++;1==B%2?(V.push(R/2),this.serie.selectPoint(R/2,!0,'selected')):this.serie.unselectPoint(R/2)}this.selected=V,this.emit('selectionProcess',V)}onMouseUp(){this._path.setAttribute('display','none'),this.emit('selectionEnd',this.selected)}}E.default=F})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(3),S(33)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var X})(this,function(E,Y,X){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I=function(V){if(V&&V.__esModule)return V;var B={};if(null!=V)for(var W in V)Object.prototype.hasOwnProperty.call(V,W)&&(B[W]=V[W]);return B.default=V,B}(Y),N=function(V){return V&&V.__esModule?V:{default:V}}(X);class F extends N.default{constructor(){super(...arguments)}static defaults(){return{axes:'all'}}init(O){this._zoomingGroup=document.createElementNS(O.ns,'g'),this._zoomingSquare=document.createElementNS(O.ns,'rect'),this._zoomingSquare.setAttribute('display','none'),I.setAttributeTo(this._zoomingSquare,{display:'none',fill:'rgba(171,12,12,0.2)',stroke:'rgba(171,12,12,1)','shape-rendering':'crispEdges',x:0,y:0,height:0,width:0,'pointer-events':'none'}),this.graph=O,O.groupEvent.appendChild(this._zoomingGroup),this._zoomingGroup.appendChild(this._zoomingSquare)}onMouseDown(O,V,B,W,R){var G=this.options.zoomMode;if(G){switch(this._zoomingMode=G,void 0===V&&(this._backedUpZoomMode=this._zoomingMode,this._zoomingMode='y',V=0),void 0===B&&(this._backedUpZoomMode=this._zoomingMode,this._zoomingMode='x',B=0),this._zoomingXStart=V,this._zoomingYStart=B,this.x1=V-O.getPaddingLeft(),this.y1=B-O.getPaddingTop(),this._zoomingSquare.setAttribute('width',0),this._zoomingSquare.setAttribute('height',0),this._zoomingSquare.setAttribute('display','block'),this._zoomingMode){case'x':this._zoomingSquare.setAttribute('y',O.options.paddingTop),this._zoomingSquare.setAttribute('height',O.getDrawingHeight()-O.shift.bottom);break;case'y':this._zoomingSquare.setAttribute('x',O.options.paddingLeft),this._zoomingSquare.setAttribute('width',O.getDrawingWidth());break;case'forceY2':this.y2=O.getYAxis().getPx(this.options.forcedY)+O.options.paddingTop;}this.options.onZoomStart&&!R&&this.options.onZoomStart(O,V,B,W,R)}}onMouseMove(O,V,B,W,R){switch(this._zoomingMode){case'xy':this._zoomingSquare.setAttribute('x',Math.min(this._zoomingXStart,V)),this._zoomingSquare.setAttribute('y',Math.min(this._zoomingYStart,B)),this._zoomingSquare.setAttribute('width',Math.abs(this._zoomingXStart-V)),this._zoomingSquare.setAttribute('height',Math.abs(this._zoomingYStart-B));break;case'forceY2':this._zoomingSquare.setAttribute('y',Math.min(this._zoomingYStart,this.y2)),this._zoomingSquare.setAttribute('height',Math.abs(this._zoomingYStart-this.y2)),this._zoomingSquare.setAttribute('x',Math.min(this._zoomingXStart,V)),this._zoomingSquare.setAttribute('width',Math.abs(this._zoomingXStart-V));break;case'x':this._zoomingSquare.setAttribute('x',Math.min(this._zoomingXStart,V)),this._zoomingSquare.setAttribute('width',Math.abs(this._zoomingXStart-V));break;case'y':this._zoomingSquare.setAttribute('y',Math.min(this._zoomingYStart,B)),this._zoomingSquare.setAttribute('height',Math.abs(this._zoomingYStart-B));}this.options.onZoomMove&&!R&&this.options.onZoomMove(O,V,B,W,R)}onMouseUp(O,V,B,W,R){var G=this;this.removeZone();var U=V-O.options.paddingLeft,Z=B-O.options.paddingTop;if(this.emit('beforeZoom',{graph:O,x:V,y:B,e:W,mute:R}),O.prevent(!1))return void O.prevent(!0);if((0!=V-this._zoomingXStart||'y'==this._zoomingMode)&&(0!=B-this._zoomingYStart||'x'==this._zoomingMode))if(this.options.transition||this.options.smooth){let Q=!1,K=!1;('x'==this._zoomingMode||'xy'==this._zoomingMode||'forceY2'==this._zoomingMode)&&(this.fullX=!1,this.toAxes(function(J){J._pluginZoomMin=J.getCurrentMin(),J._pluginZoomMax=J.getCurrentMax(),J._pluginZoomMinFinal=Math.min(J.getVal(U),J.getVal(G.x1)),J._pluginZoomMaxFinal=Math.max(J.getVal(U),J.getVal(G.x1))},!1,!0,!1),Q=!0),('y'==this._zoomingMode||'xy'==this._zoomingMode)&&(this.fullY=!1,this.toAxes(function(J){J._pluginZoomMin=J.getCurrentMin(),J._pluginZoomMax=J.getCurrentMax(),J._pluginZoomMinFinal=Math.min(J.getVal(Z),J.getVal(G.y1)),J._pluginZoomMaxFinal=Math.max(J.getVal(Z),J.getVal(G.y1))},!1,!1,!0),K=!0),'forceY2'==this._zoomingMode&&(this.fullY=!1,this.toAxes(function(J){J._pluginZoomMin=J.getCurrentMin(),J._pluginZoomMax=J.getCurrentMax(),J._pluginZoomMinFinal=Math.min(J.getVal(G.y2),J.getVal(G.y1)),J._pluginZoomMaxFinal=Math.max(J.getVal(G.y2),J.getVal(G.y1))},!1,!1,!0),K=!0),this.transition(Q,K,'zoomEnd')}else{switch(this._zoomingMode){case'x':this.fullX=!1,this.toAxes('_doZoom',[U,this.x1],!0,!1);break;case'y':this.fullY=!1,this.toAxes('_doZoom',[Z,this.y1],!1,!0);break;case'xy':this.fullX=!1,this.fullY=!1,this.toAxes('_doZoom',[U,this.x1],!0,!1),this.toAxes('_doZoom',[Z,this.y1],!1,!0);break;case'forceY2':this.fullX=!1,this.fullY=!1,this.toAxes('_doZoom',[U,this.x1],!0,!1),this.toAxes('_doZoom',[this.y1,this.y2],!1,!0);}O.prevent(!0),O.draw(),this._backedUpZoomMode&&(this._zoomingMode=this._backedUpZoomMode),this.emit('zoomed'),O.pluginYieldActiveState()}}removeZone(){this._zoomingSquare.setAttribute('display','none')}onMouseWheel(O,V,B){B||(B={}),B.baseline||(B.baseline=0);var W='x'==B.direction,R='y'===B.direction;this.toAxes('handleMouseWheel',[O,V,B.baseline],W,R),this.graph.drawSeries()}onDblClick(O,V,B,W,R){var G=this.graph;if(this.emit('beforeDblClick',{graph:G,x:O,y:V,pref:W,e:B,mute:R}),!G.prevent(!1)){if(this.options.transition||this.options.smooth){var U=!1,Z=!1;if(('xtotal'==W.mode||'total'==W.mode)&&(this.toAxes(function(oe){oe._pluginZoomMin=oe.getCurrentMin(),oe._pluginZoomMax=oe.getCurrentMax(),oe._pluginZoomMinFinal=oe.getMinValue(),oe._pluginZoomMaxFinal=oe.getMaxValue()},!1,!0,!1),U=!0),('ytotal'==W.mode||'total'==W.mode)&&(this.toAxes(function(oe){oe._pluginZoomMin=oe.getCurrentMin(),oe._pluginZoomMax=oe.getCurrentMax(),oe._pluginZoomMinFinal=oe.getMinValue(),oe._pluginZoomMaxFinal=oe.getMaxValue()},!1,!1,!0),Z=!0),'gradualX'==W.mode||'gradualY'==W.mode||'gradual'==W.mode||'gradualXY'==W.mode){var O=!1,V=!1;('gradualX'==W.mode||'gradual'==W.mode||'gradualXY'==W.mode)&&(O=!0,U=!0),('gradualY'==W.mode||'gradual'==W.mode||'gradualXY'==W.mode)&&(V=!0,Z=!0),this.toAxes(function(oe){oe._pluginZoomMin=oe.getCurrentMin(),oe._pluginZoomMax=oe.getCurrentMax(),oe._pluginZoomMinFinal=oe.getCurrentMin()-(oe.getCurrentMax()-oe.getCurrentMin()),oe._pluginZoomMaxFinal=oe.getCurrentMax()+(oe.getCurrentMax()-oe.getCurrentMin())},!1,O,V)}return void this.transition(U,Z,'dblClick')}var Q=this.graph.getXAxis(),K=this.graph.getYAxis();if('xtotal'==W.mode)this.toAxes('setMinMaxToFitSeries',null,!0,!1),this.fullX=!0,this.fullY=!1;else if('ytotal'==W.mode)this.toAxes('setMinMaxToFitSeries',null,!1,!0),this.fullX=!1,this.fullY=!0;else if('total'==W.mode)this.toAxes('setMinMaxToFitSeries',null,!0,!0),this.fullX=!0,this.fullY=!0;else{O-=this.graph.options.paddingLeft,V-=this.graph.options.paddingTop;var J=Q.getCurrentMin(),$=Q.getCurrentMax(),ee=Q.getVal(O),te=$-J,ie=K.getCurrentMin(),re=K.getCurrentMax(),ae=K.getVal(V),se=re-ie;if('gradualXY'==W.mode||'gradualX'==W.mode){var ne=(ee-J)/($-J);J=Math.max(Q.getMinValue(),J-te*ne),$=Math.min(Q.getMaxValue(),$+te*(1-ne)),Q.setCurrentMin(J),Q.setCurrentMax($),Q.options.onZoom&&Q.options.onZoom(J,$),Q.cacheCurrentMin(),Q.cacheCurrentMax(),Q.cacheInterval()}if('gradualXY'==W.mode||'gradualY'==W.mode){var ne=(ae-ie)/(re-ie);ie=Math.max(K.getMinValue(),ie-se*ne),re=Math.min(K.getMaxValue(),re+se*(1-ne)),K.setCurrentMin(ie),K.setCurrentMax(re),K.options.onZoom&&K.options.onZoom(ie,re),K.cacheCurrentMin(),K.cacheCurrentMax(),K.cacheInterval()}}G.pluginYieldActiveState(),this.graph.draw()}}transition(O,V,B){var W=this,R=500;W.gradualUnzoomStart||(W.gradualUnzoomStart=Date.now()),window.requestAnimationFrame(function(){var G=Date.now()-W.gradualUnzoomStart;G>R&&(G=R);var U=Math.sin(G/R*Math.PI/2);W.toAxes(function(Z){Z.setCurrentMin(Z._pluginZoomMin+(Z._pluginZoomMinFinal-Z._pluginZoomMin)*U),Z.setCurrentMax(Z._pluginZoomMax+(Z._pluginZoomMaxFinal-Z._pluginZoomMax)*U),Z.cacheCurrentMin(),Z.cacheCurrentMax(),Z.cacheInterval()},!1,O,V),W.graph.draw(),G<R?(W.transition(O,V,B),W.emit('zooming')):(W.emit('zoomed'),W.graph.pluginYieldActiveState(),B&&W.emit(B),W.gradualUnzoomStart=0)})}isFullX(){return this.fullX}isFullY(){return this.fullY}toAxes(O,V,B,W){var R=this.options.axes;switch(R&&('serieSelected'!=R||this.graph.getSelectedSerie())||(R='all'),R){case'all':this.graph._applyToAxes.apply(this.graph,arguments);break;case'serieSelected':var G=this.graph.getSelectedSerie();G&&(B&&('string'==typeof O?G.getXAxis()[O].apply(G.getXAxis(),V):O.apply(G.getXAxis(),V)),W&&('string'==typeof O?G.getYAxis()[O].apply(G.getYAxis(),V):O.apply(G.getYAxis(),V)));break;default:Array.isArray(R)||(R=[R]);for(let U of R)U.isX()&&B?'string'==typeof O?U[O].apply(U,V):O.apply(U,V):U.isY()&&W&&('string'==typeof O?U[O].apply(U,V):O.apply(U,V));}}}E.default=F})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(1),S(39),S(33),S(3)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var X})(this,function(E,Y,X,I,N){'use strict';function F(G){return G&&G.__esModule?G:{default:G}}Object.defineProperty(E,'__esModule',{value:!0});var O=F(Y),V=F(X),B=F(I),W=function(U){if(U&&U.__esModule)return U;var Z={};if(null!=U)for(var Q in U)Object.prototype.hasOwnProperty.call(U,Q)&&(Z[Q]=U[Q]);return Z.default=U,Z}(N);class R extends B.default{constructor(){super(...arguments),this.series=[],this.plugins=[],this.currentSlots={},this.requestLevels={},this.update=(G,U)=>{this.series.forEach(function(Z){this.updateSerie(Z,G)}),G||this.recalculateSeries(U)}}static defaults(){return{LRUName:'PluginTimeSerieManager',intervals:[1000,15000,60000,900000,3600000,8640000],maxParallelRequests:3,optimalPxPerPoint:2,nbPoints:1000,url:''}}init(G){this.graph=G,V.default.create(this.options.LRUName,200),this.requestsRunning=0}setURL(G){return this.options.url=G,this}setAvailableIntervals(){this.options.intervals=arguments}newSerie(G,U,Z,Q,K){var J=this.graph.newSerie(G,U,Z);return this.currentSlots[G]={min:0,max:0,interval:0},J.on('hide',function(){J._zoneSerie&&J._zoneSerie.hide()}),J.on('show',function(){J._zoneSerie&&J._zoneSerie.show()}),J.setInfo('timeSerieManagerDBElements',Q),K||(J._zoneSerie=this.graph.newSerie(G+'_zone',{},O.default.SERIE_ZONE)),this.series.push(J),J}registerPlugin(G){var U;if(-1<(U=this.plugins.indexOf(G)))for(var Z=1;Z<arguments.length;Z++)G.removeListener(arguments[Z],this.update);for(var Z=1;Z<arguments.length;Z++)G.on(arguments[Z],this.update)}updateSerie(G,U){var Z=this,Q=G.getXAxis().getCurrentMin(),K=G.getXAxis().getCurrentMax(),J=this.getOptimalInterval(K-Q),$=this.options.intervals.indexOf(J),ee;for(var te=$-1;te<=$+1;te++){ee=this.options.intervals[te];var ie=Z.computeSlotID(Q,ee),re=Z.computeSlotID(K,ee);[[2,5,6],[1,2,4],[0,1,3]].forEach(function(ae){for(var se=ie-ae[0]*(re-ie),ne=re+ae[0]*(re-ie),oe=se;oe<=ne&&!(Z.computeTimeMin(oe,ee)>Date.now());)Z.register(G,oe,ee,ee==J?ae[1]:ae[2],!0,U),oe++})}this.processRequests()}register(G,U,Z,Q,K,J){var $=this.computeUniqueID(G,U,Z),ee=V.default.get(this.options.LRUName,$);(!ee||this.computeTimeMax(U,Z)>Date.now()&&ee.timeout<Date.now()-(J?5000:100000)&&1==Q)&&this.request(G,U,Z,Q,$,K)}request(G,U,Z,Q,K,J){for(var $ in this.requestLevels)$!=Q&&this.requestLevels[$][K]&&(1===this.requestLevels[$][K][0]?this.requestLevels[$][K][5]=Q:delete this.requestLevels[$][K]);this.requestLevels[Q]&&this.requestLevels[Q][K]||(this.requestLevels[Q]=this.requestLevels[Q]||{},this.requestLevels[Q][K]=[0,K,G.getName(),U,Z,Q,G.getInfo('timeSerieManagerDBElements')],!J&&this.processRequests())}processRequests(){if(!(this.requestsRunning>=this.options.maxParallelRequests)){for(var G=this,U=1,Z;!0;){for(var Q in this.requestLevels[U])if(1!=this.requestLevels[U][Q][0]){Z=this.requestLevels[U][Q];break}if(Z)break;if(U++,10<U)return}this.requestsRunning++,Z&&(Z[0]=1,W.ajaxGet({url:this.getURL(Z),method:'GET',json:!0}).done(function(K){1==K.status&&(G.requestsRunning--,delete G.requestLevels[U][Q],V.default.store(G.options.LRUName,Z[1],K.data),G.processRequests(),1==Z[5]&&0==Object.keys(G.requestLevels[1]).length&&G.recalculateSeries(!0))}))}}computeTimeMax(G,U){return(G+1)*(U*this.options.nbPoints)}computeTimeMin(G,U){return G*(U*this.options.nbPoints)}getURL(G){var U=this.options.url.replace('<measurementid>',G[2]).replace('<from>',this.computeTimeMin(G[3],G[4])).replace('<to>',this.computeTimeMax(G[3],G[4])).replace('<interval>',G[4]),Z=G[6]||{};for(var Q in Z)U=U.replace('<'+Q+'>',Z[Q]);return U}getOptimalInterval(G){var U=(this.options.optimalPxPerPoint||1)*G/this.graph.getDrawingWidth(),Z=1/0,Q;return this.options.intervals.forEach(function(K){var J=Math.min(Z,Math.abs(K-U));Z!==J&&(Q=K,Z=J)}),Q||1000}computeUniqueID(G,U,Z){var Q='',K=G.getInfo('timeSerieManagerDBElements');for(var J in K)Q+=';'+J+':'+K[J];return G.getName()+';'+U+';'+Z+Q}computeSlotID(G,U){return Math.floor(G/(U*this.options.nbPoints))}computeSlotTime(G,U){return G*(U*this.options.nbPoints)}getZoneSerie(G){return G._zoneSerie}updateZoneSerie(G){var U=this.graph.getSerie(G);U&&U._zoneSerie&&(U._zoneSerie.setXAxis(U.getXAxis()),U._zoneSerie.setYAxis(U.getYAxis()),U._zoneSerie.setFillColor(U.getLineColor()),U._zoneSerie.setLineColor(U.getLineColor()),U._zoneSerie.setFillOpacity(0.2),U._zoneSerie.setLineOpacity(0.3))}recalculateSeries(G){var U=this;this.locked||(this.changed=!1,this.series.map(function(Z){U.recalculateSerie(Z,G)}),this.changed=!1,U.graph.draw())}recalculateSerie(G,U){var Z=G.getXAxis().getCurrentMin(),Q=G.getXAxis().getCurrentMax(),K=this.getOptimalInterval(Q-Z),J=this.computeSlotID(Z,K),$=this.computeSlotID(Q,K),ee=[],te=[],ie;if(!(!U&&K==this.currentSlots[G.getName()].interval&&this.currentSlots[G.getName()].min<=J&&this.currentSlots[G.getName()].max>=$)){J-=2,$+=2,this.currentSlots[G.getName()].min=J,this.currentSlots[G.getName()].max=$,this.currentSlots[G.getName()].interval=K;for(var re=J;re<=$;)(ie=V.default.get(this.options.LRUName,this.computeUniqueID(G,re,K)))?(ee=ee.concat(ie.data.mean),te=te.concat(ie.data.minmax)):this.recalculateSerieUpwards(G,re,K,ee,te),re++;this.changed=!0,G.setData(ee),G._zoneSerie&&G._zoneSerie.setData(te)}}setIntervalCheck(G){this.interval&&clearInterval(this.interval);var U=this;this.interval=setInterval(function(){U.update(!0,!1)},G)}recalculateSerieUpwards(G,U,Z,Q,K){var J=this.options.intervals.slice(0);J.sort();var $=J[J.indexOf(Z)+1]||-1,ee;if(0>$)return[];var te=this.computeSlotTime(U,Z),ie=this.computeSlotTime(U+1,Z),re=this.computeSlotID(te,$),ae=!1;if(ee=V.default.get(this.options.LRUName,this.computeUniqueID(G,re,$)))for(var se=0,ne=ee.data.mean.length;se<ne;se+=2){if(ee.data.mean[se]<te)continue;else!1==ae&&(ae=se);if(ee.data.mean[se]>=ie)return Q=Q.concat(ee.data.mean.slice(ae,se)),void(K=Q.concat(ee.data.minmax.slice(ae,se)))}return this.recalculateSerieUpwards(G,re,$,Q,K)}lockRedraw(){this.locked=!0}unlockRedraw(){this.locked=!1}isRedrawLocked(){return!!this.locked}}E.default=R})},function(u,A){var S,P,C;(function(T,E){P=[A],S=E,C='function'==typeof S?S.apply(A,P):S,!(C!==void 0&&(u.exports=C));var Y})(this,function(T){'use strict';function E(V,B){B=B||50,I[V]||(I[V]={},F[V]=0),O[V]=B}function Y(V,B){var W,R;if(I[V]&&I[V][B])return R=N[V],W=I[V][B],W.prev=R,W.next=R.next,R.next.prev=W,R.next=W,N[V]=W,W.data}function X(V,B,W){var R,G,U;if(I[V]&&void 0!==F[V]&&O[V])return U=N[V],I[V][B]?(Y(V,B),I[V][B].data.data=W,I[V][B].data.timeout=Date.now()):(R={data:{data:W,timeout:Date.now()}},'undefined'==typeof U?(R.prev=R,R.next=R):(R.prev=U.prev,R.next=U.next,U.next.prev=R,U.next=R),N[V]=R,I[V][B]=R,F[V]++),F[V]>O[V]&&U&&(G=U.next,U.next.next.prev=U,U.next=U.next.next,G.next.next=void 0,G.next.prev=void 0,F[V]--),W}Object.defineProperty(T,'__esModule',{value:!0}),T.create=function(B,W){E(B,W)},T.get=function(B,W){var R;if((R=Y(B,W))!=void 0)return R},T.store=function(V,B,W){return X(V,B,W),W},T.empty=function(B){emptyMemory(B)},T.exist=function(B){return I[B]};var I={},N={},F={},O={};;;;})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(33)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var X})(this,function(E,Y){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var X=function(F){return F&&F.__esModule?F:{default:F}}(Y);class I extends X.default{constructor(){super(...arguments)}static defaults(){return{positiveStyle:{fillColor:'green',fillOpacity:0.2,strokeWidth:0},negativeStyle:{fillColor:'red',fillOpacity:0.2,strokeWidth:0},from:0,to:0}}init(N){this.graph=N,this.pathsPositive=[],this.pathsNegative=[],this.positivePolyline=this.graph.newShape('polyline').draw(),this.positivePolyline.setFillColor(this.options.positiveStyle.fillColor).setFillOpacity(this.options.positiveStyle.fillOpacity).setStrokeWidth(this.options.positiveStyle.strokeWidth).applyStyle(),this.negativePolyline=this.graph.newShape('polyline').draw(),this.negativePolyline.setFillColor(this.options.negativeStyle.fillColor).setFillOpacity(this.options.negativeStyle.fillOpacity).setStrokeWidth(this.options.negativeStyle.strokeWidth).applyStyle()}setSeries(N,F){this.serie1=N,this.serie2=F}setBoundaries(N,F){this.options.from=N,this.options.to=F}getFrom(){return this.options.from}getTo(){return this.options.to}draw(){function N(){!0===te?O.pathsPositive.push([K,J]):!1==te&&O.pathsNegative.push([K,J]),K=[],J=[],te=void 0}function F(ae,se){for(var ne=0;ne<se[0].length;ne+=2)0==ne&&(ae+='M '),ae+=' '+Math.round(O.serie1.getXAxis().getPx(se[0][ne]))+', '+Math.round(O.serie1.getYAxis().getPx(se[0][ne+1])),ne<se[0].length-2&&(ae+=' L ');for(var ne=se[1].length-2;0<=ne;ne-=2)ae+=' L '+Math.round(O.serie2.getXAxis().getPx(se[1][ne]))+', '+Math.round(O.serie2.getYAxis().getPx(se[1][ne+1])),0==ne&&(ae+=' z ');return ae}var O=this,V=this.serie1.searchClosestValue(this.getFrom()),B,W,R,G,U,Z,Q,K=[],J=[],$;V?(B=V.dataIndex,W=2*V.xAfterIndex):(B=0,W=0),U=this.interpolate(this.serie1,this.getFrom()),K.push(this.getFrom()),K.push(U),U=this.interpolate(this.serie2,this.getFrom()),J.push(this.getFrom()),J.push(U);for(var ee,te,ie;B<this.serie1.data.length;B++){for(;W<this.serie1.data[B].length;W+=2){if(this.serie1.data[B][W]>this.getTo()){U=this.interpolate(this.serie1,this.getTo()),Z=this.interpolate(this.serie2,this.getTo()),Q=this.computeCrossing(K[K.length-2],K[K.length-1],this.getTo(),U,J[J.length-2],J[J.length-1],this.getTo(),Z),Q&&(K.push(Q.x),K.push(Q.y),J.push(Q.x),J.push(Q.y),N(),K.push(Q.x),K.push(Q.y),J.push(Q.x),J.push(Q.y),te=this.serie1.data[B][W+1]>this.serie2.data[R][G+1]),K.push(this.getTo()),K.push(U),J.push(this.getTo()),J.push(Z),ie=!0;break}if(!ee)if(ee=this.serie2.searchClosestValue(this.serie1.data[B][W]),ee)R=ee.dataIndex,G=2*ee.xBeforeIndex,U=this.interpolate(this.serie2,this.serie1.data[B][W]),K.push(this.serie1.data[B][W]),K.push(this.serie1.data[B][W+1]),J.push(this.serie1.data[B][W]),J.push(U),te=this.serie1.data[B][W+1]>U;else continue;for($=!1,Q=this.computeCrossing(K[K.length-2],K[K.length-1],this.serie1.data[B][W],this.serie1.data[B][W+1],J[J.length-2],J[J.length-1],this.serie2.data[R][G],this.serie2.data[R][G+1]),Q&&(K.push(Q.x),K.push(Q.y),J.push(Q.x),J.push(Q.y),N(),K.push(Q.x),K.push(Q.y),J.push(Q.x),J.push(Q.y),te=this.serie1.data[B][W+1]>this.serie2.data[R][G+1]);this.serie2.data[R][G]<this.serie1.data[B][W];){if(J.push(this.serie2.data[R][G]),J.push(this.serie2.data[R][G+1]),G+=2,G==this.serie2.data[R].length){$=this.serie2.data[R][G-2],R++,G=0;break}Q=this.computeCrossing(K[K.length-2],K[K.length-1],this.serie1.data[B][W],this.serie1.data[B][W+1],J[J.length-2],J[J.length-1],this.serie2.data[R][G],this.serie2.data[R][G+1]),Q&&(K.push(Q.x),K.push(Q.y),J.push(Q.x),J.push(Q.y),N(),K.push(Q.x),K.push(Q.y),J.push(Q.x),J.push(Q.y),te=this.serie1.data[B][W+1]>this.serie2.data[R][G+1])}!1===$?(K.push(this.serie1.data[B][W]),K.push(this.serie1.data[B][W+1])):(K.push($),K.push(this.interpolate(this.serie1,$)),ee=!1,W-=2,N())}if(ie){N();break}(U=this.interpolate(this.serie2,K[K.length-2]))&&(J.push(K[K.length-2]),J.push(U)),N(),W=0,ee=!1}var re=this.pathsPositive.reduce(F,'');this.positivePolyline.setPointsPx(re).redraw();var re=this.pathsNegative.reduce(F,'');this.negativePolyline.setPointsPx(re).redraw()}interpolate(N,F){var O=N.searchClosestValue(F);if(!O)return!1;if(void 0==O.xMax)return O.yMin;if(void 0==O.xMin)return O.yMax;var V=(F-O.xMin)/(O.xMax-O.xMin);return(1-V)*O.yMin+V*O.yMax}computeCrossing(N,F,O,V,B,W,R,G){var U=(V-F)/(O-N),Z=(G-W)/(R-B),Q=V-U*O;if(N==O||B==R)return!1;if(U==Z)return{x:N,y1:F,y2:F};var K=(Q-(G-Z*R))/(Z-U);return K>O||K<N||K<B||K>R?!1:{x:K,y:U*K+Q}}getPositivePolyline(){return this.positivePolyline}getNegativePolyline(){return this.negativePolyline}}E.default=I})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(1),S(6),S(8),S(3),S(11),S(18),S(33),S(7)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var X})(this,function(E,Y,X,I,N,F,O,V,B){'use strict';function W(oe){return oe&&oe.__esModule?oe:{default:oe}}Object.defineProperty(E,'__esModule',{value:!0});var R=W(Y),G=W(X),U=W(I),Z=function(le){if(le&&le.__esModule)return le;var de={};if(null!=le)for(var pe in le)Object.prototype.hasOwnProperty.call(le,pe)&&(de[pe]=le[pe]);return de.default=le,de}(N),Q=W(F),K=W(O),J=W(V);W(B);class $ extends Q.default{constructor(){super(...arguments),this.subSeries=[]}setData(){return super.setData(...arguments),this.subSeries.map(oe=>{oe.data=this.data}),this}draw(){return this.eraseMarkers(),this}getSymbolForLegend(){return!!this.subSeries[0]&&this.subSeries[0].getSymbolForLegend()}getMarkerForLegend(){return!!this.subSeries[0]&&this.subSeries[0].getMarkerForLegend()}}class ee extends K.default{constructor(){super(...arguments),this.subSeries=[]}setData(){return super.setData(...arguments),this.subSeries.map(oe=>{oe.data=this.data}),this}draw(){return this}getSymbolForLegend(){return!!this.subSeries[0]&&this.subSeries[0].getSymbolForLegend()}getMarkerForLegend(){return!!this.subSeries[0]&&this.subSeries[0].getMarkerForLegend()}}var te=['constructor','init','draw','setLineColor','setLineWidth','setLineStyle','getLineColor','getLineWidth','getLineStyle','setMarkers','showMarkers','hideMarkers','getMarkerDom','getMarkerDomIndependant','getMarkerPath','eraseMarkers','_recalculateMarkerPoints'];Object.getOwnPropertyNames(Q.default.prototype).concat([]).map(function(oe){-1<te.indexOf(oe)||($.prototype[oe]=function(le){return function(){var de=arguments;this.subSeries.map(pe=>{pe[le](...de)})}}(oe))});class ie extends J.default{constructor(){super(...arguments),this.series=new Map}static defaults(){return{axes:{margins:{high:5,low:5}}}}init(oe){this.graph=oe}newXAxis(oe){return newBottomAxis(oe)}newYAxis(oe){return newLeftAxis(oe)}newTopAxis(oe){return oe=this.getOptions(oe),new se(this.graph,'top',oe)}newBottomAxis(oe){return oe=this.getOptions(oe),new se(this.graph,'bottom',oe)}newLeftAxis(oe){return oe=this.getOptions(oe),new ne(this.graph,'left',oe)}newRightAxis(oe){return oe=this.getOptions(oe),new ne(this.graph,'right',oe)}getOptions(oe){var le={marginMin:this.options.axes.margins.low,marginMax:this.options.axes.margins.high};return Z.extend(!0,le,oe)}preDraw(){var oe,le;this.series.forEach(({serie:de})=>{oe=de.getXAxis(),le=de.getYAxis();let pe=1;for(oe.splitNumber&&(pe*=oe.splitNumber),le.splitNumber&&(pe*=le.splitNumber);de.subSeries.length<pe;){const ue=de.getName()+'_'+de.subSeries.length,ge=this.graph.newSerie(ue,{},de.getType()||R.default.SERIE_LINE);ge.excludedFromLegend=!0,ge.styles=de.styles,ge.data=de.data,de.getType()==R.default.SERIE_LINE&&(ge.markerPoints=de.markerPoints,ge.markerFamilies=de.markerFamilies),de.subSeries.push(ge)}for(;de.subSeries.length>pe;){let ue=this.graph.getSerie(de.getName()+'_'+(de.subSeries.length-1));ue&&ue.kill&&ue.kill(),de.subSeries.pop()}!de.getXAxis().splitNumber&&de.getXAxis().splitAxis&&de.getXAxis().splitAxis(),!de.getYAxis().splitNumber&&de.getYAxis().splitAxis&&de.getYAxis().splitAxis(),de.subSeries.map((ue,ge)=>{var ce,he;if(de.getXAxis().getSubAxis){let xe=ge%(oe.splitNumber||1);ce=de.getXAxis().getSubAxis(xe)}else ce=de.getXAxis();if(ue.setXAxis(ce),de.getYAxis().getSubAxis){let xe=Math.floor(ge/(oe.splitNumber||1));he=de.getYAxis().getSubAxis(xe)}else he=de.getYAxis();ue.setYAxis(he),ue.draw(!0)})})}newSerie(oe,le={},de){switch(de){case'line':return newLineSerie(oe,le);break;case'scatter':return newScatterSerie(oe,le);}throw'Cannot create a split serie of type '+de}newLineSerie(oe,le){var de={type:'lineSerie',serie:new $(oe,le,'line')};return this.series.set(oe,de),de.serie.init(this.graph,oe,le),this.graph.series.push(de.serie),de.serie}newScatterSerie(oe,le){var de={type:'scatterSerie',serie:new ee(oe,le,'scatter')};return this.series.set(oe,de),de.serie.init(this.graph,le),this.graph.series.push(de.serie),de.serie}}var re={splitMarks:!0},ae=function(oe){var le=class extends oe{constructor(pe,ue,ge={}){super(pe,ue,ge),this.axes=[],this.position=ue,this.constructorOptions=Z.extend(!0,{},re,ge),this._splitVal=[]}all(pe){if('function'==typeof pe)return this.axes.map(pe),this}splitAxis(...pe){pe.push(1);let ue=pe.length;for(;this.axes.length>ue;)this.axes.pop().kill(!0,!0);for(;this.axes.length<ue;){let he=new(this.getConstructor())(this.graph,this.position,this.constructorOptions);this.axes.push(he),he.zoomLock=!0,he.init(this.graph,this.constructorOptions)}let ge=0,ce=0;for(let he of this.axes)he.options.marginMin=10,he.options.marginMax=10,0==ce&&(he.options.marginMin=0),ce==this.axes.length-1&&(he.options.marginMax=0),he.setSpan(ge,ge=pe[ce]),he.setMinMaxFlipped(),ce++;return this._splits=pe,this}fixGridIntervalBasedOnAxis(pe){return this.fixGridFor=pe,this.graph._axisHasChanged(),this}splitSpread(pe){return this.autoSpread=!!pe,this}hasAxis(pe){return-1<this.axes.indexOf(pe)}_splitSpread(){let pe=[],ue=0,ge=0;for(let ce of this._splitVal)ue+=ce[1]-ce[0];for(let ce of this._splitVal)pe.push(ge+=(ce[1]-ce[0])/ue);pe.pop(),this.splitAxis(...pe)}setChunkBoundaries(pe){let ue=0,ge,ce;for(let he of this.axes)Array.isArray(pe[ue])&&1<pe[ue].length&&!ge&&(ge=pe[ue][1]-pe[ue][0],ce=ue),1!=pe[ue].length&&Array.isArray(pe[ue])?he.forceMin(pe[ue][0]).forceMax(pe[ue][1]):(he._mean=pe[ue],Array.isArray(he._mean)&&(he._mean=he._mean[0])),ue++;return this._baseWidthVal=ge,this._baseWidthIndex=ce,this._splitVal=pe,this.graph._axisHasChanged(),this}setMinMaxToFitSeries(){(!this._splitVal||1>this._splitVal.length)&&(super.setMinMaxToFitSeries(...arguments),this._splitVal[0]=this._splitVal[0]||[],this._splitVal[this._splitVal.length-1]=this._splitVal[this._splitVal.length-1]||[],this._splitVal[0][0]=this.getCurrentMin(),this._splitVal[this._splitVal.length-1][1]=this.getCurrentMax(),this.setChunkBoundaries(this._splitVal))}draw(){this.autoSpread&&this._splitSpread();let pe=0,ue,ge,ce;if(0<=this._baseWidthIndex&&(ge=this.getSubAxis(this._baseWidthIndex))&&(ce=ge.getSpan()),ge=void 0,0<=this.fixGridFor&&(ge=this.getSubAxis(this.fixGridFor))){if(void 0!==ge._mean){let he=(ge.getSpan()[1]-ge.getSpan()[0])/(ce[1]-ce[0])*this._baseWidthVal;ge.forceMin(ge._mean-he/2),ge.forceMax(ge._mean+he/2)}pe=ge.draw(),ue=ge.getPrimaryTickUnit()}return this.axes.map(he=>{if(ge!==he){if(void 0!==he._mean){let xe=(he.getSpan()[1]-he.getSpan()[0])/(ce[1]-ce[0])*this._baseWidthVal;he.forceMin(he._mean-xe/2),he.forceMax(he._mean+xe/2)}ue&&he.forcePrimaryTickUnit(ue),pe=Math.max(pe,he.draw())}}),this.writeUnit(),pe}setMinPx(pe){super.setMinPx(pe);for(let ue of this.axes)ue.setMinPx(pe)}setMaxPx(pe){super.setMaxPx(pe);for(let ue of this.axes)ue.setMaxPx(pe)}setShift(){super.setShift(...arguments);for(let pe of this.axes)pe.setShift(...arguments)}init(){super.init(...arguments),this.splitAxis()}getAxisPosition(){var pe=0;return this.axes.map(ue=>{pe=Math.max(pe,ue.getAxisPosition())}),pe}getSubAxis(pe){if(this.axes.length<=pe)throw'Impossible to reach axis. Index '+pe+' is out of range';return this.axes[pe]}get splitNumber(){return this._splits.length}};return['turnGridsOff','turnGridsOn','gridsOff','gridsOn','setEngineering','setScientificScaleExponent','setScientific','setLabelColor','setSecondaryGridDasharray','setPrimaryGridDasharray','setSecondaryGridsOpacity','setPrimaryGridOpacity','setSecondaryGridWidth','setPrimaryGridWidth','setSecondaryGridColor','setPrimaryGridColor','setTicksLabelColor','setSecondaryTicksColor','setPrimaryTicksColor','setAxisColor','secondaryGridOn','secondaryGridOff','primaryGridOff','primaryGridOn','setSecondaryGrid','setPrimaryGrid','setGrids','setTickPosition','setExponentialFactor','setExponentialLabelFactor','setGridLinesStyle','forcePrimaryTickUnitMin','forcePrimaryTickUnitMax','forcePrimaryTickUnit','flip','show','hide','setDisplay'].map(de=>{le.prototype[de]=function(pe){return function(){return this.axes.map(ue=>{ue[pe](...arguments)}),this}}(de)}),le};class se extends ae(G.default){constructor(oe,le){super(...arguments),this.topbottom=le}getConstructor(){return G.default}getAxisPosition(){var oe=super.getAxisPosition(...arguments);return this.labelPosY=oe,this.getLabel()&&(oe+=this.graph.options.fontSize),oe}drawLabel(){super.drawLabel(),this.label.setAttribute('y',(this.top?-1:1)*(this.graph.options.fontSize+this.labelPosY))}draw(){var oe=super.draw(...arguments);return this.drawLabel(),oe}}class ne extends ae(U.default){constructor(){super(...arguments)}getConstructor(){return U.default}drawLabel(){super.drawLabel()}equalizePosition(oe){var le=oe;if(this.getLabel()&&this.axes.map(de=>{le=Math.max(de.equalizePosition(oe),le)}),this.getLabel())return this.placeLabel(this.left?-le:le),le+this.graph.options.fontSize}}Z.mix(se,new G.default),Z.mix(ne,new U.default),E.default=ie})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(27)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var X})(this,function(E,Y){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var X=function(F){return F&&F.__esModule?F:{default:F}}(Y);class I extends X.default{constructor(N){super(N)}createDom(){this._dom=document.createElementNS(this.graph.ns,'line'),this._dom.setAttribute('marker-end','url(#arrow'+this.graph._creation+')'),this.createHandles(this.nbHandles,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white',cursor:'nwse-resize'}),this.setStrokeColor('black'),this.setStrokeWidth(1)}}E.default=I})}])});;
//# sourceMappingURL=jsgraph-es6.min.js.map
